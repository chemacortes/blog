<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Chema Cortés">
  <meta name="description" content="Clausuras en python - Parte 1 | Funciones Lambda Antes de ver qué son las clausuras (closures), veamos qué tienen las funciones lambda que las hacen...">

  <link rel="stylesheet" type="text/css" href="https://blog.ch3m4.org/theme/css/style.7098921b.min.css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  <link href="https://blog.ch3m4.org/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Hyperreals *R Full Atom Feed" />

<meta name="keywords" content="functional programming, programming, programación, lambda calculus, math, closures">

  <script src="https://blog.ch3m4.org/theme/js/lw-timeago.25926835.min.js" type="text/javascript"></script>

  <title>
Clausuras en python - Parte 1 | Hyperreals *R  </title>

</head>

<body>
  <aside>
    <div id="user_meta">
      <a href="https://blog.ch3m4.org">
        <img src="https://s.gravatar.com/avatar/b20d114964d6d77c209aadbe9a152e87?s=80" alt="logo" id="logo">
      </a>
      <h2><a href="https://blog.ch3m4.org" class="nohover">Hyperreals *R</a></h2>
      <p>Quarks, bits y otras criaturas infinitesimales</p>
      <div class="social">
          <a href="https://twitter.com/chemacortes" title="twitter"><i class="fa fa-twitter fa-lg"></i></a>
          <a href="https://github.com/chemacortes" title="github"><i class="fa fa-github fa-lg"></i></a>
          <a href="https://bitbucket.org/chemacortes/" title="bitbucket"><i class="fa fa-bitbucket fa-lg"></i></a>
          <a href="http://stackoverflow.com/users/1243400/chemacortes" title="stackoverflow"><i class="fa fa-stack-overflow fa-lg"></i></a>
          <a href="https://linkedin.com/in/chemacortes" title="linkedin"><i class="fa fa-linkedin fa-lg"></i></a>
      </div>
      <ul>
        <li><a href="/feeds/all.atom.xml">All Feeds<i class="fa fa-external-link-square fa-lg"></i></a></li>
        <li><a href="/feeds/scala.atom.xml">Scala Feeds<i class="fa fa-external-link-square fa-lg"></i></a></li>
        <li><a href="/feeds/python.atom.xml">Python Feeds<i class="fa fa-external-link-square fa-lg"></i></a></li>
        <li><a href="https://www.coursera.org/user/9408450118c4cfeddff015451ed358b6">my coursera<i class="fa fa-external-link-square fa-lg"></i></a></li>
      </ul>
    </div>
  </aside>

  <main id="main">
    <header>
      <p id="header">
      <a href="https://blog.ch3m4.org">Home</a>
      
      &#124; <a href="https://blog.ch3m4.org/pages/aboutme/">Quién&nbsp;soy</a>
      &#124; <a href="https://blog.ch3m4.org/pages/busqueda-python-es/">Búsqueda&nbsp;python-es</a>
      &#124; <a href="https://blog.ch3m4.org/feeds/all.atom.xml">Atom Feed</a>
      </p>
<p>
<a href="https://blog.ch3m4.org/index.html">Posts</a>
&#124; <a href="https://blog.ch3m4.org/tag/">Tags</a>
&#124; <a href="https://blog.ch3m4.org/category/">Categories</a>
&#124; <a href="https://blog.ch3m4.org/archives.html">Archive</a>
</p>    </header>

<article>
  <div class="article_title">
    <h1><a href="https://blog.ch3m4.org/2013/10/25/clausuras-en-python-parte-1/" class="nohover">Clausuras en python - Parte&nbsp;1</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted <time data-timeago datetime="2013-10-25T21:02:00+02:00">vie 25 octubre 2013</time>
     by Chema Cortés    </p>
    <p>
    Category: <a href="https://blog.ch3m4.org/category/python/">Python</a>
&ndash;&ndash;    Tags:
      <a href="https://blog.ch3m4.org/tag/closures/">closures</a>    </p>
  </div>
  <div class="article_text">
    <h2>Funciones&nbsp;Lambda</h2>
<p>Antes de ver qué son las <strong>clausuras</strong> (<em>closures</em>), veamos
qué tienen las <em>funciones lambda</em> que las hacen tan polémicas algunas&nbsp;veces.</p>
<p>Comencemos con un ejemplo. Te recomiendo que te esfuerces en deducir
cómo funciona sin ir a probar cómo funciona. A continuación te pondré
algunos valores para que elijas los valores de las tres&nbsp;listas:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>    <span class="n">i</span><span class="o">=</span><span class="mi">1</span>
    <span class="n">add_one</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="o">+</span><span class="n">i</span>

    <span class="n">lista1</span><span class="o">=</span><span class="p">[</span><span class="n">add_one</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]]</span>

    <span class="n">i</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">lista2</span><span class="o">=</span><span class="p">[</span><span class="n">add_one</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]]</span>

    <span class="n">i</span><span class="o">=</span><span class="mi">2</span>
    <span class="n">lista3</span><span class="o">=</span><span class="p">[</span><span class="n">add_one</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]]</span>
</code></pre></div>
</td></tr></table>

<p>Valores para <code>lista1</code>:</p>
<ol>
<li><code>[0,1,2]</code></li>
<li><code>[1,2,3]</code></li>
<li><code>[0,2,4]</code></li>
<li><code>[1,3,5]</code></li>
</ol>
<p>Valores para <code>lista2</code>:</p>
<ol>
<li><code>[0,1,2]</code></li>
<li><code>[1,2,3]</code></li>
<li><code>[0,2,4]</code></li>
<li><code>[1,3,5]</code></li>
</ol>
<p>Valores para <code>lista3</code>:</p>
<ol>
<li><code>[0,1,2]</code></li>
<li><code>[1,2,3]</code></li>
<li><code>[2,3,4]</code></li>
<li><code>[1,3,5]</code></li>
</ol>
<p>Las soluciones están al final del artículo<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>, pero puedes probarlo
ahora para que lo veas tú&nbsp;mismo.</p>
<h3>¿Qué es lo que ha&nbsp;pasado?</h3>
<p>Contrariamente a lo que estamos acostrumbrados con las funciones normales, la
evaluación de una <em>función lambda</em> se hace dentro del entorno donde se
ejecuta, independiente del entorno donde se ha definido. Así pués, en la <em>función lambda</em> <code>lambda
x:x+i</code>, la variable <code>i</code> toma el valor de esta variable en el momento
de evaluar la función. Como se usa esta variable para la compresión de la
lista, irá cambiando de valor a medida que se recorre la lista
<code>[0,1,2]</code>, por lo que la expresión <code>add_one(i)</code> termina convirtiéndose
en la expresión <code>i+i</code>, y la expresión <code>add_one(i+1)</code> en <code>i+1+i</code>.</p>
<p>Tiene un funcionamiento similar a los <em>macros</em>, donde se sustituye
<em>literalmente</em> la llamada a la función por la expresión equivalente. En
python3, se hace más evidente al denominarse <em>expresiones lambda</em> en lugar de <em>funciones lambda</em>.</p>
<h2>Clausuras</h2>
<p>En una función podemos distinguir dos&nbsp;partes:</p>
<ul>
<li><strong>Código&nbsp;ejecutable</strong></li>
<li><strong>Entorno de evaluación</strong>, más conocido por <strong>Ámbito</strong> o <strong>Scope</strong></li>
</ul>
<p>Antes de ejecutar el código de la función, se aumenta el entorno de
evaluación con los <em>argumentos de entrada</em> de la&nbsp;función.</p>
<p>Según en qué entorno se evalua la función, tenemos dos&nbsp;ámbitos:</p>
<ul>
<li><strong>Clausura</strong>, también llamado <strong>Ámbito léxico</strong> o <strong>Ámbito
  Estático</strong>, cuando la función se evalua en el entorno donde se ha&nbsp;definido.</li>
<li><strong>Ámbito dinámico</strong> cuando se evalua en el entorno donde se invoca la&nbsp;función.</li>
</ul>
<p>Con esta definición, podemos afirmar que en python las funciones
tienen <em>ámbito léxico</em>, con excepción de las funciones lambda que tienen
<em>ámbito dinámico</em>.</p>
<p>No voy a considerar las ventajas de uno u otro tipo. Por lo general, las <em>clausuras</em>
se consideran mejores para desacoplar el código de la
función del código donde se invoca, lo que ayuda mucho al
mantenimiento y corrección de errores. Es por ello la manera normal de
crear funciones en la mayoría de lenguajes de&nbsp;programación.</p>
<h3>¿Cómo hacer que una función lambda se comporte como si tuviera <em>clausura</em>?</h3>
<p>La forma de hacer que un función lambda se evalue en el entorno donde
se define consiste en pasar las variables de ese entorno que necesite
en los argumentos de entrada, casi siempre como argumentos por&nbsp;defecto.</p>
<p>En el ejemplo anterior&nbsp;sería:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>    <span class="n">i</span><span class="o">=</span><span class="mi">1</span>
    <span class="n">add_one</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="p">:</span><span class="n">x</span><span class="o">+</span><span class="n">i</span>
</code></pre></div>
</td></tr></table>

<p>que equivaldrá&nbsp;a</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>    <span class="n">add_one</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">:</span><span class="n">x</span><span class="o">+</span><span class="n">i</span>
</code></pre></div>
</td></tr></table>

<p>En este caso <code>i</code> se toma de los argumentos de la función, y tendrá por
defecto el valor de <code>i</code> en el momento de la definición de la función&nbsp;lambda.</p>
<p>No es perfecto, pero es lo mejor que tenemos. Lo recomendable es
evitar las funciones lambda complejas si no queremos llevarnos algunas&nbsp;sorpresas.</p>
<div class="footnote">
<hr>
<ol>
<li id="fn:1">
<p>Los valores de las listas son las opciones 3, 3 y 4, respectivamente.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
  </div>
  <hr>
  
  <ul class="pager">
          <li class="previous">
               <a href="https://blog.ch3m4.org/2013/10/07/nuevos-planteamientos-nueva-etapa/" title="Anterior">
                    <i class="fa fa-arrow-circle-left"></i>
                   Nuevos planteamientos, nueva&nbsp;etapa
               </a>
           </li>
           <li class="next">
              <a href="https://blog.ch3m4.org/2013/10/26/clausuras-en-python-parte-2/" title="Siguiente">
                   Clausuras en python - Parte&nbsp;2
                   <i class="fa fa-arrow-circle-right"></i>
               </a>
           </li>
   </ul>
   With category <a href="https://blog.ch3m4.org/category/python/">Python</a>:
   <ul class="pager">
          <li class="previous">
             <a href="https://blog.ch3m4.org/2013/08/14/estudio-funcion-factorial-numpy/" title="Anterior en misma categoría">
                <i class="fa fa-arrow-circle-o-left"></i>
                Estudio función factorial -&nbsp;numpy
             </a>
          </li>
        <li class="next">
             <a href="https://blog.ch3m4.org/2013/10/26/clausuras-en-python-parte-2/" title="Siguiente en misma categoría">
                 Clausuras en python - Parte&nbsp;2
                 <i class="fa fa-arrow-circle-o-right"></i>
             </a>
        </li>

   </ul>

    
  <div id="article_comments">
    <div id="disqus_thread">
    </div>
  </div>

  <script type="text/javascript">
    var disqus_identifier = "2013/10/25/clausuras-en-python-parte-1/";
    loadDisqus = function() {
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//hyperreals.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    };
    loadDisqus();
  </script>
</article>


    <div id="ending_message">
        <p>&copy; Chema Cortés. Built using <a href="http://getpelican.com">Pelican</a>. Theme is <a href="https://github.com/pR0Ps/pelican-subtle">subtle</a> by <a href="http://cmetcalfe.ca">Carey Metcalfe</a>. Based on <a href="https://github.com/giulivo/pelican-svbhack">svbhack</a> by Giulio Fidente.</p>
    </div>
  </main>

  <script type="text/javascript">
    window.addEventListener('load', function(){
    if (window.location.pathname != '/' && window.location.pathname != '/index.html'){
      window.scroll(0, document.getElementById('main').offsetTop);
    }})
  </script>


<script type="text/javascript">window.addEventListener("load", lw_timeago);</script>
</body>
</html>