<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Chema Cortés">
  <meta name="description" content="Evaluación perezosa avanzada - Evaluación perezosa en python - Parte 4 | Evaluación perezosa avanzada Haskell tiene una librería,...">

  <link rel="stylesheet" type="text/css" href="https://blog.ch3m4.org/theme/css/styles.78787593.min.css">

  <script src="https://blog.ch3m4.org/theme/js/scripts.ab06d70e.min.js" type="text/javascript"></script>

  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">

  <link href="https://blog.ch3m4.org/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Hyperreals *R Full Atom Feed" />

<meta name="keywords" content="functional programming, programming, programación, lambda calculus, math, lazy-eval, sequence, range, primes">

  <title>Evaluación perezosa avanzada - Evaluación perezosa en python - Parte 4 | Hyperreals *R</title>

</head>

<body>
  <aside>
    <div id="user_meta">
      <a href="https://blog.ch3m4.org">
        <img src="https://s.gravatar.com/avatar/b20d114964d6d77c209aadbe9a152e87?s=80" id="logo">
      </a>
      <h2><a href="https://blog.ch3m4.org" class="nohover">Hyperreals *R</a></h2>
      <p>Quarks, bits y otras criaturas infinitesimales</p>
      <div class="social">
          <a href="https://twitter.com/chemacortes" title="twitter" target="_blank" rel="noopener noreferrer"><i class="fa fa-twitter fa-lg"></i></a>
          <a href="https://github.com/chemacortes" title="github" target="_blank" rel="noopener noreferrer"><i class="fa fa-github fa-lg"></i></a>
          <a href="https://bitbucket.org/chemacortes/" title="bitbucket" target="_blank" rel="noopener noreferrer"><i class="fa fa-bitbucket fa-lg"></i></a>
          <a href="https://stackoverflow.com/users/1243400/chemacortes" title="stackoverflow" target="_blank" rel="noopener noreferrer"><i class="fa fa-stack-overflow fa-lg"></i></a>
          <a href="https://linkedin.com/in/chemacortes" title="linkedin" target="_blank" rel="noopener noreferrer"><i class="fa fa-linkedin fa-lg"></i></a>
      </div>
      <ul>
        <li><a href="/feeds/all.atom.xml" target="_blank" rel="noopener noreferrer">All Feeds<i class="fa fa-external-link-square fa-lg"></i></a></li>
        <li><a href="/feeds/scala.atom.xml" target="_blank" rel="noopener noreferrer">Scala Feeds<i class="fa fa-external-link-square fa-lg"></i></a></li>
        <li><a href="/feeds/python.atom.xml" target="_blank" rel="noopener noreferrer">Python Feeds<i class="fa fa-external-link-square fa-lg"></i></a></li>
        <li><a href="/feeds/notas.atom.xml" target="_blank" rel="noopener noreferrer">Notas Feeds<i class="fa fa-external-link-square fa-lg"></i></a></li>
      </ul>
    </div>
  </aside>

  <main id="main">
    <header>
      <p id="header">
      <a href="https://blog.ch3m4.org">Home</a>

      &#124; <a href="https://blog.ch3m4.org/pages/aboutme/">Quién&nbsp;soy</a>
      &#124; <a href="https://blog.ch3m4.org/pages/busqueda-python-es/">Búsqueda&nbsp;python-es</a>
      &#124; <a href="https://blog.ch3m4.org/feeds/all.atom.xml">Atom Feed</a>
      </p>
<p>
<a href="https://blog.ch3m4.org/index.html">Posts</a>
&#124; <a href="https://blog.ch3m4.org/tag/">Tags</a>
&#124; <a href="https://blog.ch3m4.org/category/">Categories</a>
&#124; <a href="https://blog.ch3m4.org/category/notas/">Notes</a>
&#124; <a href="https://blog.ch3m4.org/archives.html">Archive</a>
</p>    </header>

<article>
<div class="article_meta">
  <p>Posted <time data-timeago datetime="2021-02-15T21:20:20+01:00">lun 15 febrero 2021</time>
   by Chema Cortés  </p>
  <p>Last updated <time data-timeago datetime="2021-03-15T20:54:35+01:00">lun 15 marzo 2021</time></p>
  <p>
  Category: <a href="https://blog.ch3m4.org/category/python/">Python</a>
&ndash;&ndash;  Tags:
    <a href="https://blog.ch3m4.org/tag/lazy-eval/">lazy-eval</a>,    <a href="https://blog.ch3m4.org/tag/sequence/">sequence</a>,    <a href="https://blog.ch3m4.org/tag/range/">range</a>,    <a href="https://blog.ch3m4.org/tag/primes/">primes</a>  </p>
</div>  <div class="article_title">
    <h1><a href="https://blog.ch3m4.org/2021/02/15/evaluacion-perezosa-en-python-parte-4/" class="nohover">Evaluación perezosa avanzada - Evaluación perezosa en python - Parte&nbsp;4</a></h1>
  </div>
  <div class="article_text">
    <h2><em>Evaluación perezosa</em>&nbsp;avanzada</h2>
<p>Haskell tiene una librería, <code>Data.Numbers.Primes</code>, que ofrece tanto una
secuencia con todos los números primos, <code>primes</code>, como la función <code>isprime</code> con
la que chequear si un número es primo. Gracias a la <em>evaluación perezosa</em>,
haskell sólo calcula los elementos de <code>primes</code> que&nbsp;necesite.</p>
<p>Vamos a intentar hacer en python lo que hace sencillo&nbsp;haskell:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;</span><span class="w"> </span><span class="n">take</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="n">primes</span><span class="w"></span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">19</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">29</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span><span class="mi">37</span><span class="p">,</span><span class="mi">41</span><span class="p">,</span><span class="mi">43</span><span class="p">,</span><span class="mi">47</span><span class="p">,</span><span class="mi">53</span><span class="p">,</span><span class="mi">59</span><span class="p">,</span><span class="mi">61</span><span class="p">,</span><span class="mi">67</span><span class="p">,</span><span class="mi">71</span><span class="p">,</span><span class="mi">73</span><span class="p">,</span><span class="mi">79</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">89</span><span class="p">,</span><span class="mi">97</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">103</span><span class="p">,</span><span class="w"></span>
<span class="mi">107</span><span class="p">,</span><span class="mi">109</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">127</span><span class="p">,</span><span class="mi">131</span><span class="p">,</span><span class="mi">137</span><span class="p">,</span><span class="mi">139</span><span class="p">,</span><span class="mi">149</span><span class="p">,</span><span class="mi">151</span><span class="p">,</span><span class="mi">157</span><span class="p">,</span><span class="mi">163</span><span class="p">,</span><span class="mi">167</span><span class="p">,</span><span class="mi">173</span><span class="p">,</span><span class="mi">179</span><span class="p">,</span><span class="mi">181</span><span class="p">,</span><span class="mi">191</span><span class="p">,</span><span class="mi">193</span><span class="p">,</span><span class="mi">197</span><span class="p">,</span><span class="mi">199</span><span class="p">,</span><span class="mi">211</span><span class="p">,</span><span class="w"></span>
<span class="mi">223</span><span class="p">,</span><span class="mi">227</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">233</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">251</span><span class="p">,</span><span class="mi">257</span><span class="p">,</span><span class="mi">263</span><span class="p">,</span><span class="mi">269</span><span class="p">,</span><span class="mi">271</span><span class="p">,</span><span class="mi">277</span><span class="p">,</span><span class="mi">281</span><span class="p">,</span><span class="mi">283</span><span class="p">,</span><span class="mi">293</span><span class="p">,</span><span class="mi">307</span><span class="p">,</span><span class="mi">311</span><span class="p">,</span><span class="mi">313</span><span class="p">,</span><span class="mi">317</span><span class="p">,</span><span class="mi">331</span><span class="p">,</span><span class="w"></span>
<span class="mi">337</span><span class="p">,</span><span class="mi">347</span><span class="p">,</span><span class="mi">349</span><span class="p">,</span><span class="mi">353</span><span class="p">,</span><span class="mi">359</span><span class="p">,</span><span class="mi">367</span><span class="p">,</span><span class="mi">373</span><span class="p">,</span><span class="mi">379</span><span class="p">,</span><span class="mi">383</span><span class="p">,</span><span class="mi">389</span><span class="p">,</span><span class="mi">397</span><span class="p">,</span><span class="mi">401</span><span class="p">,</span><span class="mi">409</span><span class="p">,</span><span class="mi">419</span><span class="p">,</span><span class="mi">421</span><span class="p">,</span><span class="mi">431</span><span class="p">,</span><span class="mi">433</span><span class="p">,</span><span class="mi">439</span><span class="p">,</span><span class="mi">443</span><span class="p">,</span><span class="mi">449</span><span class="p">,</span><span class="w"></span>
<span class="mi">457</span><span class="p">,</span><span class="mi">461</span><span class="p">,</span><span class="mi">463</span><span class="p">,</span><span class="mi">467</span><span class="p">,</span><span class="mi">479</span><span class="p">,</span><span class="mi">487</span><span class="p">,</span><span class="mi">491</span><span class="p">,</span><span class="mi">499</span><span class="p">,</span><span class="mi">503</span><span class="p">,</span><span class="mi">509</span><span class="p">,</span><span class="mi">521</span><span class="p">,</span><span class="mi">523</span><span class="p">,</span><span class="mi">541</span><span class="p">]</span><span class="w"></span>

<span class="o">&gt;</span><span class="w"> </span><span class="n">primes</span><span class="o">!!</span><span class="mi">90000</span><span class="w"></span>
<span class="mi">1159531</span><span class="w"></span>

<span class="o">&gt;</span><span class="w"> </span><span class="n">isPrime</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="o">^</span><span class="mi">31</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="kt">True</span><span class="w"></span>
</code></pre></div>

<h2>Calculo de números&nbsp;primos</h2>
<p>Por definición, un número primo sólo es divisible por <code>1</code> y por sí&nbsp;mismo:</p>
<div class="highlight"><pre><span></span><code><span class="n">Prime</span> <span class="o">=</span> <span class="nb">int</span>  <span class="c1"># un alias para números primos</span>

<span class="k">def</span> <span class="nf">isprime</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">n</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">primes</span><span class="p">(</span><span class="n">to</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Prime</span><span class="p">]:</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">to</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">isprime</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span>
</code></pre></div>

<p>Podemos aplicar algunas optimizaciones a estos&nbsp;cálculos:</p>
<ul>
<li>Excepto el 2, podemos descartar como primos todos los números&nbsp;pares</li>
<li>Al comprobar divisores de <span class="math">\(n\)</span>, basta con probar hasta <span class="math">\(\sqrt{n}\)</span>, y únicamente
  con aquellos que sean&nbsp;primos</li>
</ul>
<p>Con estas premisas, podemos ir ya diseñando una estrategia para obtener una
secuencia de primos por evaluación&nbsp;perezosa:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Generator</span><span class="p">,</span> <span class="n">Iterable</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">islice</span>

<span class="n">INFINITE</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span>  <span class="c1"># una aproximación &#39;mala&#39; para infinito</span>
<span class="n">Prime</span> <span class="o">=</span> <span class="nb">int</span>  <span class="c1"># un alias para números primos</span>

<span class="c1"># lista de números primos que vayamos obteniendo</span>
<span class="n">primes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Prime</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">isdivisible</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">divisors</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Comprobar si &#39;n&#39; es divisible por</span>
<span class="sd">    los elementos de un iterable ordenado</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">divisible</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">divisors</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">d</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">divisible</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">break</span>
        <span class="k">if</span> <span class="n">d</span> <span class="o">*</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">:</span>
            <span class="k">break</span>
    <span class="k">return</span> <span class="n">divisible</span>


<span class="k">def</span> <span class="nf">isprime</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Comprobar si &#39;n&#39; es un número primo&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="n">primes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">primes</span>

    <span class="c1"># probando primos como divisores</span>
    <span class="k">if</span> <span class="n">isdivisible</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">primes</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># seguir con el resto de números impares</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">primes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">2</span>
    <span class="k">return</span> <span class="ow">not</span> <span class="n">isdivisible</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">genprimes</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Prime</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Generador de números primos&quot;&quot;&quot;</span>

    <span class="n">start</span> <span class="o">=</span> <span class="n">primes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">2</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">INFINITE</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">isdivisible</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">primes</span><span class="p">):</span>
            <span class="n">primes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">n</span>
</code></pre></div>

<p>El generador <code>genprimes</code> nos dará un iterador con el que ir obteniendo los
números primos siguientes al último de la lista. A medida que obtiene un primo,
se añade a la lista <code>primes</code>.</p>
<p>La lista <code>primes</code> actua como <em>caché</em> de los números primos obtenidos y la
empleará <code>isprime</code> para sus comprobaciones. Si <code>isprime</code> se queda sin primos,
continua con los siguientes números impares hasta obtener un resultado, sin
pararse a calcular los primos&nbsp;intermedios.</p>
<h2>Secuencia de números&nbsp;primos</h2>
<p>Vistas estas funciones vamos a armar con ellas la estructura de una clase
<em>secuencia</em>. <code>isprime</code> pasará a ser el método <code>__contains__</code> y el generador
<code>genprimes</code> lo usaremos para ampliar automáticamente la lista de números primos
según sea&nbsp;necesario:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Generator</span><span class="p">,</span> <span class="n">Iterable</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">islice</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Union</span>

<span class="n">INFINITE</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span>  <span class="c1"># una mala aproximación de infinito</span>
<span class="n">Prime</span> <span class="o">=</span> <span class="nb">int</span>  <span class="c1"># un alias para los primos</span>


<span class="k">def</span> <span class="nf">isdivisible</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">divisors</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Comprobar si &#39;n&#39; es divisible por</span>
<span class="sd">    los elementos de un iterable ordenado</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">divisible</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">divisors</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">d</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">divisible</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">break</span>
        <span class="k">if</span> <span class="n">d</span> <span class="o">*</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">:</span>
            <span class="k">break</span>
    <span class="k">return</span> <span class="n">divisible</span>


<span class="k">def</span> <span class="nf">nth</span><span class="p">(</span><span class="n">it</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Obtener de un iterable el elemento en la posición &#39;n&#39;&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">Primes</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Collection of primes numbers</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_primes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Prime</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">last</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Prime</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_primes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_primes</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">INFINITE</span>

    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Comprobar si &#39;n&#39; es un número primo&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_primes</span>

        <span class="c1"># probando primos como divisores</span>
        <span class="k">if</span> <span class="n">isdivisible</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_primes</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># seguir con el resto de números impares</span>
        <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last</span> <span class="o">+</span> <span class="mi">2</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="n">isdivisible</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">genprimes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Prime</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Generador de números primos&quot;&quot;&quot;</span>

        <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last</span> <span class="o">+</span> <span class="mi">2</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">INFINITE</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">isdivisible</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_primes</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_primes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
                <span class="k">yield</span> <span class="n">n</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">slice</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Prime</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">idx</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">OverflowError</span>

            <span class="k">return</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_primes</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">idx</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
                <span class="k">else</span> <span class="n">nth</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">genprimes</span><span class="p">(),</span> <span class="n">idx</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rng</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">INFINITE</span><span class="p">)[</span><span class="n">idx</span><span class="p">]</span>
            <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">rng</span><span class="p">]</span>

<span class="c1"># Secuencia de los números primos</span>
<span class="n">primes</span> <span class="o">=</span> <span class="n">Primes</span><span class="p">()</span>
<span class="n">isprime</span> <span class="o">=</span> <span class="n">primes</span><span class="o">.</span><span class="fm">__contains__</span>
</code></pre></div>

<p>Como <em>infinito</em> se usa <code>sys.maxsize</code> que es el mayor tamaño que puede tener una
lista para la versión <code>CPython</code>. Si tratamos de usar índices mayores para una
lista nos dará&nbsp;error.</p>
<p>Cuando se solicita un número primo que no está en la lista, el método
<code>__getitem__</code> invoca automáticamente al iterador que devuelve <code>genprimes</code> hasta
alcanzarlo. A medida que se descubren números primos, se val almacenando para su
posterior&nbsp;uso.</p>
<p>Pruebas de&nbsp;uso:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">primes</span> <span class="kn">import</span> <span class="n">primes</span><span class="p">,</span> <span class="n">isprime</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">primes</span><span class="p">[:</span><span class="mi">100</span><span class="p">])</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">61</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">73</span><span class="p">,</span>
 <span class="mi">79</span><span class="p">,</span> <span class="mi">83</span><span class="p">,</span> <span class="mi">89</span><span class="p">,</span> <span class="mi">97</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">103</span><span class="p">,</span> <span class="mi">107</span><span class="p">,</span> <span class="mi">109</span><span class="p">,</span> <span class="mi">113</span><span class="p">,</span> <span class="mi">127</span><span class="p">,</span> <span class="mi">131</span><span class="p">,</span> <span class="mi">137</span><span class="p">,</span> <span class="mi">139</span><span class="p">,</span> <span class="mi">149</span><span class="p">,</span> <span class="mi">151</span><span class="p">,</span> <span class="mi">157</span><span class="p">,</span>
 <span class="mi">163</span><span class="p">,</span> <span class="mi">167</span><span class="p">,</span> <span class="mi">173</span><span class="p">,</span> <span class="mi">179</span><span class="p">,</span> <span class="mi">181</span><span class="p">,</span> <span class="mi">191</span><span class="p">,</span> <span class="mi">193</span><span class="p">,</span> <span class="mi">197</span><span class="p">,</span> <span class="mi">199</span><span class="p">,</span> <span class="mi">211</span><span class="p">,</span> <span class="mi">223</span><span class="p">,</span> <span class="mi">227</span><span class="p">,</span> <span class="mi">229</span><span class="p">,</span> <span class="mi">233</span><span class="p">,</span> <span class="mi">239</span><span class="p">,</span> <span class="mi">241</span><span class="p">,</span>
 <span class="mi">251</span><span class="p">,</span> <span class="mi">257</span><span class="p">,</span> <span class="mi">263</span><span class="p">,</span> <span class="mi">269</span><span class="p">,</span> <span class="mi">271</span><span class="p">,</span> <span class="mi">277</span><span class="p">,</span> <span class="mi">281</span><span class="p">,</span> <span class="mi">283</span><span class="p">,</span> <span class="mi">293</span><span class="p">,</span> <span class="mi">307</span><span class="p">,</span> <span class="mi">311</span><span class="p">,</span> <span class="mi">313</span><span class="p">,</span> <span class="mi">317</span><span class="p">,</span> <span class="mi">331</span><span class="p">,</span> <span class="mi">337</span><span class="p">,</span> <span class="mi">347</span><span class="p">,</span>
 <span class="mi">349</span><span class="p">,</span> <span class="mi">353</span><span class="p">,</span> <span class="mi">359</span><span class="p">,</span> <span class="mi">367</span><span class="p">,</span> <span class="mi">373</span><span class="p">,</span> <span class="mi">379</span><span class="p">,</span> <span class="mi">383</span><span class="p">,</span> <span class="mi">389</span><span class="p">,</span> <span class="mi">397</span><span class="p">,</span> <span class="mi">401</span><span class="p">,</span> <span class="mi">409</span><span class="p">,</span> <span class="mi">419</span><span class="p">,</span> <span class="mi">421</span><span class="p">,</span> <span class="mi">431</span><span class="p">,</span> <span class="mi">433</span><span class="p">,</span> <span class="mi">439</span><span class="p">,</span>
 <span class="mi">443</span><span class="p">,</span> <span class="mi">449</span><span class="p">,</span> <span class="mi">457</span><span class="p">,</span> <span class="mi">461</span><span class="p">,</span> <span class="mi">463</span><span class="p">,</span> <span class="mi">467</span><span class="p">,</span> <span class="mi">479</span><span class="p">,</span> <span class="mi">487</span><span class="p">,</span> <span class="mi">491</span><span class="p">,</span> <span class="mi">499</span><span class="p">,</span> <span class="mi">503</span><span class="p">,</span> <span class="mi">509</span><span class="p">,</span> <span class="mi">521</span><span class="p">,</span> <span class="mi">523</span><span class="p">,</span> <span class="mi">541</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">primes</span><span class="p">[</span><span class="mi">90000</span><span class="p">]</span>
<span class="mi">1159531</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">isprime</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">31</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">31</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="ow">in</span> <span class="n">primes</span><span class="o">.</span><span class="n">_primes</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">primes</span><span class="o">.</span><span class="n">last</span>
<span class="mi">1159531</span>
</code></pre></div>

<p>Para cumplir con el protocolo <code>Sequence</code> podemos añadir los métodos que nos
faltan, cosa que animo hacer al lector. El método <code>count()</code> es trivial: si es
primo, habrá 1 ocurrencia; si no es primo, 0 ocurrencias. El método <code>index()</code> es
algo más complicado. En cambio el <code>_reversed__()</code> es imposible ya que no se
puede invertir una secuencia infinta. A pesar de ello, la clase <code>Prime</code> se
comportará casi como una secuencia siempre y cuando no itentemos acceder a la
secuencia por el&nbsp;final.</p>
<h2>Más&nbsp;optimizaciones</h2>
<h3>Bisecciones</h3>
<p>La lista de primos que vamos generando siempre será una <em>lista ordenada</em>, por lo
que se pueden optimizar mucho las búsquedas usando <em>bisecciones</em>, para lo que
tenemos el módulo <code>bisect</code> (<span class="math">\(O(\log{n})\)</span> en lugar de <span class="math">\(O(n)\)</span>).</p>
<p>Por ejemplo, para comprobar si un elemento está en una lista&nbsp;ordenada:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">bisect</span> <span class="kn">import</span> <span class="n">bisect_left</span>

<span class="k">def</span> <span class="nf">bs_contains</span><span class="p">(</span><span class="n">lst</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="n">idx</span> <span class="o">=</span> <span class="n">bisect_left</span><span class="p">(</span><span class="n">lst</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">idx</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span> <span class="ow">and</span> <span class="n">lst</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">==</span> <span class="n">x</span>
</code></pre></div>

<h3>Programación&nbsp;dinámica</h3>
<p>En el generador de números primos podemos observar que se están comprobando los
cuadrados de los divisores más veces de las necesarias. Podemos delimitar rangos
en los que se van a usar los mismos divisores. Por ejemplo, si tenemos la
secuencia <code>[2, 3]</code> como divisores podemos chequear números hasta el <code>23</code>. Para
seguir con el <code>25</code> tenemos que añadir un primo más, <code>[2, 3, 5]</code> con los que ya
podemos chequear hasta el <code>47</code>. Y así sucesivamente. El rango <code>range(start,
INFINITE, 2)</code> lo podemos fraccionar según el grupo de primos que emplearemos
como&nbsp;divisores.</p>
<p>La <em>programación dinámica</em> tiene sus riesgos y es bastante fácil que no funcione
bien a la primera, pero mejoran mucho la eficiencia de un&nbsp;algoritmo.</p>
<h3>Multiproceso</h3>
<p>Como opción de mejora está el uso de técnicas de concurrencia y multiproceso.
Como primera medida que podemos pensar sería crear varios <em>workers</em> que chequeen
en paralelo la divisibilidad para chequear varios números a la vez. El problema
es que estos workers tendrían que tener su copia de la lista de primos y
actualizarla conforme se obtenien, algo que es sumamente costoso y poco&nbsp;eficiente.</p>
<p>Una estrategia mejor sería especializar cada <em>worker</em> en un subconjunto de
números primos de modo que todos los <em>workers</em> intervengan colaborativamente en
el chequeo del mismo&nbsp;número.</p>
<p>En concurrencia, hay muchas estrategias posibles y ninguna mejor. Al final, cada
problema tiene su solución particular que no sirve como solución&nbsp;general.</p>
<h3>Código final&nbsp;optimizado</h3>
<p>El código final optimizado, sin usar concurrencia, se puede obtener del
siguiente&nbsp;enlace:</p>
<div class="admonition descarga">
<p class="admonition-title">Descarga</p>
<p><a href="https://blog.ch3m4.org/2021/02/15/evaluacion-perezosa-en-python-parte-4/primes.py">primes.py</a></p>
</div>
<p>Por hacernos una idea, esta sería la comparativa de tiempos de la versiones haskell y&nbsp;python:</p>
<!-- markdownlint-disable MD033 -->
<style>
table, th, td { border: 1px solid grey;padding: 1.2em;}
table {border-collapse: collapse;}
</style>
<!-- markdownlint-enable MD033 -->

<table>
<thead>
<tr>
<th align="left">operación</th>
<th align="right">haskell</th>
<th align="right">python</th>
<th align="right">python opt</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">primo 90000</td>
<td align="right">310ms</td>
<td align="right">1450ms</td>
<td align="right">860ms</td>
</tr>
<tr>
<td align="left">es primo <span class="math">\(2^{31}-1\)</span></td>
<td align="right">20ms</td>
<td align="right">10ms</td>
<td align="right">3ms</td>
</tr>
<tr>
<td align="left">index 1159531</td>
<td align="right">240ms</td>
<td align="right">N/A</td>
<td align="right">820ms</td>
</tr>
</tbody>
</table>
<hr>
<h2>Serie <em>Evaluación Perezosa en&nbsp;Python</em></h2>
<ul>
<li><a href="https://blog.ch3m4.org/2021/02/08/evaluacion-perezosa-en-python-parte-1/" title="Introducción a la _evaluación perezosa_">Parte 1 - Introducción a la <em>evaluación&nbsp;perezosa</em></a></li>
<li><a href="https://blog.ch3m4.org/2021/02/09/evaluacion-perezosa-en-python-parte-2/" title="Secuencias infinitas">Parte 2 - Secuencias&nbsp;infinitas</a></li>
<li><a href="https://blog.ch3m4.org/2021/02/14/evaluacion-perezosa-en-python-parte-3/" title="Parte 3 - _Memoización_">Parte 3 - <em>Memoización</em></a></li>
<li><a href="https://blog.ch3m4.org/2021/02/15/evaluacion-perezosa-en-python-parte-4/" title="Parte 4 - _Evaluación perezosa_ avanzada">Parte 4 - <em>Evaluación perezosa</em>&nbsp;avanzada</a></li>
<li><a href="https://blog.ch3m4.org/2021/03/07/evaluacion-perezosa-en-python-parte-5/" title="Parte 5 - Formalización de la Secuencia Perezosa">Parte 5 - Formalización de la Secuencia&nbsp;Perezosa</a></li>
<li><a href="https://blog.ch3m4.org/2021/03/07/evaluacion-perezosa-en-python-parte-6/" title="Parte 6 - Ejemplo práctico: Potencias de Fermi-Dirac">Parte 6 - Ejemplo práctico: Potencias de&nbsp;Fermi-Dirac</a></li>
<li><a href="https://blog.ch3m4.org/2021/03/10/evaluacion-perezosa-en-python-apendice/" title="Apéndice: sobre el tipado de datos utilizado">Apéndice: sobre el tipado de datos&nbsp;utilizado</a></li>
</ul>
<div class="admonition danger">
<p class="admonition-title">La serie unificada como <em>Jupyter Notebook</em>&nbsp;en:</p>
<ul>
<li><a href="https://blog.ch3m4.org/2021/notebook-serie-evaluacion-perezosa-en-python.sync.ipynb" title="Notebook - Evaluación perezosa en python">formato notebook&nbsp;(.ipynb)</a></li>
<li><a href="https://blog.ch3m4.org/2021/notebook-serie-evaluacion-perezosa-en-python.sync.md" title="Jupytext - Evaluación perezosa en python">formato jupytext&nbsp;(.md)</a></li>
</ul>
</div>
<hr>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
  </div>

<ul class="pager">
  <li class="previous">
    <a href="https://blog.ch3m4.org/2021/02/14/evaluacion-perezosa-en-python-parte-3/" title="Anterior">
      <i class="fa fa-arrow-circle-left"></i>
      Memoización - Evaluación perezosa en python - Parte&nbsp;3
    </a>
  </li>
   <li class="next">
    <a href="https://blog.ch3m4.org/2021/03/07/evaluacion-perezosa-en-python-parte-5/" title="Siguiente">
      Formalización de la Secuencia Perezosa - Evaluación perezosa en python - Parte&nbsp;5
      <i class="fa fa-arrow-circle-right"></i>
    </a>
  </li>
</ul>
With category
<a href="https://blog.ch3m4.org/category/python/">Python</a>:
<ul class="pager">
  <li class="previous">
    <a
      href="https://blog.ch3m4.org/2021/02/14/evaluacion-perezosa-en-python-parte-3/"
      title="Anterior en misma categoría"
    >
      <i class="fa fa-arrow-circle-o-left"></i>
      Memoización - Evaluación perezosa en python - Parte&nbsp;3
    </a>
  </li>
   <li class="next">
    <a
      href="https://blog.ch3m4.org/2021/03/07/evaluacion-perezosa-en-python-parte-5/"
      title="Siguiente en misma categoría"
    >
      Formalización de la Secuencia Perezosa - Evaluación perezosa en python - Parte&nbsp;5
      <i class="fa fa-arrow-circle-o-right"></i>
    </a>
  </li>
</ul>

  <div id="article_comments">
    <div id="disqus_thread">
    </div>
  </div>

  <script id="dsq-count-scr" src="https://hyperreals.disqus.com/count.js" async></script>
  <script type="text/javascript">
    var disqus_config = function () {
        this.page.identifier = "2021/02/15/evaluacion-perezosa-en-python-parte-4/";
        this.page.title = "Evaluación perezosa avanzada - Evaluación perezosa en python - Parte&nbsp;4";
    };
    loadDisqus = function(sitename) {
      var d = document, s = d.createElement('script');
      s.src = 'https://hyperreals.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    };
    loadDisqus();
  </script>
</article>


    <div id="ending_message">
        <p>&copy; Chema Cortés. Built using <a href="http://getpelican.com">Pelican</a>. Theme is <a href="https://github.com/pR0Ps/pelican-subtle">subtle</a> by <a href="http://cmetcalfe.ca">Carey Metcalfe</a>. Based on <a href="https://github.com/giulivo/pelican-svbhack">svbhack</a> by Giulio Fidente.</p>
    </div>
  </main>

  <script type="text/javascript">
    window.addEventListener('load', skipHeader)
  </script>


<script type="text/javascript">window.addEventListener("load", lw_timeago);</script>
</body>
</html>