<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Chema Cortés">
  <meta name="description" content="Ejemplo práctico. Potencias de Fermi-Dirac - Evaluación perezosa en python - Parte 6 | Ejemplo práctico: potencias de Fermi-Dirac Se llaman...">

  <link rel="stylesheet" type="text/css" href="https://blog.ch3m4.org/theme/css/styles.ea57ac74.min.css">

  <script src="https://blog.ch3m4.org/theme/js/scripts.ab06d70e.min.js" type="text/javascript"></script>

  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">

  <link href="https://blog.ch3m4.org/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Hyperreals *R Full Atom Feed" />

<meta name="keywords" content="functional programming, programming, programación, lambda calculus, math, lazy-eval, sequence, range, primes, fermi, dirac">

  <title>Ejemplo práctico. Potencias de Fermi-Dirac - Evaluación perezosa en python - Parte 6 | Hyperreals *R</title>

</head>

<body>
  <aside>
    <div id="user_meta">
      <a href="https://blog.ch3m4.org">
        <img src="https://s.gravatar.com/avatar/b20d114964d6d77c209aadbe9a152e87?s=80" id="logo">
      </a>
      <h2><a href="https://blog.ch3m4.org" class="nohover">Hyperreals *R</a></h2>
      <p>Quarks, bits y otras criaturas infinitesimales</p>
      <div class="social">
          <a href="https://twitter.com/chemacortes" title="twitter" target="_blank" rel="noopener noreferrer"><i class="fa fa-twitter fa-lg"></i></a>
          <a href="https://github.com/chemacortes" title="github" target="_blank" rel="noopener noreferrer"><i class="fa fa-github fa-lg"></i></a>
          <a href="https://bitbucket.org/chemacortes/" title="bitbucket" target="_blank" rel="noopener noreferrer"><i class="fa fa-bitbucket fa-lg"></i></a>
          <a href="http://stackoverflow.com/users/1243400/chemacortes" title="stackoverflow" target="_blank" rel="noopener noreferrer"><i class="fa fa-stack-overflow fa-lg"></i></a>
          <a href="https://linkedin.com/in/chemacortes" title="linkedin" target="_blank" rel="noopener noreferrer"><i class="fa fa-linkedin fa-lg"></i></a>
      </div>
      <ul>
        <li><a href="/feeds/all.atom.xml" target="_blank" rel="noopener noreferrer">All Feeds<i class="fa fa-external-link-square fa-lg"></i></a></li>
        <li><a href="/feeds/scala.atom.xml" target="_blank" rel="noopener noreferrer">Scala Feeds<i class="fa fa-external-link-square fa-lg"></i></a></li>
        <li><a href="/feeds/python.atom.xml" target="_blank" rel="noopener noreferrer">Python Feeds<i class="fa fa-external-link-square fa-lg"></i></a></li>
        <li><a href="https://www.coursera.org/user/9408450118c4cfeddff015451ed358b6" target="_blank" rel="noopener noreferrer">my coursera<i class="fa fa-external-link-square fa-lg"></i></a></li>
      </ul>
    </div>
  </aside>

  <main id="main">
    <header>
      <p id="header">
      <a href="https://blog.ch3m4.org">Home</a>

      &#124; <a href="https://blog.ch3m4.org/pages/aboutme/">Quién&nbsp;soy</a>
      &#124; <a href="https://blog.ch3m4.org/pages/busqueda-python-es/">Búsqueda&nbsp;python-es</a>
      &#124; <a href="https://blog.ch3m4.org/feeds/all.atom.xml">Atom Feed</a>
      </p>
<p>
<a href="https://blog.ch3m4.org/index.html">Posts</a>
&#124; <a href="https://blog.ch3m4.org/tag/">Tags</a>
&#124; <a href="https://blog.ch3m4.org/category/">Categories</a>
&#124; <a href="https://blog.ch3m4.org/archives.html">Archive</a>
</p>    </header>

<article>
<div class="article_meta">
  <p>Posted <time data-timeago datetime="2021-03-07T23:58:43+01:00">dom 07 marzo 2021</time>
   by Chema Cortés  </p>
  <p>Last updated <time data-timeago datetime="2021-03-15T21:03:23+01:00">lun 15 marzo 2021</time></p>
  <p>
  Category: <a href="https://blog.ch3m4.org/category/python/">Python</a>
&ndash;&ndash;  Tags:
    <a href="https://blog.ch3m4.org/tag/lazy-eval/">lazy-eval</a>,    <a href="https://blog.ch3m4.org/tag/sequence/">sequence</a>,    <a href="https://blog.ch3m4.org/tag/range/">range</a>,    <a href="https://blog.ch3m4.org/tag/primes/">primes</a>,    <a href="https://blog.ch3m4.org/tag/fermi/">fermi</a>,    <a href="https://blog.ch3m4.org/tag/dirac/">dirac</a>  </p>
</div>  <div class="article_title">
    <h1><a href="https://blog.ch3m4.org/drafts/2021-03-07-evaluacion-perezosa-en-python-parte-6.html" class="nohover">Ejemplo práctico. Potencias de Fermi-Dirac - Evaluación perezosa en python - Parte&nbsp;6</a></h1>
  </div>
  <div class="article_text">
    <h2>Ejemplo práctico: potencias de&nbsp;Fermi-Dirac</h2>
<p>Se llaman <strong>potencias de Fermi-Dirac</strong> a los números de la forma <span class="math">\(p^{2^k}\)</span>,
ordenados de menor a mayor, donde <code>p</code> es un número primo y <code>k</code> es un número&nbsp;natural.</p>
<p>Vamos a ver cómo crear la sucesión de <code>potencias</code> Fermi-Dirac ordenadas de menor
a mayor, y hacer las siguientes&nbsp;comprobaciones:</p>
<div class="highlight"><pre><span></span><code><span class="n">potencias</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>

<span class="n">potencias</span><span class="p">[:</span><span class="mi">14</span><span class="p">]</span>    <span class="o">==</span>  <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">19</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">29</span><span class="p">]</span>
<span class="n">potencias</span><span class="p">[</span><span class="mi">60</span><span class="p">]</span>     <span class="o">==</span>  <span class="mi">241</span>
<span class="n">potencias</span><span class="p">[</span><span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">]</span>  <span class="o">==</span>  <span class="mi">15476303</span>
</code></pre></div>

<h2>Estudio&nbsp;previo</h2>
<p>Para la primera de las comprobaciones necesitaremos obtener los primeros 14
elementos de <code>potencias</code>. Podemos empezar sacando las potencias en función del
exponente <code>k</code>:</p>
<div class="math">$$
\begin{align*}
P_0 &amp;= 2,3,5,7,11,...\\
P_1 &amp;= 4,9,25,49,121,..\\
P_2 &amp;= 16,81,625,2401,14641,...\\
P_3 &amp;= 256,6561,390625,5764801,214358881,815730721,...
\end{align*}
$$</div>
<p>A priori, no sabemos cuántos elementos vamos a necesitar de cada sucesión. Como
mucho necesitaremos los primeros 14 números primos y crear 14 secuencias, de
<span class="math">\(P_0\)</span> a <span class="math">\(P_13\)</span>, ordenarlos sus elementos en una lista y escoger los primeros 14
elementos. Con este proceso habremos calculado 196 potencias para sólo 14
elementos que necesitamos al&nbsp;final.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">primes</span> <span class="kn">import</span> <span class="n">primes</span>

<span class="n">potencias</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">p</span><span class="o">**</span><span class="mi">2</span><span class="o">**</span><span class="n">k</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">primes</span><span class="p">[:</span><span class="mi">14</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">potencias</span><span class="p">[:</span><span class="mi">14</span><span class="p">])</span>
</code></pre></div>

<p>Aún en el caso de que consiguiésemos reducir el número de elementos a usar de
cada secuencia, seguimos sin saber cuántos números primos vamos a emplear. Para
sacar los 14 primeros elementos de las potencias de Fermi-Dirac sólo se
necesitaban los 10 primeros números&nbsp;primos.</p>
<p>Es evidente que una estrategia por <em>fuerza bruta</em> puede ser complicada y
terminar por hacer muchos cálculos innecesarios, una complejidad del <span class="math">\(O({n^2})\)</span>
no resoluble con un ordenador normal. Veamos cómo nos ayuda la <em>evaluación
perezosa</em>.</p>
<h2>Modelos</h2>
<p>Por intentar crear un modelo, intentemos ver las sucesiones como un iterador de&nbsp;iteradores:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">count</span>

<span class="kn">from</span> <span class="nn">primes</span> <span class="kn">import</span> <span class="n">primes</span>

<span class="n">potencias</span> <span class="o">=</span> <span class="p">((</span><span class="n">p</span><span class="o">**</span><span class="mi">2</span><span class="o">**</span><span class="n">k</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">primes</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">count</span><span class="p">())</span>
</code></pre></div>

<p>Pero el problema con las <em>expresiones generadora</em> es similar al que tienen las
expresiones lambda, que carecen de su propia clausura y cualquier <em>variable
libre</em> queda alterada por el entorno donde se&nbsp;evalúan.</p>
<p>Se puede comprobar el fallo si intentamos extraer dos&nbsp;iteradores:</p>
<div class="highlight"><pre><span></span><code><span class="n">p0</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">potencias</span><span class="p">)</span>
<span class="n">p1</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">potencias</span><span class="p">)</span>
<span class="nb">next</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span>  <span class="c1"># --&gt; 4</span>
<span class="nb">next</span><span class="p">(</span><span class="n">p0</span><span class="p">)</span>  <span class="c1"># --&gt; 4</span>
<span class="nb">next</span><span class="p">(</span><span class="n">p0</span><span class="p">)</span>  <span class="c1"># --&gt; 9</span>
</code></pre></div>

<p>El exponente <code>k</code> ha cambiado de valor con el segundo iterador, lo que afecta a las potencias del primero. Tenemos que dotar a los iteradores de su propia&nbsp;clausura:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Iterator</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">count</span>

<span class="kn">from</span> <span class="nn">primes</span> <span class="kn">import</span> <span class="n">primes</span>

<span class="k">def</span> <span class="nf">potencias_gen</span><span class="p">(</span><span class="n">k</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
    <span class="k">yield from</span> <span class="p">(</span><span class="n">p</span><span class="o">**</span><span class="mi">2</span><span class="o">**</span><span class="n">k</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">primes</span><span class="p">)</span>

<span class="n">potencias</span> <span class="o">=</span> <span class="p">(</span><span class="n">potencias_gen</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">count</span><span class="p">())</span>
</code></pre></div>

<p>Es necesario combinar este iterador de iteradores en un único iterador,
operación que se conoce como <em>&#8220;aplanar el iterador&#8221;</em> o <em>&#8220;aplanar la secuencia&#8221;</em>.</p>
<p>Vamos a definir algunos tipos y&nbsp;operaciones:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># tipo para secuencias ordenadas</span>
<span class="n">SortedIterator</span> <span class="o">=</span> <span class="n">Iterator</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
</code></pre></div>

<p>Definimos la siguiente función para mezclar dos listas&nbsp;ordenadas:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">zipsort</span><span class="p">(</span><span class="n">s1</span><span class="p">:</span> <span class="n">SortedIterator</span><span class="p">,</span> <span class="n">s2</span><span class="p">:</span> <span class="n">SortedIterator</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SortedIterator</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">y</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">x</span>
            <span class="n">x</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">y</span>
            <span class="n">y</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span>
</code></pre></div>

<p>La función <code>zipsort</code> combina dos listas ordenadas <code>SortedIterator</code> para devolver
otra lista ordenada <code>SortedIterator</code>. Si quisiéramos combinar tres listas,
bastaría con volver a&nbsp;combinar:</p>
<div class="highlight"><pre><span></span><code><span class="n">zipsort</span><span class="p">(</span><span class="n">zipsort</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">),</span> <span class="n">s3</span><span class="p">)</span>
</code></pre></div>

<p>Y en general, podríamos combinar todas las listas de esta&nbsp;manera:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">flat</span><span class="p">(</span><span class="n">iterators</span><span class="p">:</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">SortedIterator</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">SortedIterator</span><span class="p">:</span>
    <span class="n">it1</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">iterators</span><span class="p">)</span>
    <span class="n">it2</span> <span class="o">=</span> <span class="n">flat</span><span class="p">(</span><span class="n">iterators</span><span class="p">)</span>
    <span class="k">yield from</span> <span class="n">zipsort</span><span class="p">(</span><span class="n">it1</span><span class="p">,</span> <span class="n">it2</span><span class="p">)</span>

<span class="n">potencias</span> <span class="o">=</span> <span class="n">flat</span><span class="p">(</span><span class="n">potencias_gen</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">count</span><span class="p">())</span>
</code></pre></div>

<p>El problema es que se entra en un bucle infinito de llamadas recursivas a <code>flat</code> que
habrá que&nbsp;evitar.</p>
<p>Si observamos las sucesiones <span class="math">\(P_0\)</span>, <span class="math">\(P_1\)</span>, <span class="math">\(P_2\)</span>,&#8230;,  todo primer elemento de
una sucesión será inferior a cualquier elemento de sucesiones posteriores.
Usando esta propiedad, podemos redefinir nuestra función&nbsp;aplanadora:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">flat</span><span class="p">(</span><span class="n">iterators</span><span class="p">:</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">SortedIterator</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">SortedIterator</span><span class="p">:</span>
    <span class="n">it1</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">iterators</span><span class="p">)</span>
    <span class="k">yield</span> <span class="nb">next</span><span class="p">(</span><span class="n">it1</span><span class="p">)</span>
    <span class="k">yield from</span> <span class="n">zipsort</span><span class="p">(</span><span class="n">it1</span><span class="p">,</span> <span class="n">flat</span><span class="p">(</span><span class="n">iterators</span><span class="p">))</span>

<span class="n">potencias</span> <span class="o">=</span> <span class="n">flat</span><span class="p">(</span><span class="n">potencias_gen</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">count</span><span class="p">())</span>
</code></pre></div>

<p>La función <code>flat</code> devuelve siempre un elemento antes de invocarse por
recursividad, suficiente para frenar la cadena de llamadas recursivas. Visto de
otro modo, se ha convertido en <em>perezosa</em>, devolviendo elementos a medida que
sean necesarios. De todos modos, ya sabemos que el nivel de recursividad está
limitado en python (~3000 niveles en CPython), aunque esperemos no superar este
límite<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>.</p>
<h2>código&nbsp;final</h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Iterator</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">count</span><span class="p">,</span> <span class="n">islice</span><span class="p">,</span> <span class="n">tee</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Generator</span><span class="p">,</span> <span class="n">Protocol</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span> <span class="nn">primes</span> <span class="kn">import</span> <span class="n">primes</span>

<span class="n">SortedIterator</span> <span class="o">=</span> <span class="n">Iterator</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">join</span><span class="p">(</span><span class="n">s1</span><span class="p">:</span> <span class="n">SortedIterator</span><span class="p">,</span> <span class="n">s2</span><span class="p">:</span> <span class="n">SortedIterator</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SortedIterator</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">y</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">x</span>
            <span class="n">x</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">y</span>
            <span class="n">y</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">flat</span><span class="p">(</span><span class="n">it</span><span class="p">:</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">SortedIterator</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">SortedIterator</span><span class="p">:</span>
    <span class="n">s1</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
    <span class="k">yield</span> <span class="nb">next</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span>
    <span class="k">yield from</span> <span class="n">join</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="n">flat</span><span class="p">(</span><span class="n">it</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">mkiter</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
    <span class="k">yield from</span> <span class="p">(</span><span class="n">p</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">**</span> <span class="n">k</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">primes</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">potencias</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">SortedIterator</span><span class="p">:</span>
    <span class="k">yield from</span> <span class="n">flat</span><span class="p">(</span><span class="n">mkiter</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">count</span><span class="p">())</span>
</code></pre></div>

<p>Para las&nbsp;comprobaciones:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">potencias</span><span class="p">(),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">29</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">potencias</span><span class="p">(),</span> <span class="mi">60</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
<span class="mi">241</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">potencias</span><span class="p">(),</span> <span class="mi">10</span> <span class="o">**</span> <span class="mi">6</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
<span class="mi">15476303</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">primes</span><span class="o">.</span><span class="n">size</span>
<span class="mi">999432</span>
</code></pre></div>

<p>Para obtener el elemento <span class="math">\(10⁶\)</span> tarda bastante al necesitar obtener casi un
millón de números primos. Una vez que los ha obtenido, si se vuelve a calcular
tarda mucho&nbsp;menos.</p>
<h2>Resumen</h2>
<hr>
<h2>Serie <em>Evaluación Perezosa en&nbsp;Python</em></h2>
<ul>
<li><a href="https://blog.ch3m4.org/2021/02/08/evaluacion-perezosa-en-python-parte-1/" title="Introducción a la _evaluación perezosa_">Parte 1 - Introducción a la <em>evaluación&nbsp;perezosa</em></a></li>
<li><a href="https://blog.ch3m4.org/2021/02/09/evaluacion-perezosa-en-python-parte-2/" title="Secuencias infinitas">Parte 2 - Secuencias&nbsp;infinitas</a></li>
<li><a href="https://blog.ch3m4.org/2021/02/14/evaluacion-perezosa-en-python-parte-3/" title="Parte 3 - _Memoización_">Parte 3 - <em>Memoización</em></a></li>
<li><a href="https://blog.ch3m4.org/2021/02/15/evaluacion-perezosa-en-python-parte-4/" title="Parte 4 - _Evaluación perezosa_ avanzada">Parte 4 - <em>Evaluación perezosa</em>&nbsp;avanzada</a></li>
<li><a href="https://blog.ch3m4.org/2021/03/07/evaluacion-perezosa-en-python-parte-5/" title="Parte 5 - Formalización de la Secuencia Perezosa">Parte 5 - Formalización de la Secuencia&nbsp;Perezosa</a></li>
<li>Parte 6 - Ejemplo práctico: Potencias de&nbsp;Fermi-Dirac</li>
<li><a href="https://blog.ch3m4.org/2021/03/10/evaluacion-perezosa-en-python-apendice/" title="Apéndice: sobre el tipado de datos utilizado">Apéndice: sobre el tipado de datos&nbsp;utilizado</a></li>
</ul>
<div class="admonition danger">
<p class="admonition-title">La serie unificada como <em>Jupyter Notebook</em>&nbsp;en:</p>
<ul>
<li><a href="https://blog.ch3m4.org/2021/notebook-serie-evaluacion-perezosa-en-python.sync.ipynb" title="Notebook - Evaluación perezosa en python">formato notebook&nbsp;(.ipynb)</a></li>
<li><a href="https://blog.ch3m4.org/2021/notebook-serie-evaluacion-perezosa-en-python.sync.md" title="Jupytext - Evaluación perezosa en python">formato jupytext&nbsp;(.md)</a></li>
</ul>
<p><em><span class="caps">INCOMPLETA</span>&nbsp;TODAVÍA</em></p>
</div>
<hr>
<p><span class="caps">ANOTACIONES</span>:</p>
<div class="footnote">
<hr>
<ol>
<li id="fn:1">
<p>Es posible que en posteriores artículos veamos técnicas para superar las
limitaciones de la recursivad en python.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
  </div>

<ul class="pager">
 </ul>
With category
<a href="https://blog.ch3m4.org/category/python/">Python</a>:
<ul class="pager">
 </ul>

  <div id="article_comments">
    <div id="disqus_thread">
    </div>
  </div>

  <script id="dsq-count-scr" src="https://hyperreals.disqus.com/count.js" async></script>
  <script type="text/javascript">
    var disqus_config = function () {
        this.page.identifier = "drafts/2021-03-07-evaluacion-perezosa-en-python-parte-6.html";
        this.page.title = "Ejemplo práctico. Potencias de Fermi-Dirac - Evaluación perezosa en python - Parte&nbsp;6";
    };
    loadDisqus = function(sitename) {
      var d = document, s = d.createElement('script');
      s.src = 'https://hyperreals.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    };
    loadDisqus();
  </script>
</article>


    <div id="ending_message">
        <p>&copy; Chema Cortés. Built using <a href="http://getpelican.com">Pelican</a>. Theme is <a href="https://github.com/pR0Ps/pelican-subtle">subtle</a> by <a href="http://cmetcalfe.ca">Carey Metcalfe</a>. Based on <a href="https://github.com/giulivo/pelican-svbhack">svbhack</a> by Giulio Fidente.</p>
    </div>
  </main>

  <script type="text/javascript">
    window.addEventListener('load', skipHeader)
  </script>


<script type="text/javascript">window.addEventListener("load", lw_timeago);</script>
</body>
</html>