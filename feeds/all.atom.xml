<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Hyperreals *R</title><link href="https://blog.ch3m4.org/" rel="alternate"></link><link href="https://blog.ch3m4.org/feeds/all.atom.xml" rel="self"></link><id>https://blog.ch3m4.org/</id><updated>2019-09-28T17:56:08+02:00</updated><subtitle>Quarks, bits y otras criaturas infinitesimales</subtitle><entry><title>Manejo de rutas conpathlib</title><link href="https://blog.ch3m4.org/2019/09/28/manejo-de-rutas-pathlib/" rel="alternate"></link><published>2019-09-28T17:53:57+02:00</published><updated>2019-09-28T17:56:08+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2019-09-28:/2019/09/28/manejo-de-rutas-pathlib/</id><summary type="html">&lt;p&gt;Es dif铆cil escribir un script de python que no interaccione con el sistema de ficheros de un modo u otro, por lo que python dispone de varios m贸dulos para tal fin. El objeto &lt;code&gt;Path&lt;/code&gt; viene a poner orden entre tantos m贸dulos y funciones para manejo de ficheros. Se puede decir sin duda que usar &lt;code&gt;Path&lt;/code&gt; se ha convertido en la forma m谩s &lt;em&gt;pyth贸nica&lt;/em&gt; de manipular ficheros y&amp;nbsp;directorios.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Es dif铆cil escribir un script de python que no interaccione con el sistema de ficheros de un modo u otro, por lo que python dispone de varios m贸dulos para tal fin: &lt;code&gt;os&lt;/code&gt;, &lt;code&gt;os.path&lt;/code&gt; (&lt;em&gt;subm贸dulo de os&lt;/em&gt;), &lt;code&gt;shutil&lt;/code&gt;, &lt;code&gt;stats&lt;/code&gt;, &lt;code&gt;glob&lt;/code&gt;,&amp;#8230;En la intenci贸n estaba ser multiplataforma, lo que ha sido fuente de muchos mayores quebraderos de cabeza con las distintas codificaciones de caracteres y distintas formas de expresar rutas de ficheros que&amp;nbsp;existen.&lt;/p&gt;
&lt;p&gt;El objeto &lt;code&gt;Path&lt;/code&gt; viene a poner orden entre tantos m贸dulos y funciones para manejo de ficheros. La librer铆a est谩ndar se ha reescrito para aceptar estos objetos &lt;code&gt;Path&lt;/code&gt;. Se puede decir sin duda que usar &lt;code&gt;Path&lt;/code&gt; se ha convertido en la forma m谩s &lt;em&gt;pyth贸nica&lt;/em&gt; de manipular ficheros y&amp;nbsp;directorios.&lt;/p&gt;
&lt;p&gt;Empecemos por un ejemplo tra铆do de la &lt;a href="https://docs.python.org/3.7/library/pathlib.html" title="Documentaci贸n del m贸dulo pathlib"&gt;documentaci贸n oficial&lt;/a&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;pathlib&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/etc&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;q&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;init.d&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;reboot&amp;#39;&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;q&lt;/span&gt;
&lt;span class="n"&gt;PosixPath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/etc/init.d/reboot&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;q&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;resolve&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;PosixPath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/etc/rc.d/init.d/halt&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Paso por paso: importa el constructor &lt;code&gt;Path&lt;/code&gt; del m贸dulo &lt;code&gt;pathlib&lt;/code&gt;. Con 茅l construye un objeto con la ruta &lt;code&gt;/etc&lt;/code&gt; y, usando el operador &lt;code&gt;/&lt;/code&gt;, genera otro objeto que representa la ruta &lt;code&gt;/etc/init.d/reboot&lt;/code&gt;. Autom谩ticamente, estos objetos se construyen como instancias de &lt;code&gt;PosixPath&lt;/code&gt;, que es una subclase especializada de &lt;code&gt;Path&lt;/code&gt; para manejos de ficheros en sistemas Posix. La ruta &lt;code&gt;/etc/init.d/reboot&lt;/code&gt; apunta a un &lt;em&gt;enlace simb贸lico&lt;/em&gt;, por lo que se usa el m茅todo &lt;code&gt;resolve&lt;/code&gt; para obtener la ruta absoluta del fichero al que&amp;nbsp;apunta.&lt;/p&gt;
&lt;div class="admonition nota"&gt;
&lt;p class="admonition-title"&gt;Nota&lt;/p&gt;
&lt;p&gt;Observa que las operaciones con objetos &lt;em&gt;Path&lt;/em&gt; generan objetos &lt;em&gt;Path&lt;/em&gt; con lo que podemos encadenar operaciones para navegar a trav茅s de una jerarqu铆a de&amp;nbsp;directorios.&lt;/p&gt;
&lt;/div&gt;
&lt;h2&gt;M贸dulos a los que sustituye o no&amp;nbsp;sustituye&lt;/h2&gt;
&lt;p&gt;Obviamtente, el m贸dulo cl谩sico &lt;code&gt;os.path&lt;/code&gt;, utilizado para manipulaci贸n de rutas, es reemplazado totalmente por &lt;code&gt;pathlib&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Del m贸dulo &lt;code&gt;os&lt;/code&gt; reemplaza muchas de sus funciones para manipular ficheros y directorios. A煤n as铆, el m贸dulo &lt;code&gt;os&lt;/code&gt; contiene otras muchas funciones para el manejo de entornos o lanzamiento de procesos que no cambian. As铆 mismo, hay algunas operaciones especializadas con ficheros y directorios (eg: &lt;code&gt;os.walk&lt;/code&gt;) que no han sido reempladas. De hecho son m谩s eficientes que si se hicieran con objetos &lt;code&gt;Path&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Otro m贸dulo que ya no es necesario es &lt;code&gt;glob&lt;/code&gt;, utilizado para buscar ficheros mediante patrones de&amp;nbsp;b煤squeda.&lt;/p&gt;
&lt;h2&gt;Rutas puras y&amp;nbsp;concretas&lt;/h2&gt;
&lt;p&gt;Seg煤n si tienen acceso al sistema de ficheros, podemos distingure&amp;nbsp;entre:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ruta pura: rutas que no requieren acceso al sistema de ficheros (&lt;code&gt;PurePath&lt;/code&gt;, &lt;code&gt;PurePosixPath&lt;/code&gt;, &lt;code&gt;PureWindowsPath&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Ruta concreta: rutas con acceso al sistema de ficheros (&lt;code&gt;Path&lt;/code&gt;, &lt;code&gt;PosixPath&lt;/code&gt;, &lt;code&gt;WindowsPath&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Las &lt;em&gt;rutas puras&lt;/em&gt; son superclases de las &lt;em&gt;rutas concretas&lt;/em&gt;. Mejor verlo gr谩ficamente como jerarqu铆a de&amp;nbsp;clases:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Jerarqu铆a de clases Path" src="/pictures/pathlib-inheritance.png"&gt;&lt;/p&gt;
&lt;h2&gt;Ejemplos&lt;/h2&gt;
&lt;p&gt;Voy a poner algunos ejemplos de uso de &lt;code&gt;pathlib&lt;/code&gt; para que compares con el modo como lo estabas haciendo hasta ahora. Recomiendo revisar la documentaci贸n del m贸dulo &lt;a href="https://docs.python.org/3.7/library/pathlib.html" title="Documentaci贸n del m贸dulo pathlib"&gt;pathlib&lt;/a&gt; ante cualquier&amp;nbsp;duda.&lt;/p&gt;
&lt;p&gt;Para escribir en un fichero, usamos el m茅todo &lt;code&gt;open&lt;/code&gt; de modo similar a como se hac铆a con la funci贸n &lt;code&gt;open&lt;/code&gt; del mismo&amp;nbsp;nombre:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;pathlib&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt;

&lt;span class="n"&gt;path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;.config&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mode&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;w&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;# config goes here&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Si s贸lo vamos a escribir una l铆nea, tambi茅n se podr铆a hacer de un modo m谩s&amp;nbsp;directo:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;.config&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write_text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;# config goes here&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Pongamos un ejemplo m谩s complejo: queremos localizar los scripts de python dentro de la carpeta &lt;code&gt;proyectos&lt;/code&gt; que tengan una frase. Lo habitual para recorrer un directorio era usar alguna funci贸n como &lt;code&gt;os.walk&lt;/code&gt; o &lt;code&gt;os.scandir&lt;/code&gt; para ir navegando a trav茅s de la jerarqu铆a de directorios e ir leyendo los ficheros python hasta localizar los que&amp;nbsp;buscamos.&lt;/p&gt;
&lt;p&gt;Veamos c贸mo se hace con &lt;code&gt;Path&lt;/code&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;pathlib&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt;

&lt;span class="n"&gt;proyectos&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;proyectos&amp;#39;&lt;/span&gt;  &lt;span class="c1"&gt;# carpeta en el directorio HOME&lt;/span&gt;
&lt;span class="n"&gt;palabra&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;pathlib&amp;quot;&lt;/span&gt;

&lt;span class="n"&gt;ficheros&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;proyectos&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rglob&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;*.py&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;palabra&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_text&lt;/span&gt;&lt;span class="p"&gt;()]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Partimos del &lt;code&gt;Path.home()&lt;/code&gt;, el directorio de usuario, y creamos la ruta del directorio &lt;code&gt;proyectos&lt;/code&gt;. Invocando el m茅todo &lt;code&gt;.rglob()&lt;/code&gt; obtenemos, recursivamente, todos los ficheros que cumplan con el patr贸n dado. Bastante&amp;nbsp;simple.&lt;/p&gt;
&lt;p&gt;La lista resultante es una lista de objetos &lt;em&gt;Path&lt;/em&gt;, lo que nos facilita cualquier manipulaci贸n posterior que deseemos hacer sobre estos ficheros. Por ejemplo, vamos a calcular el tama帽o total que&amp;nbsp;ocupan:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;size&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stat&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;st_size&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="n"&gt;ficheros&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Si se prefiere, se puede seguir usando el viejo &lt;code&gt;os.path.getsize&lt;/code&gt;. Ahora tambi茅n acepta objetos &lt;code&gt;Path&lt;/code&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os.path&lt;/span&gt;

&lt;span class="n"&gt;size&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getsize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="n"&gt;ficheros&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</content><category term="Python"></category><category term="python"></category><category term="pathlib"></category></entry><entry><title>Monadas concoco</title><link href="https://blog.ch3m4.org/2019/05/07/monadas-con-coco/" rel="alternate"></link><published>2019-05-07T19:33:19+02:00</published><updated>2019-05-07T19:47:56+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2019-05-07:/2019/05/07/monadas-con-coco/</id><summary type="html">&lt;p&gt;Los iterables han dejado la programaci贸n funcional para ser parte de los lenguajes de programaci贸n modernos. Veremos cu谩les son las implementaciones en python y coconut, y las diferencias entre&amp;nbsp;ellos.&lt;/p&gt;</summary><content type="html">&lt;div class="admonition hint"&gt;
&lt;p class="admonition-title"&gt;ゥ=+&lt;/p&gt;
&lt;/div&gt;
&lt;h2&gt;Iterables&lt;/h2&gt;
&lt;p&gt;Si duda los &lt;strong&gt;Iterables&lt;/strong&gt; es la caracter铆stica de programaci贸n funcional que m谩s se usa en python. Se emplean en las &lt;em&gt;compresiones de listas&lt;/em&gt; y las &lt;em&gt;expresiones generadoras&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Pero veamos algunas&amp;nbsp;definiciones:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Iterable&lt;/strong&gt;: objeto del que se puede recorrer sus elementos en orden, uno a uno. Como ejemplos, est谩n los tipos &lt;code&gt;list&lt;/code&gt;, &lt;code&gt;str&lt;/code&gt;, &lt;code&gt;tuple&lt;/code&gt; y &lt;code&gt;dict&lt;/code&gt;. Lo com煤n es recorrer sus elementos con un bucle &lt;code&gt;for&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Iterador&lt;/strong&gt;: objeto que representa un flujo de datos. Con cada uso, o bien entrega un dato, o bien produce una excepci贸n por quedarse vac铆o. Por dise帽o, un &lt;code&gt;Iterador&lt;/code&gt; deriva de &lt;code&gt;Iterable&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Secuencia&lt;/strong&gt;: &lt;em&gt;iterable&lt;/em&gt; con acceso a la posici贸n de cualquiera de sus elementos y con un tama帽o conocido. Como ejemplos est谩n los tipos &lt;code&gt;list&lt;/code&gt;, &lt;code&gt;str&lt;/code&gt; y &lt;code&gt;tuple&lt;/code&gt;. El tipo &lt;code&gt;dict&lt;/code&gt; tambi茅n funciona como secuencia, pero no se considera como tal al no accederse a sus elementos por posici贸n num茅rica. (Es m谩s considerado como &lt;em&gt;mapping&lt;/em&gt;).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Generador&lt;/strong&gt;: objeto que crea iteradores. Hay &lt;em&gt;funciones generadoras&lt;/em&gt;, que crean un iterador cada vez que se llaman, y &lt;em&gt;expresiones generadoras&lt;/em&gt;, que crean un s贸lo&amp;nbsp;iterador.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;Iteradores&lt;/em&gt; y &lt;em&gt;secuencias&lt;/em&gt; forman el conjunto de los &lt;em&gt;iterables&lt;/em&gt;, y podemos identificarlos estructuralmente de la siguiente&amp;nbsp;manera:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Un &lt;strong&gt;Iterable&lt;/strong&gt; suele tener un m茅todo &lt;code&gt;__iter__&lt;/code&gt; que devuelve un iterador para recorrer en orden todos los&amp;nbsp;elementos.&lt;/li&gt;
&lt;li&gt;Un &lt;strong&gt;Iterador&lt;/strong&gt; tiene un m茅todo &lt;code&gt;__next__&lt;/code&gt; para entregar el siguiente&amp;nbsp;dato.&lt;/li&gt;
&lt;li&gt;Una &lt;strong&gt;Secuencia&lt;/strong&gt; tiene un m茅todo &lt;code&gt;__getitem__&lt;/code&gt;, para acceso a cualquier elemento, y un m茅todo &lt;code&gt;__len__&lt;/code&gt;, para conocer su tama帽o. Adem谩s, pueden tener otros m茅todos como &lt;code&gt;count()&lt;/code&gt;, &lt;code&gt;index()&lt;/code&gt;, &lt;code&gt;__contains__()&lt;/code&gt; y &lt;code&gt;__reversed__()&lt;/code&gt; con los que completar la &lt;em&gt;clase base abstracta&lt;/em&gt; &lt;a href="https://docs.python.org/3.7/library/collections.abc.html#collections.abc.Sequence"&gt;collections.abc.Sequence&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="admonition important"&gt;
&lt;p class="admonition-title"&gt;Importante&lt;/p&gt;
&lt;p&gt;Aunque un &lt;em&gt;Iterable&lt;/em&gt; se suele caracterizar por tener un m茅todo &lt;code&gt;__iter__&lt;/code&gt;, tambi茅n las &lt;em&gt;secuencias&lt;/em&gt; se consideran &lt;em&gt;iterables&lt;/em&gt; aunque no tengan este&amp;nbsp;m茅todo.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Caso pr谩ctico: analicemos un objeto &lt;code&gt;range&lt;/code&gt; (eg: &lt;code&gt;dir(range(10))&lt;/code&gt;):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;tiene el m茅todos &lt;code&gt;__iter__&lt;/code&gt; &amp;#8212;&amp;gt; es un &lt;code&gt;Iterable&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;tiene los m茅todos &lt;code&gt;__getitem__&lt;/code&gt; y &lt;code&gt;__len__&lt;/code&gt; &amp;#8212;&amp;gt; es una &lt;code&gt;Secuencia&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;tiene el resto de m茅todos de &lt;code&gt;collections.abc.Sequence&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;no tiene m茅todo &lt;code&gt;__next__&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Los objeto &lt;code&gt;Range&lt;/code&gt; son &lt;em&gt;secuencias&lt;/em&gt;, no &lt;em&gt;iteradores&lt;/em&gt;. Como secuencia, algunas de la operaciones que permite&amp;nbsp;son:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;troceo: &lt;code&gt;range(100)[4:20] == range(4,20)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;obtener el tama帽o: &lt;code&gt;len(range(100)) == 100&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;chequeos de pertenencia: &lt;code&gt;200 in range(100) == False&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;inversi贸n: &lt;code&gt;range(100)[::-1] == range(99, -1, -1)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Composici贸n de&amp;nbsp;Iteradores&lt;/h2&gt;
&lt;p&gt;Una ventaja de usar iteradores en lugar de listas es que s贸lo necesitan memoria para procesar el elemento que est谩n trabajado, por lo que los hace muy eficientes para procesar grandes cantidades de datos o ficheros enormes que no caben enteros en&amp;nbsp;memoria.&lt;/p&gt;
&lt;p&gt;Por ejemplo, esta expresi贸n&amp;nbsp;generadora:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Como curiosidad, el n煤mero &lt;code&gt;10**100&lt;/code&gt; se llama &lt;a href="https://es.wikipedia.org/wiki/G煤gol"&gt;g煤gol&lt;/a&gt; y es un n煤mero enormemente grande. Crear esto mismo como una lista es imposible con la memoria de los ordenadores actuales y no habr铆a tiempo en este Universo para procesar tal cantidad de&amp;nbsp;elementos.&lt;/p&gt;
&lt;p&gt;Y sin embargo, podemos trabajar con esta expresi贸n sin mayores problemas. Por ejemplo, para obtener los 10 primeros&amp;nbsp;elementos:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;g&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;next&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Incluso podemos usarla como base para crear nuevos&amp;nbsp;iteradores:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Equivalente a&amp;nbsp;hacer:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Componer iteradores es bastante eficiente. Se van recorriendo a medida que sea necesario, sin mantener en memoria nada m谩s que los elementos estrictamente necesarios para devolver el siguiente&amp;nbsp;elemento.&lt;/p&gt;
&lt;h2&gt;map y&amp;nbsp;filter&lt;/h2&gt;
&lt;p&gt;驴Sabes cu谩l es la diferencia entre estas dos&amp;nbsp;expresiones?&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="nb"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Para python, ambas expresiones son equivalentes: iteradores. Pero se considera que tiene m谩s &lt;em&gt;estilo pyth贸nico&lt;/em&gt; el uso de expresiones generadoras, desaconsej谩ndose completamene el uso de las funciones &lt;code&gt;map&lt;/code&gt; y &lt;code&gt;filter&lt;/code&gt; siempre que se&amp;nbsp;pueda.&lt;/p&gt;
&lt;p&gt;Y sin embargo, para &lt;em&gt;coconut&lt;/em&gt; las funciones &lt;code&gt;map&lt;/code&gt; y &lt;code&gt;filter&lt;/code&gt; son fundamentales como tambi茅n lo son en &lt;em&gt;programaci贸n funcional&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;El iterador que se obtiene con la expresi贸n generadora &lt;code&gt;(x**2 for x in range(10*100))&lt;/code&gt; act煤a como si fuera una &lt;em&gt;caja negra&lt;/em&gt;. Se pueden obtener los elemntos uno a uno, pero no ofrece informaci贸n sobre su estructura interna, ni de su tama帽o, ni nada que permita su&amp;nbsp;transfomaci贸n.&lt;/p&gt;
&lt;p&gt;En cambio, el &lt;em&gt;iterador map&lt;/em&gt; en coconut (extensi贸n de la funci贸n &lt;code&gt;map&lt;/code&gt; de python) almacena informaci贸n tanto de la funci贸n como de los iterables a los que se aplica, cosa que hace en los atributos &lt;code&gt;func&lt;/code&gt; y &lt;code&gt;iters&lt;/code&gt;, respectivamente. De este modo, &lt;em&gt;coconut&lt;/em&gt; puede encadenar transformaciones de manera m谩s&amp;nbsp;贸ptima.&lt;/p&gt;
&lt;p&gt;Por ejemplo, para obtener el 煤ltimo elemento del iterador&amp;nbsp;anterior:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;map(x -&amp;gt; x**2, range(10*100))[-1]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Como iterador, deber铆a haber pasado por todos los &lt;code&gt;10**100&lt;/code&gt; elementos hasta llegar al 煤ltimo, cosa que es imposible de hacer en la pr谩ctica. Sin embargo, si se prueba en &lt;em&gt;coconut&lt;/em&gt;, se obtiene el 煤ltimo elemento casi al instante. En realidad, &lt;em&gt;coconut&lt;/em&gt; cortocircuita todo el proceso y salta directamente al 煤ltimo elemento de &lt;code&gt;range(10**100)&lt;/code&gt;, que es el 煤nico que le hace falta. Es como si hubiera aplicado primero el &lt;code&gt;[-1]&lt;/code&gt; al &lt;code&gt;range(10**100)&lt;/code&gt; y luego hubiera aplicado el &lt;code&gt;map&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Este tipo de encapsulado, tanto de un conjunto de datos como de la funci贸n que lo transforma, se conocen por &lt;strong&gt;aplicativo&lt;/strong&gt; (&lt;em&gt;Applicative&lt;/em&gt; en ingl茅s). Y a las transformaciones que podemos encadenar, una tras otra, para diferir el c谩lculo al final del todo se conoce por &lt;strong&gt;m贸nadas&lt;/strong&gt; (&lt;em&gt;Monad&lt;/em&gt; en&amp;nbsp;ingl茅s).&lt;/p&gt;
&lt;p&gt;M谩s adelante veremos una definici贸n matem谩tica formal, pero podemos considerar &lt;strong&gt;monad&lt;/strong&gt; como la &lt;em&gt;herramienta matem谩tica&lt;/em&gt; m谩s poderosa de un programador funcional y, algunas veces, tambi茅n la m谩s&amp;nbsp;incomprensible.&lt;/p&gt;</content><category term="Coconut"></category><category term="coconut"></category><category term="functional-programming"></category><category term="python"></category></entry><entry><title>Coconut - Primerospasos</title><link href="https://blog.ch3m4.org/2019/05/02/coconut-primeros-pasos/" rel="alternate"></link><published>2019-05-02T01:20:16+02:00</published><updated>2019-05-02T23:58:10+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2019-05-02:/2019/05/02/coconut-primeros-pasos/</id><summary type="html">&lt;p&gt;Primera toma de contacto con el lenguaje coconut, su instalaci贸n y detalles a tener en cuenta con la compatibilidad con las versiones de python&amp;nbsp;utilizadas.&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://coconut-lang.org/" title="Coconut language"&gt;Coconut&lt;/a&gt; es un lenguaje funcional completamente &lt;em&gt;pyth贸nico&lt;/em&gt;. Otro modo de hacer las cosas en python. Al principio puede parecer muy distinto, pero a medida que se conoce te das cuenta de lo 煤til que es a veces abordar ciertos problemas desde un punto de vista &lt;em&gt;puramente funcional&lt;/em&gt;.&lt;/p&gt;
&lt;h2&gt;Qu茅 versi贸n de python&amp;nbsp;utilizar&lt;/h2&gt;
&lt;p&gt;Antes de empezar con &lt;em&gt;coconut&lt;/em&gt;, una advertencia sobre las versiones de python. Para su ejecuci贸n, el c贸digo &lt;em&gt;coconut&lt;/em&gt; se traduce en c贸digo python, pudiendo elegir qu茅 versi贸n de python ejecutar谩 el c贸digo final. Se puede elegir &lt;a href="https://coconut.readthedocs.io/en/master/DOCS.html#allowable-targets"&gt;varias versiones de python&lt;/a&gt; objetivo, independientemente de la versi贸n de python con la que estemos trabajando. Por defecto, se genera &lt;em&gt;&amp;#8220;c贸digo universal&amp;#8221;&lt;/em&gt;, v谩lido para todas las versiones de python. Emplear este &lt;em&gt;c贸digo universal&lt;/em&gt; requiere renunciar a algunas caracter铆sticas de &lt;em&gt;python 3&lt;/em&gt; que no tienen equivalencia en &lt;em&gt;python 2&lt;/em&gt; como es la notaci贸n de tipos, el operador &lt;code&gt;'@'&lt;/code&gt; para multiplicaci贸n de matrices o las sentencias &lt;code&gt;async&lt;/code&gt; y &lt;code&gt;await&lt;/code&gt; para programaci贸n&amp;nbsp;as铆ncrona.&lt;/p&gt;
&lt;p&gt;En esta serie de art铆culos sobre &lt;em&gt;coconut&lt;/em&gt; voy a trabajar siempre con una instalaci贸n de &lt;em&gt;python 3&lt;/em&gt;, lo recomendado para nuevos proyectos. As铆 mismo, el c贸digo generado se ejecutar谩 en &lt;em&gt;python 3&lt;/em&gt;. Pero transpilar a &lt;em&gt;c贸digo universal&lt;/em&gt; deber铆a ser igualmente v谩lido en la mayor铆a de casos. Es m谩s, ya que todo c贸digo &lt;em&gt;python 3&lt;/em&gt; es c贸digo v谩lido en &lt;em&gt;coconut&lt;/em&gt;, se podr铆a emplear para convertir c贸digo de &lt;em&gt;python 3&lt;/em&gt; a &lt;em&gt;python 2&lt;/em&gt;, aunque no lo&amp;nbsp;recomiendo.&lt;/p&gt;
&lt;p&gt;En la documentaci贸n tienes &lt;a href="https://coconut.readthedocs.io/en/master/DOCS.html#compatible-python-versions"&gt;informaci贸n sobre compatibilidad&lt;/a&gt; de &lt;em&gt;coconut&lt;/em&gt; con algunas versiones de&amp;nbsp;python.&lt;/p&gt;
&lt;h2&gt;Instalaci贸n de&amp;nbsp;coconut&lt;/h2&gt;
&lt;p&gt;Para instalar &lt;em&gt;coconut&lt;/em&gt; mi forma preferida es usar &lt;code&gt;conda&lt;/code&gt; empleando el canal &lt;code&gt;conda-forge&lt;/code&gt;. Siempre es recomendable crear un entorno virtual donde aislar las dependencias del resto de nuestra instalaci贸n. En concreto, la instalaci贸n de &lt;em&gt;coconut&lt;/em&gt; incluye varios kernels de jupyter y una configuraci贸n de pygments para el coloreado de&amp;nbsp;sint谩xis.&lt;/p&gt;
&lt;p&gt;En particular, prefiero crear un fichero de entorno (&lt;code&gt;environment.yml&lt;/code&gt;) que determine las dependencias, tanto las que instala conda, como las que se necesite instalar con pip. Podr铆amos concretar con precisi贸n las versiones que vamos a usar; pero me voy a limitar a las dependencias m铆nimas para la versi贸n que estoy usando ahora, &lt;em&gt;coconut 1.4.0&lt;/em&gt;.&lt;/p&gt;
&lt;figure class='code'&gt;
&lt;figcaption&gt;&lt;span&gt;Entorno virtual &amp;#8216;coco&amp;#8217;&lt;/span&gt; &lt;a href='/code/2019Q2/environment.yml'&gt;download&lt;/a&gt;&lt;/figcaption&gt;

&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;coco&lt;/span&gt;
&lt;span class="nt"&gt;channels&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;defaults&lt;/span&gt;
  &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;conda-forge&lt;/span&gt;
&lt;span class="nt"&gt;dependencies&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;python=3.6&lt;/span&gt;
  &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;pip&lt;/span&gt;
  &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;coconut&lt;/span&gt;
  &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;mypy&lt;/span&gt;
  &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;pygments&lt;/span&gt;
  &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;jupyter&lt;/span&gt;
  &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;jupyter_console&lt;/span&gt;
  &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;watchdog&lt;/span&gt;
  &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;pyparsing=2.2.0&lt;/span&gt;
  &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="nt"&gt;pip&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;cpyparsing&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;/figure&gt;

&lt;p&gt;Se fija la versi贸n de &lt;code&gt;python=3.6&lt;/code&gt; ya que 茅sta es la versi贸n superior recomendada para &lt;em&gt;coconut&lt;/em&gt;. Posiblemente tambi茅n funcione correctamente con &lt;code&gt;python=3.7&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Entre las dependencias&amp;nbsp;encontramos:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;pygments&lt;/strong&gt;: facilitar谩 el coloreado de sint谩xis de c贸digo &lt;em&gt;coconut&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;watchdog&lt;/strong&gt;: chequea de cambios en ficheros para automatizar&amp;nbsp;recompilaciones&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;pyparsing&lt;/strong&gt;/&lt;strong&gt;cpyparsing&lt;/strong&gt;: &lt;em&gt;parseo&lt;/em&gt; de texto, utilizado por el traspilador y el interface de l铆nea de comandos. Se fija la versi贸n de &lt;code&gt;pyparsing=2.2.0&lt;/code&gt; ya que daba algunos fallos dentro de &lt;code&gt;jupyter console&lt;/code&gt; con versiones superiores&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1"&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;cPyparsing&lt;/code&gt; es una versi贸n optimizada de &lt;code&gt;pyparsing&lt;/code&gt;. Su instalaci贸n necesita los compiladores de C apropiados para la creaci贸n m贸dulos python para el sistema. Con linux, el entorno que uso, no hay problema; pero es posible que en windows d茅 errores por no encontrar el compilador &lt;span class="caps"&gt;MS&lt;/span&gt; C++. Si no sabes c贸mo se instala, siempre puedes quitar &lt;code&gt;cpyparsing&lt;/code&gt; del fichero &lt;code&gt;environment.yml&lt;/code&gt; para que siga usando &lt;code&gt;pyparsing&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Dado que &lt;em&gt;coconut&lt;/em&gt; es un desarrollo muy activo, tambi茅n recomiendo la instalaci贸n de una versi贸n de desarrollo de &lt;em&gt;coconut&lt;/em&gt;. Muchas veces, los problemas encontrados pueden estar resueltos en desarrollo. Pero siempre es interesante probar las novedades que se van a a帽adiendo y nunca est谩 de m谩s animarse a contribuir en posibles&amp;nbsp;mejoras.&lt;/p&gt;
&lt;p&gt;El entorno de desarrollo estar谩 definio&amp;nbsp;as铆:&lt;/p&gt;
&lt;figure class='code'&gt;
&lt;figcaption&gt;&lt;span&gt;Entorno virtual &amp;#8216;cocodev&amp;#8217;&lt;/span&gt; &lt;a href='/code/2019Q2/environment-dev.yml'&gt;download&lt;/a&gt;&lt;/figcaption&gt;

&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;cocodev&lt;/span&gt;
&lt;span class="nt"&gt;channels&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;defaults&lt;/span&gt;
&lt;span class="nt"&gt;dependencies&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;python=3&lt;/span&gt;
  &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;pip&lt;/span&gt;
  &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="nt"&gt;pip&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;coconut-develop[dev]&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;coconut-prelude&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;/figure&gt;

&lt;p&gt;La instalaci贸n de &lt;em&gt;coconut&lt;/em&gt; y sus dependencias para este entorno se delega totalmente en pip. Se a帽ade el m贸dulo &lt;code&gt;coconut-prelude&lt;/code&gt; que nos facilita un mecanismo similar al &lt;code&gt;Prelude&lt;/code&gt; de haskell para tener un entorno configurado con las funciones m谩s habituales en programaci贸n&amp;nbsp;funcional.&lt;/p&gt;
&lt;p&gt;Con estos dos ficheros, se crean los entornos&amp;nbsp;virtuales:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ conda env create -f environment.yml
...
$ conda env create -f environment-dev.yml
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h2&gt;Primer contacto: Hola&amp;nbsp;Mundo&lt;/h2&gt;
&lt;p&gt;Para ejecutar coconut, se debe activar primero el&amp;nbsp;entorno:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ conda activate coco
$ coconut
Coconut Interpreter:
(type &amp;#39;exit()&amp;#39; or press Ctrl-D to end)
&amp;gt;&amp;gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Sale una interface de l铆nea de comando similar a la que tiene python, incluso se puede introducir c贸digo python&amp;nbsp;normal:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; print(&amp;quot;隆Hola, Mundo!&amp;quot;)
隆Hola, Mundo!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;En &lt;em&gt;coconut&lt;/em&gt;, 茅ste ser铆a nuestro &lt;em&gt;&amp;#8220;Hola Mundo&amp;#8221;&lt;/em&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; &amp;quot;隆Hola, Mundo!&amp;quot; |&amp;gt; print
隆Hola, Mundo!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;El operador &lt;code&gt;|&amp;gt;&lt;/code&gt; puede verse como un &lt;em&gt;pipe&lt;/em&gt; que encadena operaciones, una tras otra, que ser谩 de uso com煤n. Se puede describir como una &lt;em&gt;&amp;#8220;aplicaci贸n del resultado de la izquierda en la expresi贸n de la derecha&amp;#8221;&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Por poner ejemplos de aplicaciones en&amp;nbsp;cadena:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; &amp;quot;隆Hola, Mundo!&amp;quot; |&amp;gt; len |&amp;gt; print
13
&amp;gt;&amp;gt;&amp;gt; &amp;quot;隆Hola, Mundo!&amp;quot; |&amp;gt; list |&amp;gt; print
[&amp;#39;隆&amp;#39;, &amp;#39;H&amp;#39;, &amp;#39;o&amp;#39;, &amp;#39;l&amp;#39;, &amp;#39;a&amp;#39;, &amp;#39;,&amp;#39;, &amp;#39; &amp;#39;, &amp;#39;M&amp;#39;, &amp;#39;u&amp;#39;, &amp;#39;n&amp;#39;, &amp;#39;d&amp;#39;, &amp;#39;o&amp;#39;, &amp;#39;!&amp;#39;]
&amp;gt;&amp;gt;&amp;gt; &amp;quot;隆Hola, Mundo!&amp;quot; |&amp;gt; print |&amp;gt; print
隆Hola, Mundo!
None
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Probemos la ejecuci贸n de ficheros. Los ficheros de &lt;em&gt;coconut&lt;/em&gt; tienen por extensi贸n &lt;code&gt;.coco&lt;/code&gt;. Creemos un fichero &lt;code&gt;hola.coco&lt;/code&gt; con una 煤nica&amp;nbsp;l铆nea:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;quot;隆Hola, Mundo!&amp;quot; |&amp;gt; print
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Para&amp;nbsp;ejecutarlo:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ coconut --run hola.coco
Compiling         hola.coco ...
Compiled to       hola.py .
隆Hola, Mundo!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;De la &lt;em&gt;transpilaci贸n&lt;/em&gt; se obtiene el fichero &lt;code&gt;hola.py&lt;/code&gt;, que es el que se usa en la ejecuci贸n. Se podr铆a volver a ejecutar sin intervenci贸n de &lt;em&gt;coconut&lt;/em&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ python hola.py
隆Hola, Mundo!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h2&gt;Factorial en&amp;nbsp;coconut&lt;/h2&gt;
&lt;p&gt;Como obsesi贸n de este blog est谩 la comparaci贸n de formas de hacer el c谩lculo del factorial. Recomiendo seguir el &lt;a href="https://coconut.readthedocs.io/en/master/HELP.html" title="Tutorial de coconut"&gt;tutorial de coconut&lt;/a&gt; donde se detalla, paso a paso, c贸mo ir cambiando la formulaci贸n de factorial desde estructuras imperativas a&amp;nbsp;funcionales.&lt;/p&gt;
&lt;p&gt;Una formulaci贸n simple podr铆a ser&amp;nbsp;esta:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;def product(lst: int[]) -&amp;gt; int = reduce((*), lst)
def factorial(n: int) -&amp;gt; int = range(2, n+1) |&amp;gt; product

10000 |&amp;gt; factorial |&amp;gt; print
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Aunque las veremos con detalle m谩s adelante, aqu铆 adelantamos varias caracter铆sticas de &lt;em&gt;coconut&lt;/em&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Una funci贸n puede devolver una expresi贸n, similar a las funciones &lt;em&gt;lambda&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;La funci贸n &lt;code&gt;reduce&lt;/code&gt; est谩 disponible por defecto (importante en programaci贸n&amp;nbsp;funcional)&lt;/li&gt;
&lt;li&gt;Se usa el operador multiplicaci贸n como &lt;code&gt;(*)&lt;/code&gt; (&lt;em&gt;al estilo haskell&lt;/em&gt;) sin necesidar de importarlo del m贸dulo &lt;code&gt;operator&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Se usa una notaci贸n de tipos extendida con &lt;code&gt;int[]&lt;/code&gt; para hacer referencia a una &lt;em&gt;lista de enteros&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;La &lt;em&gt;notaci贸n de tipos&lt;/em&gt; es en realidad parte de &lt;em&gt;python 3&lt;/em&gt;, lo 煤nico que hace &lt;em&gt;coconut&lt;/em&gt; es facilitar su uso con una notaci贸n&amp;nbsp;extendida.&lt;/p&gt;
&lt;p&gt;Si es la primera vez que ves &lt;em&gt;programaci贸n funcional&lt;/em&gt;, seguramente no entiendas nada. Pronto tendr谩 todo sentido y te empezar谩s a preguntar porqu茅 no la conocistes&amp;nbsp;antes.&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Este problema tambi茅n lo tiene la instalaci贸n de coconut para &lt;strong&gt;python 2&lt;/strong&gt;. En este caso, la simple ejecuci贸n del interface de l铆nea de comando sobra para entrar en un bucle sin fin que agote r谩pidamente la memoria y bloquee todo el equipo. Forzar la versi贸n a &lt;code&gt;pyparsing=2.2.0&lt;/code&gt; solventa el problema.&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</content><category term="Coconut"></category><category term="coconut"></category><category term="functional-programming"></category><category term="python"></category></entry><entry><title>驴Qu茅 es uncoconut?</title><link href="https://blog.ch3m4.org/2019/04/16/que-es-un-coconut/" rel="alternate"></link><published>2019-04-16T00:00:00+02:00</published><updated>2019-04-16T00:51:57+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2019-04-16:/2019/04/16/que-es-un-coconut/</id><summary type="html">&lt;p&gt;Inicio de unos art铆culos dedicados al lenguaje coconut, un lenguaje funcional totalmente &lt;em&gt;pyth贸nico&lt;/em&gt;, y otras novedades para este nuevo reinicio del&amp;nbsp;blog.&lt;/p&gt;</summary><content type="html">&lt;div class="admonition type"&gt;
&lt;p class="admonition-title"&gt;&amp;#8230;and now for something completely&amp;nbsp;different&lt;/p&gt;
&lt;/div&gt;
&lt;h2&gt;Python&amp;nbsp;multiparadigma&lt;/h2&gt;
&lt;p&gt;La primera vez que o铆 hablar de python all铆 por finales del siglo pasado, una cosa que me encant贸 es que se defin铆a como &lt;em&gt;lenguaje multiparadigma&lt;/em&gt; combinandao el clasicismo de los lenguajes imperativos con la novedosa (entonces) &lt;em&gt;orientaci贸n a objetos&lt;/em&gt; y con algunas caracter铆sticas &lt;em&gt;funcionales&lt;/em&gt; a帽adidas que lo hac铆an 煤nico. El tiempo ha ido puliendo el lenguaje y la programaci贸n funcional se ha ido arrinconando hacia algunos m贸dulos o, directamente, han desaparecido. El propio creador del lenguaje, Guido von Rossum, lleg贸 a pensar en &lt;a href="https://www.artima.com/weblogs/viewpost.jsp?thread=98196" title="The fate of reduce() in Python 3000"&gt;eliminar todo rastro&lt;/a&gt;, aunque finalmente s贸lo desterr贸 la funci贸n &lt;code&gt;reduce&lt;/code&gt; al m贸dulo &lt;code&gt;functools&lt;/code&gt; alegando que no era una caracter铆stica que entendiera ni usar un programador&amp;nbsp;python.&lt;/p&gt;
&lt;p&gt;Es una pena. La &lt;em&gt;Programaci贸n Imperativa&lt;/em&gt; impuesta como 煤nico modo de aprender a programar, sin base para cambiar luego hacia los otros dos paradigmas. Cuando se introdujo la &lt;em&gt;Programaci贸n Orientada a Objetos&lt;/em&gt; con los interfaces gr谩ficos, se emple贸 mal. Los objetos fueron tamizados por la programaci贸n imperativa para verse como sacos de procedimientos que compart铆an unas mismas variables de estado. La &lt;em&gt;Programaci贸n Funcional&lt;/em&gt;, a pesar de estar presente desde el principio de la historia de la inform谩tica, a pesar de ser la que m谩s pr贸xima al pensamiento matem谩tico, qued贸 fuera del entendimiento de los&amp;nbsp;programadores.&lt;/p&gt;
&lt;p&gt;Pero la tendencia se est谩 inviertiendo. Hoy en d铆a es imprescidible la ejecuci贸n concurrente, ya sea para aprovechar las CPUs multin煤cleo de nuestros dispositivos, ya sea porque necesitamos atender un alto n煤mero de peticiones concurrentes. La programaci贸n imperativa ya no es apropiada cuando varios hilos de ejecuci贸n se acoplan e interfieren entre s铆 por los mismos recursos. La programaci贸n imperativa se hace menos determinista en estos casos y los fallos son imposibles de repetir de una ejecuci贸n a&amp;nbsp;otra.&lt;/p&gt;
&lt;p&gt;La programaci贸n funcional, dentro de lo complejo que sea de entender sus premisas a un programador tradicional, es la 煤nica que permite razonar l贸gicamente sobre la ejecuci贸n de un programa&amp;nbsp;concurrente.&lt;/p&gt;
&lt;h2&gt;驴Qu茅 es un&amp;nbsp;coconut?&lt;/h2&gt;
&lt;p&gt;Python ha avanzando mucho estos a帽os. Es el principal lenguaje usado en ciencia y ense帽anza. Los &lt;em&gt;makers&lt;/em&gt; lo tienen en sus sistemas empotrados como microbit, raspberries pi y similares. Y pronto completar谩 el hito de abandonar la versi贸n 2 para pasar definitivamente a la versi贸n 3, incluyendo entre sus novedades las instrucciones nuevas para la concurrencia y el&amp;nbsp;multiproceso.&lt;/p&gt;
&lt;p&gt;Para mi gusto, a python le falta un sistema de tipos m谩s potente y tener caracter铆sticas funcionales. Para lo primero, hay avances con el &lt;em&gt;&amp;#8220;tipado gradual&amp;#8221;&lt;/em&gt;, soportado por varios IDEs que ayuda mucho en la codificaci贸n. Para la programaci贸n funcional, python cuenta con algunos m贸dulos como &lt;code&gt;itertools&lt;/code&gt; y &lt;code&gt;functools&lt;/code&gt;, pero no deja de ser algo&amp;nbsp;testimonial.&lt;/p&gt;
&lt;p&gt;Pero he descubierto un nuevo lenguaje funcional &lt;em&gt;pythonico&lt;/em&gt;: &lt;a href="http://coconut-lang.org/" title="Coconut Language"&gt;coconut&lt;/a&gt;. Aunque sigo recomendando empezar a programar con un verdadero lenguaje funcional como haskell para evitar adquirir vicios, con coconut se puede tener lo mejor de los dos mundos sin renunciar a usar&amp;nbsp;python.&lt;/p&gt;
&lt;p&gt;Me he animado a aprender coconut e ir creando peque帽os art铆culos a medida que vaya aprendiendo. Intentar茅 hacer comparaciones con otros lenguajes como haskell, scala o typescript, ya que son los otros lenguajes que estoy empleando frecuentemente, adem谩s de&amp;nbsp;python.&lt;/p&gt;
&lt;p&gt;Sobre el nombre de &lt;em&gt;coconut&lt;/em&gt; para un lenguaje &lt;em&gt;pyth贸nico&lt;/em&gt;, hay que recordar que todo lo relativo a &lt;em&gt;python&lt;/em&gt; proviene de las comedias del grupo humor铆stico &amp;#8220;Monty&amp;nbsp;Python&amp;#8221;:&lt;/p&gt;
&lt;p&gt;&lt;span class="videobox"&gt;
                &lt;iframe width="640" height="390"
                    src='https://www.youtube.com/embed/Fhnjqy8JvEs'
                    frameborder='0' webkitAllowFullScreen mozallowfullscreen
                    allowFullScreen&gt;
                &lt;/iframe&gt;
            &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Pero para los que tenemos ya una edad, &lt;em&gt;coconut&lt;/em&gt; siempre &lt;em&gt;ser谩s t煤&lt;/em&gt;:&lt;/p&gt;
&lt;p&gt;&lt;span class="videobox"&gt;
                &lt;iframe width="640" height="390"
                    src='https://www.youtube.com/embed/xwFp6THEddE'
                    frameborder='0' webkitAllowFullScreen mozallowfullscreen
                    allowFullScreen&gt;
                &lt;/iframe&gt;
            &lt;/span&gt;&lt;/p&gt;</content><category term="Coconut"></category><category term="coconut"></category><category term="functional-programming"></category></entry><entry><title>Factorial en scala enparalelo</title><link href="https://blog.ch3m4.org/2018/07/25/factorial-en-scala-en-paralelo/" rel="alternate"></link><published>2018-07-25T20:49:57+02:00</published><updated>2018-08-14T01:00:09+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2018-07-25:/2018/07/25/factorial-en-scala-en-paralelo/</id><summary type="html">&lt;p&gt;Una nueva versi贸n del factorial en scala, ahora en&amp;nbsp;paralelo&lt;/p&gt;</summary><content type="html">&lt;p&gt;Una obsesi贸n de este blog siempre ha sido crear c谩lculos de la funci贸n &lt;em&gt;factorial&lt;/em&gt; con diversos algoritmos y con cualquier&amp;nbsp;lenguaje.&lt;/p&gt;
&lt;p&gt;Para no perder la costumbre, veamos una de las formas m谩s r谩pidas de calcular un factorial aprovechando las CPUs multicores que equipan los equipos&amp;nbsp;modernos.&lt;/p&gt;
&lt;p&gt;Ten铆amos en scala una definici贸n de este&amp;nbsp;estilo:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="n"&gt;factorial&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;Int&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;BigInt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nc"&gt;BigInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="n"&gt;product&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;El producto de los n煤meros se realiza en secuencia, desde el &lt;code&gt;2&lt;/code&gt; hasta &lt;code&gt;n&lt;/code&gt;. Como variante pod铆amos haber recorrido la secuencia en orden&amp;nbsp;inverso:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="n"&gt;factorial&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;BigInt&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;BigInt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="n"&gt;by&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="n"&gt;product&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Puede pensarse que el orden en el que se multiplican los n煤meros podr铆a influir en el tiempo de c贸mputo, pero las pruebas que he hecho no parece que tenga demasiada influencia. Tal vez resulte ligeramente m谩s costosa en orden&amp;nbsp;inverso.&lt;/p&gt;
&lt;p&gt;Una forma simple que tenemos de acelerar el producto ser铆a convertir la secuencia en una &lt;em&gt;colecci贸n paralela&lt;/em&gt;, algo tan sencillo como invocar el m茅todo &lt;code&gt;.par&lt;/code&gt; de la&amp;nbsp;secuencia:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="n"&gt;factorial&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;Int&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;BigInt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nc"&gt;BigInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="n"&gt;par&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;product&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Ahora el producto se realiza en paralelo, usando todos los &lt;em&gt;cores&lt;/em&gt; disponibles de la &lt;span class="caps"&gt;CPU&lt;/span&gt;. Para n煤meros peque帽os, casi no se nota el incremento de velocidad debido a los cambios de contexto que realiza el c贸mputo. Pero en n煤meros bastantes grandes, la velocidad se multiplica pr谩cticamente por el n煤mero de cores&amp;nbsp;disponibles.&lt;/p&gt;</content><category term="Scala"></category><category term="algorithms"></category><category term="factorial"></category></entry><entry><title>Reinicio2018</title><link href="https://blog.ch3m4.org/2018/07/22/reinicio-2018/" rel="alternate"></link><published>2018-07-22T11:40:51+02:00</published><updated>2018-07-25T20:41:54+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2018-07-22:/2018/07/22/reinicio-2018/</id><summary type="html">&lt;p&gt;Despu茅s de mucho tiempo, vuelvo a escribir en este blog. No ten铆a mucho qu茅 decir, pero es posible que haya llegado el momento de&amp;nbsp;hacerlo.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Hac铆a mucho que no escrib铆a en este blog. La raz贸n principal es que no ten铆a mucho que decir. Lo poco que pod铆a contribuir lo he ido haciendo en otros 谩mbitos de internet y no hab铆a nada m谩s que a帽adir con un m铆nimo&amp;nbsp;inter茅s.&lt;/p&gt;
&lt;p&gt;En este tiempo, he seguido profundizando m谩s en la programaci贸n funcional de la mano de &lt;a href="https://scala-lang.org"&gt;scala&lt;/a&gt; y &lt;a href="https://haskell.org"&gt;haskell&lt;/a&gt;, he mirado novedades en varios lenguajes (&lt;a href="https://python.org"&gt;python&lt;/a&gt;, &lt;a href="https://www.typescriptlang.org/"&gt;typescript&lt;/a&gt;,..) y he probado algunas de las tecnolog铆as m谩s populares en estos momentos (docker, angular, raspberry,&amp;nbsp;etc).&lt;/p&gt;
&lt;p&gt;Sin embargo, sigo notado que se programa desastrosamente para &lt;strong&gt;concurrencia&lt;/strong&gt;. Un programador, adem谩s de saber programar, deber铆a ser capaz de razonar sobre las particularidades del entorno de ejecuci贸n que afectar谩n a su programa. De igual modo que es capaz de usar algoritmos para optimizar el uso de memoria y reducir el consumo de &lt;span class="caps"&gt;CPU&lt;/span&gt;, tambi茅n deber铆a ser capaz de sincronizar los distintos hilos de ejecuci贸n y saber c贸mo crear &lt;em&gt;&amp;#8220;transacciones at贸micas&amp;#8221;&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Sobre todo, algo a tener claro en concurrencia es que &lt;strong&gt;&amp;#8220;&lt;span class="caps"&gt;NO&lt;/span&gt; &lt;span class="caps"&gt;EXISTE&lt;/span&gt; &lt;span class="caps"&gt;UNA&lt;/span&gt; SOLUCIN &lt;span class="caps"&gt;PARA&lt;/span&gt; &lt;span class="caps"&gt;TODO&lt;/span&gt;&amp;#8221;&lt;/strong&gt;. Cada caso tiene una soluci贸n distinta que requerir谩 de estudio previo y una soluci贸n acorde al problema. Y para eso hay que aprender a&amp;nbsp;razonar.&lt;/p&gt;
&lt;div class="admonition info"&gt;
&lt;p&gt;&lt;strong&gt;Si no entiendes el problema, el lenguaje no te dar谩 la&amp;nbsp;soluci贸n&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Personalmente, sigo pensando que deber铆a cambiarse la &lt;em&gt;Ense帽anza Tradicional de la Programaci贸n&lt;/em&gt;. Cambiar lenguajes din谩micos y variables globales por lenguajes funcionales y sistemas de tipos. Aprender nuevos modos de hacer las&amp;nbsp;cosas.&lt;/p&gt;
&lt;p&gt;En&amp;nbsp;definitiva:&lt;/p&gt;
&lt;div class="admonition info"&gt;
&lt;p&gt;&lt;strong&gt;M谩s matem谩ticas y menos&amp;nbsp;ingeniera&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;</content><category term="Pensamientos"></category><category term="concurrency"></category></entry><entry><title>Renacimiento</title><link href="https://blog.ch3m4.org/2016/01/10/renacimiento/" rel="alternate"></link><published>2016-01-10T15:51:06+01:00</published><updated>2016-01-10T15:51:06+01:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2016-01-10:/2016/01/10/renacimiento/</id><summary type="html">&lt;p&gt;Pensamientos de lo hecho estos a帽os y qu茅 espero del&amp;nbsp;futuro&lt;/p&gt;</summary><content type="html">&lt;p&gt;Si eres uno de los pocos seguidores de este blog, habr谩s notado que se migrado a un nuevo servidor y un nuevo &lt;em&gt;framework&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;He tenido el blog bastante abandonado. Podr铆a decirse que no ten铆a nada interesante qu茅 decir en este tiempo, pero la verdad es que  he preferido contar lo poco que ten铆a que contar a trav茅s de &lt;a href="https://twitter.com"&gt;twitter&lt;/a&gt; y otras v铆as&amp;nbsp;alternativas.&lt;/p&gt;
&lt;p&gt;Si esperas que contin煤e con los art铆culos de &lt;a href="http://python.org"&gt;Python&lt;/a&gt;, es posible que no lo haga. ltimamente, estoy bastante defraudado con los programadores que se acercan a este lenguaje. Puede que sea por haberse convertido en un lenguaje tan popular, algo que siempre es bueno. Pero echo mucho de menos el &lt;em&gt;&amp;#8220;modo pyth贸nico&amp;#8221;&lt;/em&gt; que influ铆a en todo lo que se hac铆a para este lenguaje en sus principios. Ahora parece como que haya que programar para que lo entiendan incluso los que no saben python. Se evitan usar compresiones de listas o expresiones generadoras porque son t茅cnicas demasiado avanzadas, y las novedades que introduce python3 parece como que haya que evitarlas. Me parece &lt;em&gt;simplemente absurdo&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Creo que python es un lenguaje genial para &lt;em&gt;scripting&lt;/em&gt;, con 谩mbitos de aplicaci贸n que abarcan desde gesti贸n de sistemas a aplicaciones cient铆ficas. &lt;em&gt;Un lenguaje para gobernarlos a todos&lt;/em&gt;. Pero necesita evolucionar, y necesita un mejor sistema de tipos. El &lt;em&gt;tipado gradual&lt;/em&gt; es imprescindible y deber铆a ser aceptado por la comunidad de programadores python cuanto antes (tema que espero tratar en alg煤n pr贸ximo&amp;nbsp;art铆culo).&lt;/p&gt;
&lt;p&gt;Sigo usando mucho python. De hecho, este blog est谩 ahora creado con &lt;a href="http://getpelican.com/"&gt;pelican&lt;/a&gt;, un generador est谩tico de p谩ginas html. Tambi茅n me ayudo de varias herramientas python en tareas tales como el &lt;em&gt;push&lt;/em&gt; al repositorio de github donde alojo ahora el blog (posiblemente, tambi茅n sea objeto de un nuevo art铆culo c贸mo lo hago). Por si fuera poco, tambi茅n uso &lt;a href="https://wiki.gnome.org/Apps/Gedit/" title="Gnome Editor"&gt;gedit&lt;/a&gt; para editar el texto, donde estoy incorporado algunos &lt;em&gt;snippets&lt;/em&gt; en python para dar formato al texto &lt;em&gt;markdown&lt;/em&gt; (vale, tomo nota para otro&amp;nbsp;art铆culo).&lt;/p&gt;
&lt;p&gt;Este 煤ltimo a帽o, creo que el lenguaje en el que m谩s he programado ha sido &lt;a href="https://www.haskell.org/"&gt;haskell&lt;/a&gt;. Aunque ya muchos a帽os, es en estos momentos cuando se est谩 produciendo un autentico &lt;em&gt;&amp;#8220;Renacimento&amp;#8221;&lt;/em&gt; de este lenguaje. De modo similar al periodo hist贸rico, est谩n surgiendo alrededor de este lenguaje verdaderos &lt;em&gt;hombres del renacimiento&lt;/em&gt; que combinan disciplinas tales como Matem谩ticas, Filosof铆a y Ciencias &lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1"&gt;1&lt;/a&gt;&lt;/sup&gt;. Una aut茅ntica 谩gora virtual de pensadores alrededor de la programaci贸n abstracta que no deber铆a perderse nadie interesado en estos&amp;nbsp;temas.&lt;/p&gt;
&lt;p&gt;La verdad es que la vejez de haskell se nota en algunos problemas de dependencias entre m贸dulos y la carencia de herramientas de desarrollo modernas. Se est谩 trabajando mucho en hacer de haskell una herramienta con suficiente &lt;em&gt;&amp;#8220;calidad industrial&amp;#8221;&lt;/em&gt; como para ser alternativa empresarial a cualquier otro lenguaje de programaci贸n &lt;sup id="fnref:2"&gt;&lt;a class="footnote-ref" href="#fn:2"&gt;2&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;A煤n con todo, sigo programando en &lt;a href="http://scala-lang.org/"&gt;scala&lt;/a&gt;. Es el lenguaje con el que me siento m谩s c贸modo. Este 煤ltimo a帽o ha estado marcado por la popularizaci贸n del &lt;abbr title="compilador c贸digo fuente a c贸digo fuente"&gt;transpiler&lt;/abbr&gt; &lt;a href="http://www.scala-js.org/"&gt;scala.js&lt;/a&gt; para javascript, algo que est谩 atrayendo m谩s desarrolladores a scala que su contraparte para &lt;abbr title="Java Virtual Machine"&gt;&lt;span class="caps"&gt;JVM&lt;/span&gt;&lt;/abbr&gt;. Tengo intenci贸n de realizar algunos desarrollos para Angular o React con scala.js y pronto podr茅 contar algunas cosas&amp;nbsp;m谩s.&lt;/p&gt;
&lt;p&gt;Tambi茅n este 煤ltimo a帽o he estado usando bastante &lt;a href="https://github.com/alexarchambault/jupyter-scala"&gt;jupyter-scala&lt;/a&gt;, un kernel scala para el &lt;a href="http://jupyter.org/"&gt;jupyter-notebook&lt;/a&gt;, para la realizaci贸n de diversos ejercicios de bioinform谩tica. Toda una gozada de usar y, sobre todo, de tener documentados todos los pasos que iba dando. Si os interesa la bioinform谩tica, os recomiendo la serie &lt;span class="caps"&gt;MOOC&lt;/span&gt; sobre &lt;a href="https://www.coursera.org/specializations/bioinformatics"&gt;bioinform谩tica&lt;/a&gt; de la UCSanDiego, unos cursos pr谩cticos donde se combina la algor铆tmica con los distintos descubrimientos que se han ido produciendo en biolog铆a gen茅tica. &lt;em&gt;Clases magistrales de hacking del bueno&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Pero si hay algo que me sigue entusiasmando de scala es la gran cantidad de avances t茅cnicos que tiene. El compilador de scala es, en mi opini贸n, uno de los mejores que existe. Innovaciones como &lt;em&gt;&amp;#8220;macros&amp;#8221;&lt;/em&gt;, programaci贸n gen茅rica con &lt;a href="http://typelevel.org/"&gt;shapeless&lt;/a&gt;, las &lt;a href="http://akka.io/"&gt;akka-streams&lt;/a&gt; para microservicios o la reciente &lt;a href="http://rapture.io/"&gt;rapture.io&lt;/a&gt;, con una &lt;span class="caps"&gt;API&lt;/span&gt; magistralmente dise帽ada, da idea del dinamismo que tiene este lenguaje. Algo que cuesta ver en otros&amp;nbsp;lenguajes.&lt;/p&gt;
&lt;p&gt;En fin. Espero poner en claro mucho de lo dicho aqu铆. Tambi茅n espero que mis nuevas entradas en el blog sean m谩s frecuente. Hasta&amp;nbsp;pronto.&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Sin menoscabo de otras expresiones art铆sticas como &lt;a href="http://haskell.cs.yale.edu/?post_type=publication&amp;amp;p=112"&gt;The Haskell School of Music&lt;/a&gt;.&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;Una de la empresas que m谩s est谩 dinamizando haskell es &lt;a href="https://www.fpcomplete.com/"&gt;FPComplete&lt;/a&gt;, introduciendo haskell en los desarrollos para las grandes empresas.&amp;#160;&lt;a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</content><category term="Pensamientos"></category><category term="python"></category><category term="haskell"></category><category term="scala"></category></entry><entry><title>Python Eficiente - Sobre la vida de losobjetos</title><link href="https://blog.ch3m4.org/2013/11/09/python-eficiente-sobre-la-vida-de-los-objetos/" rel="alternate"></link><published>2013-11-09T09:56:00+01:00</published><updated>2013-11-09T09:56:00+01:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2013-11-09:/2013/11/09/python-eficiente-sobre-la-vida-de-los-objetos/</id><summary type="html">&lt;p&gt;Antes de seguir adelante, necesitamos aclarar qu茅 les pasa a los objetos que creamos en una aplicaci贸n. Cu谩ndo se crean, d贸nde se almacenan y c贸mo se destruyen. En definitiva, necesitamos conocer mejor la &lt;em&gt;vida de los objetos&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;El t茅rmino de &lt;strong&gt;variable&lt;/strong&gt; que usamos en programaci贸n tiene su origen en el &lt;/p&gt;</summary><content type="html">&lt;p&gt;Antes de seguir adelante, necesitamos aclarar qu茅 les pasa a los objetos que creamos en una aplicaci贸n. Cu谩ndo se crean, d贸nde se almacenan y c贸mo se destruyen. En definitiva, necesitamos conocer mejor la &lt;em&gt;vida de los objetos&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;El t茅rmino de &lt;strong&gt;variable&lt;/strong&gt; que usamos en programaci贸n tiene su origen en el lgebra Matem谩tica. Una variable representa cada uno de los &lt;em&gt;grados de libertad&lt;/em&gt; que tenemos, de forma que cambiando su valor obtendr铆amos diferentes resultados de una&amp;nbsp;expresi贸n.&lt;/p&gt;
&lt;p&gt;Los primeros &lt;em&gt;lenguajes imperativos&lt;/em&gt;, sobre todo &lt;span class="caps"&gt;BASIC&lt;/span&gt;, definieron las &lt;em&gt;variables&lt;/em&gt; como espacios de memoria donde almacenar los distintos valores que necesitaba la &lt;em&gt;&lt;span class="caps"&gt;CPU&lt;/span&gt;&lt;/em&gt; en sus operaciones. Cada variable se &lt;em&gt;marcaba&lt;/em&gt; con un nombre 煤nico y se le asignaba un espacio en memoria. Con el fin de reducir el consumo de memoria, estas variables eran reutilizadas una y otra vez a lo largo del&amp;nbsp;programa.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Variables de memoria" src="https://blog.ch3m4.org/pictures/memvar.jpg"&gt;&lt;/p&gt;
&lt;p&gt;Con los lenguajes procedurales y lenguajes orientados a objetos se cambi贸 este concepto. Los nombres de variables ya no eran 煤nicos. Dos variables pod铆an tener el mismo nombre en distintos 谩mbitos (&lt;em&gt;scopes&lt;/em&gt;), as铆 como dos variables pod铆an representar el mismo dato. El nombre de la variable dej贸 de representar el espacio f铆sico en memoria para convertirse en un alias con el que nombrar a la variable. El proceso de enlazar un nombre con un valor se llam贸 &lt;em&gt;binding&lt;/em&gt; (&lt;em&gt;enlace&lt;/em&gt;) y se hizo fundamental para el funcionamiento de las &lt;em&gt;clausuras&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Se puede definir una variable como la &lt;strong&gt;&lt;em&gt;&amp;#8220;uni贸n de un nombre y un valor a trav茅s de un enlace&amp;#8221;&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Enlaces de nombres y objetos" src="https://blog.ch3m4.org/pictures/etiquetas.jpg"&gt;&lt;/p&gt;
&lt;p&gt;Con este punto de vista, cuando hablamos de &lt;em&gt;&amp;#8220;modificar&amp;#8221;&lt;/em&gt; una variable tenemos dos modos de&amp;nbsp;hacerlo:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Modificando el &lt;em&gt;valor&lt;/em&gt; al que&amp;nbsp;apunta&lt;/li&gt;
&lt;li&gt;Modificando el &lt;em&gt;enlace&lt;/em&gt; para apunte a otro&amp;nbsp;valor&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Nosotros no sabemos, en realidad, c贸mo se modifican las variables. Lo 煤nico que nos tiene que importar es que nuestra variable modificada apuntar谩 al nuevo valor. As铆 pues, cuando tenemos un&amp;nbsp;c贸digo:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;
&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Seguimos diciendo que &lt;em&gt;&amp;#8220;a la variable X le asignamos el valor entero 12&amp;#8221;&lt;/em&gt;, pero lo correcto ser铆a decir que &lt;em&gt;&amp;#8220;al entero 12 lo llamaremos X&amp;#8221;&lt;/em&gt;. Y en lugar de decir que &lt;em&gt;&amp;#8220;a la variable Y le asignamos la variable X&amp;#8221;&lt;/em&gt;, lo correcto ser铆a decir que &lt;em&gt;&amp;#8220;la variable X tambi茅n se va a llamar Y&amp;#8221;&lt;/em&gt;. Pero la costumbre pesa m谩s que la&amp;nbsp;correcci贸n.&lt;/p&gt;
&lt;p&gt;Pensando en un lenguaje de programaci贸n como Python, donde todo son objetos, podemos ver nuestro entorno como un gran &lt;em&gt;ecosistema&lt;/em&gt; poblado de objetos de todo tipo, que se crean, interaccionan y se destruyen. Al principio de una aplicaci贸n, s贸lo contamos con acceso a unos pocos objetos y nos las tenemos que apa帽ar para acceder al resto de objetos a trav茅s de operaciones y llamadas a los distintos m贸dulos disponibles. Nuestro espacio de nombres inicial se ir谩 expandiendo progresivamente con las referencias de los objetos de nuestro mundo&amp;nbsp;conocido.&lt;/p&gt;
&lt;h2&gt;Ciclo de la vida de un&amp;nbsp;objeto&lt;/h2&gt;
&lt;p&gt;Lo primero que hay que tener claro es que en python no tenemos verdadero control sobre la &lt;strong&gt;creaci贸n&lt;/strong&gt; y &lt;strong&gt;destrucci贸n&lt;/strong&gt; de los objetos. S贸lo podemos asegurar que un objeto &lt;strong&gt;existe mientras haya una referencia que lo enlace&lt;/strong&gt;. Para saber qu茅 pasa, tendremos que indagar en el funcionamiento del int茅rprete&amp;nbsp;python.&lt;/p&gt;
&lt;h3&gt;Objetos&amp;nbsp;b谩sicos&lt;/h3&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;En esta expresi贸n, el int茅rprete emplea dos objetos existentes, &amp;#8216;&lt;code&gt;2&lt;/code&gt;&lt;span class="quo"&gt;&amp;#8216;&lt;/span&gt; y &amp;#8216;&lt;code&gt;3&lt;/code&gt;&lt;span class="quo"&gt;&amp;#8216;&lt;/span&gt;, y obtiene un tercer objeto, &amp;#8216;&lt;code&gt;5&lt;/code&gt;&lt;span class="quo"&gt;&amp;#8216;&lt;/span&gt;, al que asigna el nombre de &amp;#8216;&lt;code&gt;x&lt;/code&gt;&lt;span class="quo"&gt;&amp;#8216;&lt;/span&gt;. El objeto &amp;#8216;&lt;code&gt;5&lt;/code&gt;&lt;span class="quo"&gt;&amp;#8216;&lt;/span&gt; no sabemos si lo ha creado en el momento de evaluar la expresi贸n o si ya&amp;nbsp;exist铆a.&lt;/p&gt;
&lt;p&gt;Como optimizaci贸n del int茅rprete, siempre est谩n creados un conjunto de los objetos m谩s comunes. Estos objetos son los n煤meros enteros desde -5 a 256 (incluido el 0), los booleanos &lt;code&gt;True&lt;/code&gt; y &lt;code&gt;False&lt;/code&gt;, &lt;code&gt;None&lt;/code&gt; y los conjuntos vac铆os inmutables &lt;code&gt;()&lt;/code&gt;, &lt;code&gt;frozenset()&lt;/code&gt; y &lt;code&gt;""&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Para saber si dos objetos son el mismo, podemos usar la funci贸n &lt;code&gt;id&lt;/code&gt;. Podemos decir que dos objetos son el mismo si la funci贸n &lt;code&gt;id&lt;/code&gt; devuelve el mismo valor. As铆, podr铆amos obtener f谩cilmente la lista de los n煤meros enteros que siempre tiene creados el&amp;nbsp;int茅rprete:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;zip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h3&gt;Internalizaci贸n de&amp;nbsp;cadenas&lt;/h3&gt;
&lt;p&gt;M谩s curiosas resultan las &lt;em&gt;&amp;#8220;internalizaciones&amp;#8221;&lt;/em&gt; de las cadenas de caracteres. Para acelerar las b煤squedas, el int茅rprete mantiene una tabla global interna con las palabras usadas en nombres de variables, funciones, m贸dulos, etc. Adicionalmente, toda cadena de caracteres que usemos que cumpla con las reglas sint谩cticas para ser nombres de variables acabar谩n autom谩camente dentro de esta tabla&amp;nbsp;interna.&lt;/p&gt;
&lt;p&gt;Adem谩s de este funcionamiento autom谩tico, podemos forzar a que una cadena entre en esta tabla con la funci贸n &lt;code&gt;intern&lt;/code&gt; (&lt;code&gt;sys.intern&lt;/code&gt; en&amp;nbsp;python3).&lt;/p&gt;
&lt;p&gt;Pues bien, todas las cadenas de caracteres de la tabla interna s贸lo son creadas una vez durante toda la ejecuci贸n del programa y permacer谩n ah铆 hasta el&amp;nbsp;final.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;hola&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;hola&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kc"&gt;True&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;hola mundo&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;hola mundo&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kc"&gt;False&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;intern&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;hola mundo&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;intern&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;hola mundo&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kc"&gt;True&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;No siempre funciona el mecanismo de &lt;em&gt;internalizaci贸n&lt;/em&gt; y el int茅rprete crea una nueva cadena de&amp;nbsp;caracteres:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;hola&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;HOLA&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lower&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kc"&gt;False&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;intern&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;HOLA&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lower&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kc"&gt;True&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Por culpa de la &lt;em&gt;internalizaci贸n&lt;/em&gt; nunca podremos estar seguros de cu谩ndo se crea una cadena de caracteres. M谩s all谩 de este hecho, nunca nos deber铆a preocupar el internalizar o no las cadenas de caracteres que usemos. Al menos, yo no he encontrado ninguna ventaja concreta de&amp;nbsp;hacerlo.&lt;/p&gt;
&lt;h3&gt;Asignaciones&lt;/h3&gt;
&lt;p&gt;Ya hemos comentado que una asignaci贸n directa no crea un objeto nuevo, si no que enlaza una nueva etiqueta con el objeto&amp;nbsp;existente:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;En este caso, el mismo objeto al que apunta &amp;#8216;&lt;code&gt;y&lt;/code&gt;&lt;span class="quo"&gt;&amp;#8216;&lt;/span&gt; tambi茅n ser谩 al que apunte &amp;#8216;&lt;code&gt;x&lt;/code&gt;&lt;span class="quo"&gt;&amp;#8216;&lt;/span&gt;. Muchas veces no querremos que esto ocurra, sobre todo en el caso de listas. El truco consiste en convertir la asignaci贸n directa en una expresi贸n que cree un nuevo objeto, pero de igual valor. Para ello usaremos las operaciones &lt;strong&gt;idempotentes&lt;/strong&gt; para cada tipo de&amp;nbsp;dato:&lt;/p&gt;
&lt;p&gt;Para n煤meros en general, podemos usar los elementos neutros de las operaciones &lt;code&gt;y*1&lt;/code&gt; 贸 &lt;code&gt;y+0&lt;/code&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;2.0&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kc"&gt;True&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kc"&gt;False&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;
&lt;span class="kc"&gt;True&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;En el caso de listas, por convenio se suele usar el operador &lt;em&gt;split&lt;/em&gt; &lt;code&gt;lista[:]&lt;/code&gt;, pero podr铆amos usar cualquier otro como &lt;code&gt;lista*1&lt;/code&gt; o &lt;code&gt;lista+[]&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;Destrucci贸n de un&amp;nbsp;objeto&lt;/h3&gt;
&lt;p&gt;Saber cu谩ndo acaba la vida de un objeto suele ser la parte que m谩s despista a quienes vienen a python desde otros lenguajes donde se acostumbra a hacer desaparecer un objeto por la&amp;nbsp;fuerza.&lt;/p&gt;
&lt;p&gt;Una vez m谩s: en python, &lt;strong&gt;un objeto existe mientras est茅 referenciado&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;S贸lo cuando desaparezca la 煤ltima referencia al objeto se llamar谩 a su &lt;em&gt;destructor&lt;/em&gt; (m茅todo &lt;code&gt;__del__&lt;/code&gt;) y ser谩 eliminado de&amp;nbsp;memoria.&lt;/p&gt;
&lt;p&gt;No nos preocupamos de ello, pero cuando finaliza la ejecuci贸n de una funci贸n o de un m茅todo, desaparecen todas las referencias que hab铆amos creado. No hace falta que lo hagamos expl铆citamente. Todos los objetos creados durante la ejecuci贸n dejan de estar referenciados y ser谩n destruidos, con excepci贸n de aquellos que se retornen como&amp;nbsp;resultado.&lt;/p&gt;
&lt;p&gt;Pero hay veces que guardamos referencias a objetos que ya no nos hacen falta, y no somos muy conscientes de que por culpa de estas referencias estos objetos no son destru铆dos. Por ejemplo, es frecuente ver aplicaciones que mantienen una lista de ventanas abiertas. Por culpa de esta lista, las ventanas siempre estar谩n referencias. Si en el destructor estaba el c贸digo para eliminar la ventana y sus componentes, resulta que nunca ser谩 llamado. Hace falta eliminar la referencia de la lista de ventanas para que la ventana sea destruida&amp;nbsp;finalmente.&lt;/p&gt;
&lt;p&gt;En pr贸ximos art铆culos veremos t茅cnicas mejores, como son usar &lt;em&gt;&amp;#8220;referencias d茅biles&amp;#8221;&lt;/em&gt; (&lt;em&gt;weakrefs&lt;/em&gt;). Las &lt;em&gt;weakrefs&lt;/em&gt; vienen a ser referencias a objetos que no obligan a que el objeto est茅 siempre vivo. Si todas las referencias un objeto son &lt;em&gt;weakrefs&lt;/em&gt;, entonces el objeto podr谩 ser&amp;nbsp;destru铆do.&lt;/p&gt;
&lt;h3&gt;Referencias&amp;nbsp;circulares&lt;/h3&gt;
&lt;p&gt;Algunas veces, los objetos mantienen referencias entre ellos conocidas por &lt;em&gt;&amp;#8220;referencias circulares&amp;#8221;&lt;/em&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;
&lt;span class="p"&gt;[[[&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;]]]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;De querer eliminar ambos objetos, no podr铆amos hacer nada al estar referenciados mutuamente. Para estos casos, el int茅rprete de python tiene un proceso propio que se dedica a detectar estas referencias circulares llamado &lt;strong&gt;&amp;#8220;Recolector de Basura&amp;#8221;&lt;/strong&gt;, m谩s conocido por sus siglas &lt;em&gt;&lt;span class="caps"&gt;GC&lt;/span&gt;&lt;/em&gt; (&lt;em&gt;Garbage Collector&lt;/em&gt;). &lt;span class="caps"&gt;GC&lt;/span&gt; es un proceso que est谩 permanentemente explorando la memoria para mantenerla limpia de objetos innecesarios, siendo parte vital para el correcto funcionamiento del int茅rprete. (M谩s informaci贸n, en la documentaci贸n del &lt;a href="http://docs.python.org/2.7/library/gc.html" title="M贸dulo gc"&gt;m贸dulo &lt;code&gt;gc&lt;/code&gt;&lt;/a&gt;).&lt;/p&gt;</content><category term="Python"></category><category term="oop"></category></entry><entry><title>Python Eficiente - Hacia la programaci贸nfuncional</title><link href="https://blog.ch3m4.org/2013/10/26/python-eficiente-hacia-la-programacion-funcional/" rel="alternate"></link><published>2013-10-26T13:03:00+02:00</published><updated>2013-10-26T13:03:00+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2013-10-26:/2013/10/26/python-eficiente-hacia-la-programacion-funcional/</id><summary type="html">&lt;p&gt;Existen muchas definiciones de &lt;strong&gt;Programaci贸n Funcional&lt;/strong&gt;, as铆 como comparativas con otros &lt;em&gt;paradigmas&lt;/em&gt; de la programaci贸n que m谩s parece una cuesti贸n de gustos que una visi贸n razonada de ventajas e incovenientes. No voy a entrar en definiciones tediosas que necesitan demasiadas explicaciones. Prefiero verlo m谩s como si se tratara de una &lt;/p&gt;</summary><content type="html">&lt;p&gt;Existen muchas definiciones de &lt;strong&gt;Programaci贸n Funcional&lt;/strong&gt;, as铆 como comparativas con otros &lt;em&gt;paradigmas&lt;/em&gt; de la programaci贸n que m谩s parece una cuesti贸n de gustos que una visi贸n razonada de ventajas e incovenientes. No voy a entrar en definiciones tediosas que necesitan demasiadas explicaciones. Prefiero verlo m谩s como si se tratara de una confrontaci贸n entre ingenieros y&amp;nbsp;matem谩ticos.&lt;/p&gt;
&lt;p&gt;Un ingeniero piensa m谩s en n煤meros que hay que traer de una zona de memoria, operar con ellos y luego almacenar hasta la siguiente operaci贸n. Un matem谩tico es m谩s de dejar las operaciones para el final. Asigna a cada n煤mero una letra, al resultado lo llama &lt;em&gt;incognita&lt;/em&gt;, e intenta operar algebraicamente. As铆, a &lt;em&gt;grosso modo&lt;/em&gt;, estar铆amos hablando de &lt;em&gt;programaci贸n imperativa&lt;/em&gt; versus &lt;em&gt;programaci贸n funcional&lt;/em&gt;,&amp;nbsp;respectivamente.&lt;/p&gt;
&lt;p&gt;Para lo que nos interesa en python, la visi贸n de retrasar las operaciones hasta el final es la caracter铆stica de la programaci贸n funcional que m谩s nos puede interesar. Nos va a permitir crear c贸digo m谩s eficiente, adem谩s de enfocar algunos problemas desde un punto completamente diferente, m谩s &lt;em&gt;matem谩tico&lt;/em&gt; si&amp;nbsp;cabe.&lt;/p&gt;
&lt;p&gt;Podr铆a haber llamado a esta serie de art铆culos &lt;em&gt;&amp;#8220;Python Funcional&amp;#8221;&lt;/em&gt;, pero es casi seguro que mucha gente hubiera pasado de ellos por considerar esta tem谩tica un rollazo, radicalmente distinta de c贸mo se ense帽a la programaci贸n hoy en d铆a (a mi juicio,&amp;nbsp;equivocada).&lt;/p&gt;
&lt;p&gt;En cambio, llam谩ndolos &lt;em&gt;&amp;#8220;Python Eficiente&amp;#8221;&lt;/em&gt; seguro que a m谩s de uno le pica la curiosidad. En realidad, mi objetivo no es s贸lo hablar de programaci贸n funcional. Tambi茅n tratar谩 de crear c贸digo que consuma menos recursos tales como tiempo de &lt;span class="caps"&gt;CPU&lt;/span&gt; o memoria. En definitiva, que problemas que cre铆amos fuera de nuestro alcance, podamos resolverlos con nuestros humildes&amp;nbsp;medios.&lt;/p&gt;
&lt;p&gt;No te pierdas los pr贸ximos&amp;nbsp;art铆culos.&lt;/p&gt;</content><category term="Python"></category><category term="functional programming"></category></entry><entry><title>Clausuras en python - Parte2</title><link href="https://blog.ch3m4.org/2013/10/26/clausuras-en-python-parte-2/" rel="alternate"></link><published>2013-10-26T04:15:00+02:00</published><updated>2013-10-26T04:15:00+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2013-10-26:/2013/10/26/clausuras-en-python-parte-2/</id><summary type="html">&lt;h2&gt;mbitos&amp;nbsp;anidados&lt;/h2&gt;
&lt;p&gt;La importancia de disponer de &lt;em&gt;clausuras&lt;/em&gt; va m谩s all谩 de
saber d贸nde se eval煤a la funci贸n. Si fuera posible encapsular una funci贸n
junto con su propio entorno de ejecuci贸n, podr铆amos conseguir que la funci贸n tenga
&lt;em&gt;&amp;#8220;memoria&amp;#8221;&lt;/em&gt; o, dicho de otro modo, que sea capaz de conservar sus propios &lt;/p&gt;</summary><content type="html">&lt;h2&gt;mbitos&amp;nbsp;anidados&lt;/h2&gt;
&lt;p&gt;La importancia de disponer de &lt;em&gt;clausuras&lt;/em&gt; va m谩s all谩 de
saber d贸nde se eval煤a la funci贸n. Si fuera posible encapsular una funci贸n
junto con su propio entorno de ejecuci贸n, podr铆amos conseguir que la funci贸n tenga
&lt;em&gt;&amp;#8220;memoria&amp;#8221;&lt;/em&gt; o, dicho de otro modo, que sea capaz de conservar sus propios
estados entre llamadas a la funci贸n. Este &lt;em&gt;empaquetado&lt;/em&gt; de funci贸n y
entorno de ejecuci贸n se denomina a veces &lt;strong&gt;clausuras verdaderas&lt;/strong&gt; y
suele ser la principal caracter铆stica de los llamados &lt;em&gt;Lenguajes Funcionales&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;En python podemos crear estas &lt;em&gt;clausuras verdaderas&lt;/em&gt; con *&lt;em&gt;funciones
anidadas&lt;/em&gt;, donde una funci贸n est谩 definida dentro del 谩mbito de la&amp;nbsp;otra.&lt;/p&gt;
&lt;p&gt;Un ejemplo&amp;nbsp;sencillo:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;incr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;aux&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;aux&lt;/span&gt;

&lt;span class="n"&gt;inc5&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;incr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;inc5&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;#--&amp;gt;15&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Como resultado se devuelve la funci贸n &lt;code&gt;aux&lt;/code&gt;, definida dentro del
谩mbito de &lt;code&gt;incr&lt;/code&gt; y que emplea de 茅ste la variable &lt;code&gt;n&lt;/code&gt;. Internamente,
se conserva la referencia a la variable &lt;code&gt;n&lt;/code&gt;, pero no ser谩 accesible
desde fuera de la funci贸n &lt;code&gt;aux&lt;/code&gt;. Hemos podido
empaquetar la funci贸n junto con el entorno donde se&amp;nbsp;defini贸.&lt;/p&gt;
&lt;p&gt;Pongamos otro&amp;nbsp;ejemplo:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;count&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;aux&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
        &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;aux&lt;/span&gt;

&lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;  &lt;span class="c1"&gt;#--&amp;gt; 1&lt;/span&gt;
&lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;  &lt;span class="c1"&gt;#--&amp;gt; 2&lt;/span&gt;
&lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;  &lt;span class="c1"&gt;#--&amp;gt; 3&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Si pruebas este c贸digo te dar谩 error. La funci贸n anidada &lt;code&gt;aux&lt;/code&gt;
intenta modificar la variable &lt;code&gt;num&lt;/code&gt;. Para este caso, la variable se
crea dentro del 谩mbito m谩s interno, en lugar de usar la variable
disponible. Y como se intenta modificar la variable antes de asignarle
un valor, entonces se produce el&amp;nbsp;error.&lt;/p&gt;
&lt;p&gt;Como soluci贸n, podr铆amos hacer la variable &lt;code&gt;num&lt;/code&gt; global para que fuera
accesible por todos los 谩mbitos. Pero esta soluci贸n no es buena ya que
nos abrir铆a el empaquetado. Para python3 podr铆amos declarar la
variable como &lt;code&gt;nonlocal&lt;/code&gt; para que se busque en los 谩mbitos&amp;nbsp;superiores:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;count&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;aux&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
        &lt;span class="k"&gt;nonlocal&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;
        &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;aux&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Como soluci贸n para salir del paso, se puede evitar la reasignaci贸n de
variables. Por ejemplo, usando una&amp;nbsp;lista:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;count&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;aux&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
        &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;aux&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Ya s茅 que no es muy elegante, pero hay otras formas de hacerlo&amp;nbsp;mejor.&lt;/p&gt;
&lt;h2&gt;Generadores&lt;/h2&gt;
&lt;p&gt;Una de las formas m谩s comunes de usar clausuras es a trav茅s de
&lt;strong&gt;generadores&lt;/strong&gt;. B谩sicamente, son funciones que en lugar de usar &lt;code&gt;return&lt;/code&gt;
utilizan &lt;code&gt;yield&lt;/code&gt; para devolver un valor. Entre invocaciones, se conserva
el entorno de ejecuci贸n y contin煤an desde el
punto desde donde estaba. Para el ejemplo&amp;nbsp;anterior:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;count&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
        &lt;span class="k"&gt;yield&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;

&lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="nb"&gt;next&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;#--&amp;gt;1&lt;/span&gt;
&lt;span class="nb"&gt;next&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;#--&amp;gt;2&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h2&gt;Objetos&amp;nbsp;funciones&lt;/h2&gt;
&lt;p&gt;En los ejemplos que hemos visto, podr铆amos tener varias clausuras de
una misma funci贸n. Si hemos hecho bien las tareas, la ejecuci贸n de estas clausuras
son&amp;nbsp;independientes:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;c2&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="nb"&gt;next&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;#--&amp;gt;1&lt;/span&gt;
&lt;span class="nb"&gt;next&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;#--&amp;gt;2&lt;/span&gt;
&lt;span class="nb"&gt;next&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;#--&amp;gt;1&lt;/span&gt;
&lt;span class="nb"&gt;next&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;#--&amp;gt;2&lt;/span&gt;
&lt;span class="nb"&gt;next&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;#--&amp;gt;3&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Con ello es posible establecer una analog铆a con clases y objetos. La definici贸n
de la funci贸n ser铆a la &lt;em&gt;clase&lt;/em&gt; y la clausura la &lt;em&gt;instancia&lt;/em&gt; de la&amp;nbsp;clase.&lt;/p&gt;
&lt;p&gt;驴Y si lo hacemos posible? En python se denominan &lt;em&gt;callables&lt;/em&gt; a todo objeto que
tenga un m茅todo &lt;code&gt;__call__&lt;/code&gt;, comport谩ndose como si fueran
funciones (&lt;em&gt;Functores&lt;/em&gt;). Contruyamos una &lt;em&gt;callable&lt;/em&gt; que funcione como una funci贸n
con&amp;nbsp;clausura:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__call__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt;

&lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Count&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="c1"&gt;#--&amp;gt;1&lt;/span&gt;
&lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="c1"&gt;#--&amp;gt;2&lt;/span&gt;
&lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="c1"&gt;#--&amp;gt;3&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Sin duda es la manera m谩s elegante de usar clausuras que tenemos en
python. Evita muchos problemas y nos da una gran potencia a la hora de
resolver algunos&amp;nbsp;problemas.&lt;/p&gt;
&lt;p&gt;Por ejemplo: imagina que queremos recorrer una lista de n煤meros,
excluyendo los que sean pares, y siempre que la suma total de los
n煤meros que ya hemos visitado no supere cierto&amp;nbsp;l铆mite.&lt;/p&gt;
&lt;p&gt;En una primera aproximaci贸n se podr铆a crear un&amp;nbsp;generador:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;recorr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lista&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;maximo&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;total&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;lista&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;maximo&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;total&lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;
                &lt;span class="k"&gt;yield&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;
            &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;

&lt;span class="n"&gt;recorr&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;#--&amp;gt;[3,7,11]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Est谩 bien, pero no es f谩cil de usar. Aunque s贸lo necesitemos algunos
elementos, seguramente estemos obligados a crear una lista completa
con todos los valores&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1"&gt;1&lt;/a&gt;&lt;/sup&gt;. Encima, no tenemos acceso a la variable &lt;code&gt;total&lt;/code&gt;
para saber cu谩nto han sumado el&amp;nbsp;resultado.&lt;/p&gt;
&lt;p&gt;Una alternativa con objetos funciones, mucho m谩s&amp;nbsp;elegante:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;RecorrFunc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;maximo&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;maximo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;maximo&lt;/span&gt;
    &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;total&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;total&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;maximo&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;total&lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__call__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lista&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;lista&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;

&lt;span class="n"&gt;recorr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;RecorrFunc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;recorr&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="c1"&gt;#--&amp;gt;[3,7,11]&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;recorr&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="c1"&gt;#--&amp;gt;21&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Las posibilidades de los objetos funci贸n son muchas. Del mismo modo que se devuelve una lista, 
ser铆a posible devolver un iterador. Empleando las funciones del m贸dulo
 &lt;code&gt;itertools&lt;/code&gt;, y algunos trucos m谩s, podr铆amos aplicar los principios de
 la programaci贸n funcional en python sin&amp;nbsp;problemas.&lt;/p&gt;
&lt;p&gt;Pero 茅so lo veremos en pr贸ximos&amp;nbsp;art铆culos.&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;No sabemos de antemano cu谩ntos items vamos a obtener. Si, por ejemplo,
necesitamos s贸lo los tres primeros, tendremos que iterar elemento a
elemento hasta llegar a los tres que necesitamos o, bien, hasta que
quede exhausto el iterador. Con la soluci贸n con funtores el proceso es
mucho m谩s directo y eficiente.&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</content><category term="Python"></category><category term="closures"></category></entry><entry><title>Clausuras en python - Parte1</title><link href="https://blog.ch3m4.org/2013/10/25/clausuras-en-python-parte-1/" rel="alternate"></link><published>2013-10-25T21:02:00+02:00</published><updated>2013-10-25T21:02:00+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2013-10-25:/2013/10/25/clausuras-en-python-parte-1/</id><summary type="html">&lt;h2&gt;Funciones&amp;nbsp;Lambda&lt;/h2&gt;
&lt;p&gt;Antes de ver qu茅 son las &lt;strong&gt;clausuras&lt;/strong&gt; (&lt;em&gt;closures&lt;/em&gt;), veamos
qu茅 tienen las &lt;em&gt;funciones lambda&lt;/em&gt; que las hacen tan pol茅micas algunas&amp;nbsp;veces.&lt;/p&gt;
&lt;p&gt;Comencemos con un ejemplo. Te recomiendo que te esfuerces en deducir
c贸mo funciona sin ir a probar c贸mo funciona. A continuaci贸n te pondr茅
algunos valores para que &lt;/p&gt;</summary><content type="html">&lt;h2&gt;Funciones&amp;nbsp;Lambda&lt;/h2&gt;
&lt;p&gt;Antes de ver qu茅 son las &lt;strong&gt;clausuras&lt;/strong&gt; (&lt;em&gt;closures&lt;/em&gt;), veamos
qu茅 tienen las &lt;em&gt;funciones lambda&lt;/em&gt; que las hacen tan pol茅micas algunas&amp;nbsp;veces.&lt;/p&gt;
&lt;p&gt;Comencemos con un ejemplo. Te recomiendo que te esfuerces en deducir
c贸mo funciona sin ir a probar c贸mo funciona. A continuaci贸n te pondr茅
algunos valores para que elijas los valores de las tres&amp;nbsp;listas:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="n"&gt;add_one&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;

    &lt;span class="n"&gt;lista1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;add_one&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;

    &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="n"&gt;lista2&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;add_one&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;

    &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;
    &lt;span class="n"&gt;lista3&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;add_one&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Valores para &lt;code&gt;lista1&lt;/code&gt;:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;[0,1,2]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[1,2,3]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[0,2,4]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[1,3,5]&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Valores para &lt;code&gt;lista2&lt;/code&gt;:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;[0,1,2]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[1,2,3]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[0,2,4]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[1,3,5]&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Valores para &lt;code&gt;lista3&lt;/code&gt;:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;[0,1,2]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[1,2,3]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[2,3,4]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[1,3,5]&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Las soluciones est谩n al final del art铆culo&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1"&gt;1&lt;/a&gt;&lt;/sup&gt;, pero puedes probarlo
ahora para que lo veas t煤&amp;nbsp;mismo.&lt;/p&gt;
&lt;h3&gt;驴Qu茅 es lo que ha&amp;nbsp;pasado?&lt;/h3&gt;
&lt;p&gt;Contrariamente a lo que estamos acostrumbrados con las funciones normales, la
evaluaci贸n de una &lt;em&gt;funci贸n lambda&lt;/em&gt; se hace dentro del entorno donde se
ejecuta, independiente del entorno donde se ha definido. As铆 pu茅s, en la &lt;em&gt;funci贸n lambda&lt;/em&gt; &lt;code&gt;lambda
x:x+i&lt;/code&gt;, la variable &lt;code&gt;i&lt;/code&gt; toma el valor de esta variable en el momento
de evaluar la funci贸n. Como se usa esta variable para la compresi贸n de la
lista, ir谩 cambiando de valor a medida que se recorre la lista
&lt;code&gt;[0,1,2]&lt;/code&gt;, por lo que la expresi贸n &lt;code&gt;add_one(i)&lt;/code&gt; termina convirti茅ndose
en la expresi贸n &lt;code&gt;i+i&lt;/code&gt;, y la expresi贸n &lt;code&gt;add_one(i+1)&lt;/code&gt; en &lt;code&gt;i+1+i&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Tiene un funcionamiento similar a los &lt;em&gt;macros&lt;/em&gt;, donde se sustituye
&lt;em&gt;literalmente&lt;/em&gt; la llamada a la funci贸n por la expresi贸n equivalente. En
python3, se hace m谩s evidente al denominarse &lt;em&gt;expresiones lambda&lt;/em&gt; en lugar de &lt;em&gt;funciones lambda&lt;/em&gt;.&lt;/p&gt;
&lt;h2&gt;Clausuras&lt;/h2&gt;
&lt;p&gt;En una funci贸n podemos distinguir dos&amp;nbsp;partes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;C贸digo&amp;nbsp;ejecutable&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Entorno de evaluaci贸n&lt;/strong&gt;, m谩s conocido por &lt;strong&gt;mbito&lt;/strong&gt; o &lt;strong&gt;Scope&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Antes de ejecutar el c贸digo de la funci贸n, se aumenta el entorno de
evaluaci贸n con los &lt;em&gt;argumentos de entrada&lt;/em&gt; de la&amp;nbsp;funci贸n.&lt;/p&gt;
&lt;p&gt;Seg煤n en qu茅 entorno se evalua la funci贸n, tenemos dos&amp;nbsp;谩mbitos:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Clausura&lt;/strong&gt;, tambi茅n llamado &lt;strong&gt;mbito l茅xico&lt;/strong&gt; o &lt;strong&gt;mbito
  Est谩tico&lt;/strong&gt;, cuando la funci贸n se evalua en el entorno donde se ha&amp;nbsp;definido.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;mbito din谩mico&lt;/strong&gt; cuando se evalua en el entorno donde se invoca la&amp;nbsp;funci贸n.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Con esta definici贸n, podemos afirmar que en python las funciones
tienen &lt;em&gt;谩mbito l茅xico&lt;/em&gt;, con excepci贸n de las funciones lambda que tienen
&lt;em&gt;谩mbito din谩mico&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;No voy a considerar las ventajas de uno u otro tipo. Por lo general, las &lt;em&gt;clausuras&lt;/em&gt;
se consideran mejores para desacoplar el c贸digo de la
funci贸n del c贸digo donde se invoca, lo que ayuda mucho al
mantenimiento y correcci贸n de errores. Es por ello la manera normal de
crear funciones en la mayor铆a de lenguajes de&amp;nbsp;programaci贸n.&lt;/p&gt;
&lt;h3&gt;驴C贸mo hacer que una funci贸n lambda se comporte como si tuviera &lt;em&gt;clausura&lt;/em&gt;?&lt;/h3&gt;
&lt;p&gt;La forma de hacer que un funci贸n lambda se evalue en el entorno donde
se define consiste en pasar las variables de ese entorno que necesite
en los argumentos de entrada, casi siempre como argumentos por&amp;nbsp;defecto.&lt;/p&gt;
&lt;p&gt;En el ejemplo anterior&amp;nbsp;ser铆a:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="n"&gt;add_one&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;que equivaldr谩&amp;nbsp;a&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="n"&gt;add_one&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;En este caso &lt;code&gt;i&lt;/code&gt; se toma de los argumentos de la funci贸n, y tendr谩 por
defecto el valor de &lt;code&gt;i&lt;/code&gt; en el momento de la definici贸n de la funci贸n&amp;nbsp;lambda.&lt;/p&gt;
&lt;p&gt;No es perfecto, pero es lo mejor que tenemos. Lo recomendable es
evitar las funciones lambda complejas si no queremos llevarnos algunas&amp;nbsp;sorpresas.&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Los valores de las listas son las opciones 3, 3 y 4, respectivamente.&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</content><category term="Python"></category><category term="closures"></category></entry><entry><title>Nuevos planteamientos, nuevaetapa</title><link href="https://blog.ch3m4.org/2013/10/07/nuevos-planteamientos-nueva-etapa/" rel="alternate"></link><published>2013-10-07T14:45:00+02:00</published><updated>2013-10-07T14:45:00+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2013-10-07:/2013/10/07/nuevos-planteamientos-nueva-etapa/</id><summary type="html">&lt;p&gt;Si me sigues por twitter, sabr谩s que he cambiado de trabajo. Aunque sigo
siendo &amp;#8220;inform谩tico&amp;#8221; a todos los efectos, para mi &amp;#8220;core&amp;#8221; interno ha
supuesto un cambio radical de trabajo. Mi labor actual est谩 orientada
m谩s a temas de dise帽o y gesti贸n de sistemas y telecomunicaciones, lo que
relega las &lt;/p&gt;</summary><content type="html">&lt;p&gt;Si me sigues por twitter, sabr谩s que he cambiado de trabajo. Aunque sigo
siendo &amp;#8220;inform谩tico&amp;#8221; a todos los efectos, para mi &amp;#8220;core&amp;#8221; interno ha
supuesto un cambio radical de trabajo. Mi labor actual est谩 orientada
m谩s a temas de dise帽o y gesti贸n de sistemas y telecomunicaciones, lo que
relega las tareas de programaci贸n a un nivel&amp;nbsp;secundario.&lt;/p&gt;
&lt;p&gt;No espero que este cambio me suponga abandonar el estudio de nuevos
conceptos y metodolog铆as de la programaci贸n, como hac铆a hasta ahora. Tal
vez, s铆 que suponga que en este blog incluya temas de gesti贸n de
sistemas que hasta ahora no inclu铆a, aunque todav铆a no tengo claro en
qu茅 medida puedo aportar algo que sea original en esta&amp;nbsp;tem谩tica.&lt;/p&gt;
&lt;p&gt;Lo que s铆 que me estoy planteando reducir la programaci贸n en python. No
es por ning煤n motivo especial, si no por el deseo de explorar otros
mundos como son la programaci贸n reactiva con scala y el an谩lisis de
datos con R. No tener que programar en el trabajo supone una liberaci贸n
para hacer este viaje, casi como si me hubieran concedido un periodo&amp;nbsp;sab谩tico.&lt;/p&gt;
&lt;p&gt;A煤n tengo en el caj贸n varios art铆culos sobre python que ir茅 publicando
progresivametne, y pienso seguir cualquier novedad que surga. Lo que
quiz谩s se note m谩s sea que bajar茅 mi actividad (que no desaparici贸n) en
los distintos foros python. Posiblemente, haya muchos que ni se den&amp;nbsp;cuenta.&lt;/p&gt;</content><category term="Pensamientos"></category></entry><entry><title>Estudio funci贸n factorial -numpy</title><link href="https://blog.ch3m4.org/2013/08/14/estudio-funcion-factorial-numpy/" rel="alternate"></link><published>2013-08-14T14:28:00+02:00</published><updated>2013-08-14T14:28:00+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2013-08-14:/2013/08/14/estudio-funcion-factorial-numpy/</id><summary type="html">&lt;p&gt;Mientras busco tiempo para preparar algunos art铆culos sobre c贸mo hacer la programaci贸n python &lt;em&gt;m谩s eficiente&lt;/em&gt;, he estado revisando nuevos m茅todos de programar la funci贸n factorial en python aplicando los nuevos conocimientos&amp;nbsp;adquiridos.&lt;/p&gt;
&lt;p&gt;Como puse en un &lt;a href="https://blog.ch3m4.org/2011/06/06/estudio-funcion-factorial/"&gt;art铆culo anterior&lt;/a&gt;, la implementaci贸n m谩s compacta de la funci贸n factorial ser铆a aplicando la funci贸n &lt;/p&gt;</summary><content type="html">&lt;p&gt;Mientras busco tiempo para preparar algunos art铆culos sobre c贸mo hacer la programaci贸n python &lt;em&gt;m谩s eficiente&lt;/em&gt;, he estado revisando nuevos m茅todos de programar la funci贸n factorial en python aplicando los nuevos conocimientos&amp;nbsp;adquiridos.&lt;/p&gt;
&lt;p&gt;Como puse en un &lt;a href="https://blog.ch3m4.org/2011/06/06/estudio-funcion-factorial/"&gt;art铆culo anterior&lt;/a&gt;, la implementaci贸n m谩s compacta de la funci贸n factorial ser铆a aplicando la funci贸n &lt;code&gt;reduce&lt;/code&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;fact&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;reduce&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;&amp;#8230;o usando el &lt;code&gt;operator.__mul__&lt;/code&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;operator&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="fm"&gt;__mul__&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;fact&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;reduce&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="fm"&gt;__mul__&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Tambi茅n contaba el caso de una compresi贸n de listas &lt;em&gt;&amp;#8220;bizarra&amp;#8221;&lt;/em&gt; que evitaba el uso de &lt;code&gt;reduce&lt;/code&gt; y &lt;code&gt;lambda&lt;/code&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;fact&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]][&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;El problema con esta expresi贸n es que calcula todos los elementos de la lista para quedarse 煤nicamente con el 煤ltimo elemento. Una forma de hacer lo mismo, sabiendo que la funci贸n factorial es estrictamente creciente, es obteniendo el m谩ximo con &lt;code&gt;max&lt;/code&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;fact&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;max&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Para este tipo de tareas, en las que tenemos un iterador y queremos quedarnos con el 煤ltimo elemento, resulta mucho m谩s eficiente el uso de la colecci贸n &lt;code&gt;deque&lt;/code&gt; limitando el n煤mero de elementos de la&amp;nbsp;lista:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;collections&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;deque&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;fact&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;deque&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt; &lt;span class="n"&gt;maxlen&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Por comparar tiempos, para el c贸mputo de &lt;code&gt;fact(10000)&lt;/code&gt; me salen estos&amp;nbsp;tiempos:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;reduce+lambda        72.0 ms
reduce+operator      71.2 ms
comprensi贸n listas  173.0 ms
funci贸n max          75.1 ms
deque                75.5 ms
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Como se puede apreciar que los tiempos son muy similares (con la excepci贸n de la compresi贸n de listas debido a su gasto de memoria). Es l贸gico suponer que donde m谩s tiempo se gasta es el c贸mputo de la multiplicaci贸n con la precisi贸n absoluta que tienen los n煤meros &lt;em&gt;longs&lt;/em&gt; de&amp;nbsp;python. &lt;/p&gt;
&lt;p&gt;De hecho, no se consigue gran cosa usando las librer铆as de c谩lculo num茅rico m谩s conocidas de python. Se hace imposible optimizar nada sin p茅rdida de precisi贸n o que salgan resultados extra帽os. A煤n as铆, podemos expresar formas muy compactas para expresar la funci贸n factorial en &lt;code&gt;numpy&lt;/code&gt; si forzamos en el uso del tipo &lt;code&gt;object&lt;/code&gt; para que as铆 no lo&amp;nbsp;optimice:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;fact&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;dtype&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;prod&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Tarda &lt;code&gt;70.8 ms.&lt;/code&gt; en calcular &lt;code&gt;fact(10000)&lt;/code&gt;, que es similar al resto de funciones factoriales que hemos visto. Da una buena idea de lo bien optimizada que est谩 la librer铆a &lt;code&gt;numpy&lt;/code&gt; para cualquier cosa, incluso impidi茅ndole que optimice los tipos de datos que&amp;nbsp;emplea.&lt;/p&gt;</content><category term="Python"></category><category term="algorithm"></category><category term="factorial"></category><category term="maths"></category></entry><entry><title>LaOdisea</title><link href="https://blog.ch3m4.org/2013/07/29/la-odisea/" rel="alternate"></link><published>2013-07-29T16:35:00+02:00</published><updated>2013-07-29T16:35:00+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2013-07-29:/2013/07/29/la-odisea/</id><summary type="html">&lt;p&gt;Puede ser raro que alguien de ciencias, como yo, escriba sobre una de
las obras m谩s significativas de la literatura griega cl谩sica. Pero,
contrariamente a la gente de letras que sabe distinguir qu茅 es o no de
letras, la mentalidad cient铆fica ve ciencia por doquier, incluso en la&amp;nbsp;Odisea.&lt;/p&gt;
&lt;p&gt;Recientemente &lt;/p&gt;</summary><content type="html">&lt;p&gt;Puede ser raro que alguien de ciencias, como yo, escriba sobre una de
las obras m谩s significativas de la literatura griega cl谩sica. Pero,
contrariamente a la gente de letras que sabe distinguir qu茅 es o no de
letras, la mentalidad cient铆fica ve ciencia por doquier, incluso en la&amp;nbsp;Odisea.&lt;/p&gt;
&lt;p&gt;Recientemente he visto por televisi贸n la pel铆cula &lt;a href="http://www.imdb.com/title/tt0118414/" title="The Odissey (1997)"&gt;La Odisea&lt;/a&gt; de
Andr茅i Konchalovski, producida por Francis Ford Coppola, una adaptaci贸n
libre de la &amp;#8220;Il铆ada&amp;#8221; de Homero con a帽adidos de la &amp;#8220;Eneida&amp;#8221; de Virgilio
(el archiconocido caballo de Troya). Si bien como pel铆cula de fantas铆a y
acci贸n se trata de un producto aceptable, sus conclusiones finales me
han decepcionado&amp;nbsp;bastante.&lt;/p&gt;
&lt;p&gt;La trama de la pel铆cula se centra en el castigo de los dioses al
orgulloso Ulises, conquistador de Troya. Despu茅s de muchos a帽os vagando
por todo los mundos conocidos e inframundo, finalmente se somete a la
voluntad divina, quienes le permiten regresar a taca para recuperar su
&amp;#8220;mundo&amp;#8221;, defender a su familia y acabar con todos los que pretend铆an
ursurpar su reino. Un planteamiento demasiado &amp;#8220;conservador&amp;#8221; de la
voluntad humana que desvirt煤a bastante el verdadero esp铆ritu de la&amp;nbsp;Il铆ada.&lt;/p&gt;
&lt;p&gt;Las aventuras de Ulises deber铆an verse en realidad como un viaje hacia
el conocimiento. All谩 donde recala, Ulises adquiere m谩s sabidur铆a y
conocimientos. Aqu茅l hombre inteligente que derrot贸 a los troyanos,
acaba volviendo sabio despu茅s de muchos a帽os. Definitivamente taca no
era el destino del viaje, si no la&amp;nbsp;Sabidur铆a.&lt;/p&gt;
&lt;p&gt;En la pel铆cula, Ulises decide viajar al reino de Hades para que el
profeta ciego Tiresias le indique c贸mo volver a taca. Tiresias le dice
que el ciego es 茅l por no reconocer en el cielo estrellado el modo de
regresar a casa: &lt;em&gt;&amp;#8220;La constelaci贸n Ori贸n siempre al acecho de la Osa,
tambi茅n llamada carro, la 煤nica constelaci贸n que nunca se ba帽a en el
mar. Mant茅n siempre la Osa a tu izquierda y llegar谩s a taca&amp;#8221;.&lt;/em&gt;
Tiresias le da el conocimiento para no depender de los dioses, del mismo
modo que Prometeo entreg贸 el fuego del conocimiento a los hombres. Con
este conocimiento, Ulises es capaz de volver a casa como hombre&amp;nbsp;sabio.&lt;/p&gt;
&lt;p&gt;Realmente, en la Il铆ada no es Tiresias qui茅n indica el camino a casa, si
no la divina Calypso cuando Ulises es finalmente perdonado por los
dioses. Pero aparte de esta licencia para lucimiento de Christopher Lee
en el papel de Tiresias, hay algo en esta indicaci贸n que resulta raro
para una &lt;em&gt;mente cient铆fica&lt;/em&gt;. Situada sobre el eje de giro de la
Tierra, la Osa Mayor gira sobre s铆 misma. Dependiendo de la latitud,
esta constelaci贸n nunca se pondr铆a en el horizonte marino de modo que
resulta una buena referencia para guiarse por la noche. Pero, 驴por qu茅
no se habla de la estrella Polar como indicadora del norte? Muy
sencillo: en la 茅poca en la que se escribi贸 la Il铆ada, la estrella polar
no estaba fija en el cielo, giraba con el resto de estrellas de la
constelaci贸n debido a que la inclinaci贸n del eje de la Tierra cambia con
el tiempo. En la actualidad, la estrella Polar coincide con el eje de
giro, pero no siempre ha sido ni ser谩&amp;nbsp;as铆.&lt;/p&gt;
&lt;p&gt;Es el conocimiento lo que finalmente nos libera del yugo de los dioses.
Tal y como cuenta en su poema &lt;strong&gt;&amp;#8220;taca&amp;#8221;&lt;/strong&gt; el griego &lt;em&gt;Constantinos
P. Cavafis&lt;/em&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Cuando salgas de viaje para taca  
desea que el camino sea largo,  
colmado de aventuras, colmado de experiencias.  
A los lestrigones y a los c铆clopes,  
al irascible Poseid贸n no temas,  
pues nunca encuentros tales tendr谩s en tu camino,  
si tu pensamiento se mantiene alto,  
si una exquisita emoci贸n te toca cuerpo y alma.  
A los lestrigones y a los c铆clopes,  
al fiero Poseid贸n no encontrar谩s,  
a no ser que los lleves ya en tu alma,  
a no ser que tu alma los ponga en pie ante ti.

Desea que el camino sea largo;  
que sean muchas las ma帽anas estivales  
en que entres en puertos que ves por vez primera.  
Detente en los mercados fenicios,  
adquiere sus bellas mercanc铆as,  
madreperlas y n谩cares, 茅banos y 谩mbares,  
y voluptuosos perfumes de todas las clases,  
todos los voluptuosos perfumes que te sean posibles.  
Y vete a muchas ciudades de Egipto,  
y aprende, aprende de los sabios.

Mant茅n siempre a taca en tu mente.  
Llegar all铆 es tu destino.  
Pero no tengas la menor prisa en tu viaje.  
Es mejor que dure muchos a帽os  
y que viejo, al fin, arribes a la isla,  
rico por todas las ganancias de tu viaje,  
sin esperar que taca te vaya a ofrecer riquezas.

taca te ha dado un viaje hermoso.  
Sin ella no te habr铆as puesto en marcha.  
Pero no tiene ya m谩s que ofrecerte.

Aunque la encuentres pobre, taca de ti no se ha burlado.  
Convertido en sabio y con tanta experiencia,  
ya habr谩s comprendido el significado de todas las tacas.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Desde la primera vez que escuch茅 este poema en voz de &lt;a href="http://www.bernardosouviron.com" title="Bernardo Souvir贸n"&gt;Bernardo
Souvir贸n&lt;/a&gt; fui consciente que lo importante de este viaje hacia taca,
que todos estamos realizando, no es el llegar pronto, si no la riqueza
de los conocimientos que atesoramos por el camino. No tengas&amp;nbsp;prisa.&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;PD&lt;/span&gt;: por cierto, recomiendo seguir a Bernardo Souvir贸n, profesor de
lenguas cl谩sicas, en sus intervenciones de radio &lt;span class="caps"&gt;RNE&lt;/span&gt; y diversos libros.
Si piensas que la historia cl谩sica es un rollo es porque nunca las has
o铆do contar de la manera que las cuentas Bernardo&amp;nbsp;Souvir贸n.&lt;/p&gt;</content><category term="Ciencia"></category></entry><entry><title>Borrado de un descriptor (correcci贸n deerrores)</title><link href="https://blog.ch3m4.org/2013/07/13/borrado-de-un-descriptor-correccion-de-errores/" rel="alternate"></link><published>2013-07-13T14:00:00+02:00</published><updated>2018-07-25T01:30:02+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2013-07-13:/2013/07/13/borrado-de-un-descriptor-correccion-de-errores/</id><summary type="html">&lt;p&gt;Tengo que hacer algunas correcciones a la serie de art铆culos sobre &lt;em&gt;descriptores&lt;/em&gt;, en concreto sobre el m茅todo &lt;code&gt;__delete__&lt;/code&gt; del protocolo &lt;em&gt;descriptor&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Primero, aclaremos c贸mo funciona el m茅todo &lt;code&gt;__delete__&lt;/code&gt; y en qu茅 se diferencia de &lt;code&gt;__del__&lt;/code&gt;. No se trata de m茅todos &lt;em&gt;destructores&lt;/em&gt; tal y como se entiende en otros lenguajes de &lt;/p&gt;</summary><content type="html">&lt;p&gt;Tengo que hacer algunas correcciones a la serie de art铆culos sobre &lt;em&gt;descriptores&lt;/em&gt;, en concreto sobre el m茅todo &lt;code&gt;__delete__&lt;/code&gt; del protocolo &lt;em&gt;descriptor&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Primero, aclaremos c贸mo funciona el m茅todo &lt;code&gt;__delete__&lt;/code&gt; y en qu茅 se diferencia de &lt;code&gt;__del__&lt;/code&gt;. No se trata de m茅todos &lt;em&gt;destructores&lt;/em&gt; tal y como se entiende en otros lenguajes de programaci贸n orientados a objeto. En python, &lt;strong&gt;todo objeto est谩 vivo mientras est茅 referenciado&lt;/strong&gt;. S贸lo cuando se pierda la 煤ltima referencia se proceder谩 a la destrucci贸n y borrado del objeto en memoria por parte del &lt;em&gt;recolector de basura&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Por ejemplo, veamos el siguiente&amp;nbsp;c贸digo:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Miclase&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__del__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;instance deleted&amp;quot;&lt;/span&gt;

&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Miclase&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;
&lt;span class="k"&gt;del&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Come on&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;END&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;De su ejecuci贸n, podemos comprobar que el m茅todo &lt;code&gt;__del__&lt;/code&gt; no se invoca justo en el momento de hacer &lt;code&gt;del a&lt;/code&gt;, si no cuando se pierde la 煤ltima referencia al asignar otro valor a la variable &lt;code&gt;b&lt;/code&gt;. La sentencia &lt;code&gt;del a&lt;/code&gt; no &lt;em&gt;destruye&lt;/em&gt; el objeto, tan s贸lo desliga el objeto de la etiqueta &lt;code&gt;a&lt;/code&gt; que lo referenciaba. Por ese motivo, es inexacto hablar en python de &amp;#8220;variable de memoria&amp;#8221;, como se entiende en otro lenguajes. Tan s贸lo cambiamos de una referencia de un objeto a otro, sin destruir su valor&amp;nbsp;anterior.&lt;/p&gt;
&lt;h2&gt;Revisi贸n del protocolo&amp;nbsp;descriptor&lt;/h2&gt;
&lt;p&gt;En un &lt;a href="https://blog.ch3m4.org/2011/06/19/descriptores-parte-1/"&gt;anterior art铆culo&lt;/a&gt; distingu铆a entre descriptores de datos y de no-datos. Hay que aclarar que un descriptor de datos &amp;#8220;es tambi茅n el que s贸lo tiene definido un m茅todo &lt;code&gt;__delete__&lt;/code&gt;, aunque no tenga m茅todo &lt;code&gt;__set__&lt;/code&gt;&lt;span class="dquo"&gt;&amp;#8220;&lt;/span&gt;. 驴Para qu茅 puede sernos 煤til tener uno sin el&amp;nbsp;otro?&lt;/p&gt;
&lt;p&gt;Un descriptor de datos sin m茅todo &lt;code&gt;__set__&lt;/code&gt; no tiene forma de impedir que el atributo/m茅todo que implementa sea sustitu铆do por otro objeto (por ejemplo, por otro descriptor). El m茅todo &lt;code&gt;__delete__&lt;/code&gt; nos dar铆a la 煤ltima opci贸n de liberar recursos que ya no vayamos a usar antes de desaparecer el descriptor. Pero, independiemente de lo que haga, el m茅todo &lt;code&gt;__delete__&lt;/code&gt; indicar铆a que el descriptor puede ser sustituido. En definitiva, se comportar铆a como un &lt;em&gt;descriptor de no-datos&lt;/em&gt;, pero con las diferencias en la invocaci贸n entre estos dos tipos de descriptor&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1"&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;Para aclarar las cosas, veamos qu茅 estaba mal en el &lt;a href="https://blog.ch3m4.org/2011/06/19/descriptores-parte-1/"&gt;ejemplo&lt;/a&gt; que puse en su momento  sobre el uso de &lt;code&gt;__delete__&lt;/code&gt; (he cambiado algunos nombres para que se vea m谩s&amp;nbsp;claro):&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Desc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mul&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mul&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mul&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__get__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;cls&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mul&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__set__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="ne"&gt;AttributeError&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__delete__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;del&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Miclase&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;

    &lt;span class="n"&gt;a12&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Desc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;a200&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Desc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;


&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Miclase&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;a12&lt;/span&gt; &lt;span class="c1"&gt;#--&amp;gt; 24&lt;/span&gt;

&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;a12&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;  &lt;span class="c1"&gt;# ERROR: AttributeError&lt;/span&gt;

&lt;span class="k"&gt;del&lt;/span&gt; &lt;span class="n"&gt;Miclase&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;a12&lt;/span&gt;
&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;a12&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;a12&lt;/span&gt;  &lt;span class="c1"&gt;#--&amp;gt; 100 (no descriptor)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;La idea era que se pudiera borrar el descriptor de datos para sustuirlo por otro valor. Tal como se帽alaba Cristian en un comentario al respecto, este ejemplo parece funcionar con o sin el m茅todo &lt;code&gt;__delete__&lt;/code&gt; en el&amp;nbsp;descriptor.&lt;/p&gt;
&lt;p&gt;Funciona siempre debido a que con &lt;code&gt;'del Miclase.a12'&lt;/code&gt; estamos borrando la referencia al descriptor que tiene la clase, sin pasar por el protocolo descriptor. La particularidad de los descriptores es que &lt;em&gt;viven&lt;/em&gt; en la clase, pero se invocan desde la instancia. Con &lt;code&gt;'del Miclase.a12'&lt;/code&gt; estamos salt谩ndonos el protocolo descriptor para acceder directamente al atributo de la clase&lt;sup id="fnref:2"&gt;&lt;a class="footnote-ref" href="#fn:2"&gt;2&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;Adem谩s, este c贸digo no funcionar铆a&amp;nbsp;nunca:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__delete__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;del&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Si la idea era borrar el objeto &lt;code&gt;self&lt;/code&gt;, referencia al descriptor, podemos quitarnos esa idea ya que el comando &lt;code&gt;del&lt;/code&gt; borra la referencia del &lt;em&gt;scope&lt;/em&gt; local donde se encuentra. &lt;strong&gt;隆No es un destructor!&lt;/strong&gt; En realidad, todas las variables locales son borradas al finalizar el m茅todo. En este caso en concreto, tambi茅n la variable local &lt;code&gt;obj&lt;/code&gt; ser谩 borrada aunque no se indique&amp;nbsp;expl铆citamente.&lt;/p&gt;
&lt;p&gt;Otra cuesti贸n a tener en cuenta es que los atributos de clase son compartidos por todas sus instancias. Si en alg煤n momento alteramos un descriptor (por ejemplo, borr谩ndolo), entonces todas las instancias sufririan el mismo cambio. No parece que sea el efecto&amp;nbsp;buscado.&lt;/p&gt;
&lt;p&gt;La gran pregunta es &lt;em&gt;entonces, 驴c贸mo podemos aprovecharnos del m茅todo &lt;code&gt;__delete__&lt;/code&gt;?&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Para sacarle alg煤n partido, el descriptor deber铆a comportarse de forma distinta seg煤n sea la instancia que lo invoca. Definido as铆 el descriptoor, entonces podr铆amos usar el m茅todo &lt;code&gt;__delete__&lt;/code&gt; para simular el borrado del atributo para esa instancia, sin que el descriptor pierda su&amp;nbsp;funcionalidad.&lt;/p&gt;
&lt;p&gt;Un ejemplo para ilustrar 茅sto&amp;nbsp;ser铆a:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;weakref&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;WeakKeyDictionary&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Desc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;WeakKeyDictionary&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__get__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;cls&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="ne"&gt;AttributeError&lt;/span&gt;
        &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__set__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="ne"&gt;AttributeError&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__delete__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;del&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Miclase&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;

    &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Desc&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;


&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Miclase&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Miclase&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;  &lt;span class="c1"&gt;#--&amp;gt; (2, 7)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;  &lt;span class="c1"&gt;#--&amp;gt; (5, 7)&lt;/span&gt;

&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;  &lt;span class="c1"&gt;# ERROR: AttributeError&lt;/span&gt;

&lt;span class="k"&gt;del&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;
&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;11&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;  &lt;span class="c1"&gt;#--&amp;gt; (11, 16)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;  &lt;span class="c1"&gt;#--&amp;gt; (5, 16)&lt;/span&gt;

&lt;span class="k"&gt;del&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;  &lt;span class="c1"&gt;#--&amp;gt; (11, 11)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;El descriptor mantiene un diccionario &lt;em&gt;weak&lt;/em&gt; con valores asignados para cada instancia de la clase. Usamos para ello un &lt;em&gt;WeakKeyDictionary&lt;/em&gt; que tiene la particularidad de relajar la referencia al objeto, de modo que si todas las referencias al objeto son borradas en el programa, tambi茅n es borrada la referencia que conservaba el&amp;nbsp;diccionario.&lt;/p&gt;
&lt;p&gt;En este ejemplo, el m茅todo &lt;code&gt;__get__&lt;/code&gt; devuelve el valor del atributo si el objeto est谩 en el diccionario, si no da error. El m茅todo &lt;code&gt;__set__&lt;/code&gt; asigna un valor al atributo s贸lo si el objeto no existe. Para ver mejor el funcionamiento, el m茅todo &lt;code&gt;__get__&lt;/code&gt; devuelve una tupla con el valor del atributo y la suma de todos los&amp;nbsp;atributos.&lt;/p&gt;
&lt;p&gt;Ejecuntado el ejemplo, creamos dos instancias y les asignamos un valor al atributo controlado por el descriptor. Una vez asignado un valor, ya no podemos cambiarlo. La 煤nica opci贸n ser谩 borrar el atributo y volverlo a&amp;nbsp;asignar.&lt;/p&gt;
&lt;p&gt;Tambi茅n se puede comprobar que, cuando borramos el objeto &lt;code&gt;b&lt;/code&gt;, la suma de todos los atributos se actualiza a las instancias que a煤n quedan &lt;em&gt;vivas&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;En el borrado del atributo se usa el m茅todo &lt;code&gt;__delete__&lt;/code&gt; del descriptor; en el borrado de la instancia, el m茅todo &lt;code&gt;__del__&lt;/code&gt; (si&amp;nbsp;existiera).&lt;/p&gt;
&lt;h2&gt;Referencia&lt;/h2&gt;
&lt;p&gt;No quisiera acabar este art铆culo sin a帽adir una referencia sobre este tema que os recomiendo leer, con algunas recetas para aprovechar el uso de los&amp;nbsp;descriptores:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://nbviewer.jupyter.org/gist/ChrisBeaumont/5758381/descriptor_writeup.ipynb"&gt;&lt;span class="dquo"&gt;&amp;#8220;&lt;/span&gt;Python Descriptors Demystified&amp;#8221;&lt;/a&gt; by &lt;a href="http://chrisbeaumont.org/"&gt;Chris&amp;nbsp;Beaumont&lt;/a&gt;&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Comentado en los anteriores &lt;a href="https://blog.ch3m4.org/tag/descriptor/"&gt;art铆culos sobre descriptores&lt;/a&gt;.&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;Un modo de impedir el borrado de atributos de una clase ser铆a aplicando el protocolo descriptor con metaclases, pero pienso que estar铆amos complic谩ndolo todo demasiado para el beneficio que pudiera obtenerse a cambio.&amp;#160;&lt;a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</content><category term="Python"></category><category term="descriptor"></category><category term="t茅cnicas din谩micas"></category></entry><entry><title>Balance y cierre deejercicio</title><link href="https://blog.ch3m4.org/2013/06/22/balance-y-cierre-de-ejercicio/" rel="alternate"></link><published>2013-06-22T14:51:00+02:00</published><updated>2013-06-22T14:51:00+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2013-06-22:/2013/06/22/balance-y-cierre-de-ejercicio/</id><summary type="html">&lt;p&gt;Ya s茅 que parece extra帽o cerrar un periodo en mitad de a帽o, pero los que me siguen de aqu铆 a unos a帽os sabr谩n que suelo hacer un breve resumen de situaci贸n comentando qu茅 he estado haciendo y qu茅 proyectos futuros estoy&amp;nbsp;ideando.&lt;/p&gt;
&lt;p&gt;Como puse en el 煤ltimo &lt;em&gt;twitt&lt;/em&gt;, parece que &lt;/p&gt;</summary><content type="html">&lt;p&gt;Ya s茅 que parece extra帽o cerrar un periodo en mitad de a帽o, pero los que me siguen de aqu铆 a unos a帽os sabr谩n que suelo hacer un breve resumen de situaci贸n comentando qu茅 he estado haciendo y qu茅 proyectos futuros estoy&amp;nbsp;ideando.&lt;/p&gt;
&lt;p&gt;Como puse en el 煤ltimo &lt;em&gt;twitt&lt;/em&gt;, parece que voy a cambiar de trabajo. Despu茅s de 20 a帽os dedicados a la sanidad p煤blica, pasar茅 a trabajar para la gesti贸n inform谩tica de la educaci贸n p煤blica. Ya s茅 que son dos de los sectores p煤blicos m谩s castigados por los recortes presupuestarios, pero al menos queda algo, no como en el resto de&amp;nbsp;departamentos.&lt;/p&gt;
&lt;p&gt;Lo primero de todo es volver a afirmar una vez m谩s que &lt;strong&gt;no voy a dejar python&lt;/strong&gt;. Agradezco los mensajes de 谩nimo para que contin煤e participando en la comunidad hispana de python, incluso alguna que otra oferta para trabajar en proyectos punteros. No voy a abandonar python, tan s贸lo se me ha quedado peque帽o. Ahora cierro el a帽o que me d铆 para hacerme experto programador en scala y este a帽o que viene har茅 lo propio con&amp;nbsp;R.&lt;/p&gt;
&lt;p&gt;Hace varios a帽os que no programaba nada en python para el trabajo. En realidad, mi labor ha consistido en mantener y terminar proyectos que dejaban inconclusos las empresas externas que iban quebrando y que dejaban todo sin documentar y sin metodolog铆a alguna. Ha sido mucho c贸digo &lt;em&gt;&amp;#8220;desestructurado&amp;#8221;&lt;/em&gt; el que he tenido que leer y entender. Lo peor es que la actual situaci贸n econ贸mica de la administraci贸n p煤blica no permite configurar un equipo de desarrolladores capaces de abarcar estos proyectos y, peor 谩un, si alg煤n d铆a salimos de la crisis y la administraci贸n p煤blica vuelve a disponer de medios econ贸micos, en primer lugar no habr谩 gente capacitada (habr谩n huido del pais si son inteligentes). Lo segundo, los dirigentes pol铆ticos no conf铆an en sus funcionarios y optan por sacar estas funciones del control p煤blico a empresas externas que puedan manipular y de las que puedan beneficiarse en&amp;nbsp;exclusiva.&lt;/p&gt;
&lt;p&gt;Porque hay que decirlo bien claro: &lt;strong&gt;los datos de la administraci贸n p煤blica deben ser p煤blicos&lt;/strong&gt;. No valen excusas para no publicar las listas de esperas de sanidad, ni saber cu谩ntos contratos se hacen al mes, ni cu谩nto se cobran de dietas,&amp;#8230; Como inform谩ticos, conocemos que toda esta informaci贸n se est谩 introduciendo al d铆a en el sistema, casi en tiempo real. El gran problema es que un pol铆tico no cree en los datos, s贸lo cree en aquello que confirme lo que cree. Como le铆 hace poco en un libro&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1"&gt;1&lt;/a&gt;&lt;/sup&gt;: &amp;#8220;El prop贸sito 煤ltimo del &lt;em&gt;an谩lisis de datos&lt;/em&gt; es convencer a otras personas que sus creencias pueden ser alteradas por los datos&amp;#8221;. Y creo que es aqu铆 donde los inform谩ticos somos m谩s temidos. Nos niegan ser parte de las juntas de direcci贸n porque nuestros razonamientos se basar铆an en datos reales gracias a nuestro conocimiento integral de la estructura de la empresa. Somos demasiado poco manipulables para ser&amp;nbsp;directivos.&lt;/p&gt;
&lt;p&gt;Hay que exigir que la administraci贸n p煤blica abra sus datos. Son de agradecer los primeros esfuerzos en &lt;em&gt;opendata&lt;/em&gt; que realizan algunos gobiernos auton贸micos; pero son datos muy escasos y limitados, casi rid铆culos en comparaci贸n con la cantidad total de datos que gestiona. Deber铆a exigirse, por ley, que toda empresa que trabaje para la administraci贸n p煤blica publique sus datos. Ya no s贸lo porque los ciudadanos queramos saber m谩s, si no porque el dinero p煤blico debe beneficiar a todos, incluso a las empresas que no conseguieron el contrato y que quieran&amp;nbsp;mejorar.&lt;/p&gt;
&lt;p&gt;Padezco de cierto S铆ndrome de Casandra, pero si me preguntaran c贸mo pienso que ser谩 el futuro, imagino en un mundo inhundado de datos abiertos. La huella que dejaron generaciones pasadas en este oc茅ano de datos ser铆an la base con la que investigadores del presente har铆an nuevos descubrimientos m茅dicos y cient铆ficos. Datos que contradigan la manipulaci贸n del presente por pol铆ticos y multinacionales. En definitiva, un quinto poder para una Democracia m谩s&amp;nbsp;justa.&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;&lt;span class="dquo"&gt;&amp;#8220;&lt;/span&gt;Doing Bayesian Data Analysis&amp;#8221; por John K. Kruschke&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</content><category term="Pensamientos"></category></entry><entry><title>Scala vs. Python vs.Lua</title><link href="https://blog.ch3m4.org/2013/04/09/scala-vs-python-vs-lua/" rel="alternate"></link><published>2013-04-09T20:55:00+02:00</published><updated>2013-04-09T20:55:00+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2013-04-09:/2013/04/09/scala-vs-python-vs-lua/</id><summary type="html">&lt;p&gt;Hace bastante tiempo que ando comentando cosas de estos tres lenguajes: Scala, Python y Lua. Hasta el momento no he hecho una comparativa entre ellos y creo que es el momento de hacerlo, siempre desde el punto de vista de un programador. M谩s que llegar a la conclusi贸n de cu谩l &lt;/p&gt;</summary><content type="html">&lt;p&gt;Hace bastante tiempo que ando comentando cosas de estos tres lenguajes: Scala, Python y Lua. Hasta el momento no he hecho una comparativa entre ellos y creo que es el momento de hacerlo, siempre desde el punto de vista de un programador. M谩s que llegar a la conclusi贸n de cu谩l es mejor o peor, quisiera dar una idea de porqu茅 los recomiendo, a los tres, sin decantarme por s贸lo uno de ellos. Si buscabas razones para quedarte con uno de ellos, tampoco deber铆as desestimar otros similares como Ruby, Groovy, Haskel, Clojure o Erlang. De todos hay cosas qu茅&amp;nbsp;aprender.&lt;/p&gt;
&lt;h2&gt;Python&lt;/h2&gt;
&lt;p&gt;Quiz谩s Python sea el lenguaje m谩s asequible para un programador que empieza o que busca un segundo lenguaje. Su aprendizaje es sencillo, mientras que su potencia y ubicuidad lo hace ideal desde los peque帽os scripts que podamos necesitar en nuestro d铆a a d铆a, hasta escalar a servidores empresariales de tipo&amp;nbsp;medio.&lt;/p&gt;
&lt;p&gt;Puede que a muchos disguste python por su identaci贸n forzada o por su particular modelo de datos, por citar dos de las caracter铆sticas m谩s criticadas. Sin embargo, conf铆a en m铆 si te digo que python es uno de los mayores compendios de sabidur铆a que puedes tener al alcance de tus manos. Cualquier cosa que creas extra帽a o fuera de lugar, seguramente tenga su buena explicaci贸n. El sistema colaborativo que hace evolucionar a python (conocido como &lt;span class="caps"&gt;PEP&lt;/span&gt;-&lt;em&gt;Python Enhancement Proposals&lt;/em&gt;) consigue que todo el saber de la comunidad python termine decant谩ndose hace un modelo de evoluci贸n del lenguaje que lo hace 煤nico, con el que mejora calmadamente con cada versi贸n. Operaciones con n煤meros grandes, algoritmo &lt;span class="caps"&gt;MRO&lt;/span&gt; para herencia m煤ltiple, estructuras de datos optimizadas (heapq, deque,&amp;#8230;), ordenaciones por clave, operaciones sobre secuencias (sum, any, all,&amp;#8230;)&amp;#8230; son s贸lo algunos ejemplos de optimizaciones que el usuario usa sin ser realmente consciente de la cantidad de trabajo que le est谩 ahorrando. En python casi siempre hay una forma de hacer las cosas correctamente, y adem谩s suele ser la&amp;nbsp;mejor.&lt;/p&gt;
&lt;h2&gt;Lua&lt;/h2&gt;
&lt;p&gt;Desde mi punto de vista, considero Lua como un &lt;em&gt;python minimalista&lt;/em&gt;. Sin objetos, sin posibilidad de construir tus propios tipos de datos, pero se apa帽a con un s贸lo tipo de estrutura &lt;code&gt;table&lt;/code&gt; para montar un sistema de herencia y emular algunos tipos de datos. Si lenguajes como python te parece complicados, no comprendes conceptos como la herencia, la creaci贸n de tipos o para qu茅 sirven las metaclases, la simplicidad de lua har谩 que entiendas mejor estos&amp;nbsp;conceptos.&lt;/p&gt;
&lt;p&gt;El reducido tama帽o del int茅rprete de Lua lo hace apropiado para ser empotrado en otras aplicaciones. Lo tenemos en gestores de paquetes (&lt;span class="caps"&gt;RPM&lt;/span&gt;), bases de datos (mysql-lua), e IDEs (Scite), aunque quiz谩s sea m谩s famoso por ser el motor de script de juegos como &lt;em&gt;World of Warcraft&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;En cuanto a sint谩xis, tambi茅n goza de un minimalismo que, a veces, desear铆as tuviera python. Posee cierta relajaci贸n en la llamada a funciones que permite usarlo para crear DSLs (&lt;em&gt;Lenguajes Espec铆ficos del Dominio&lt;/em&gt;), aunque quiz谩s su mejor uso sea como lenguaje de descripci贸n de datos en sustituci贸n de xml, yaml o ficheros&amp;nbsp;ini.&lt;/p&gt;
&lt;h2&gt;Scala&lt;/h2&gt;
&lt;p&gt;Reconozco que soy un ferviente partidario de la &lt;em&gt;Programaci贸n Funcional&lt;/em&gt;. Python tiene alg煤n aspecto de este paradigma, pero cada vez parece m谩s diluido dentro del sistema de Clases Abstractas (&lt;code&gt;ABC&lt;/code&gt;-Abstract Base Classes) que empiezan a generalizarse en python. La estrategia de python es optimizar el uso de estas clases abstractas, independientemente de las clases que deriven luego de ellas. Aunque es un buen enfoque de optimizaci贸n, siempre estar谩 limitado a tiempo de&amp;nbsp;ejecuci贸n.&lt;/p&gt;
&lt;p&gt;Scala posee un potente sistema de tipado est谩tico de datos que posibilita la inferencia del tipo de una operaci贸n, lo que permite cierta relajaci贸n en el tipado que lo hace muy similar al tipado din谩mico. Pero la posibilidad de crear nuevos tipos, ya no s贸lo de objetos, si no tambi茅n a partir de funciones o de &lt;em&gt;patrones de c贸digo&lt;/em&gt;, consigue interfaces m谩s robustos y que sea el compilador quien optimize el c贸digo, antes de su&amp;nbsp;ejecuci贸n.&lt;/p&gt;
&lt;p&gt;As铆 que tenemos que scala es funcional, con un potente sistema de tipos y, adem谩s, 100% compatible con Java. 驴Se puede pedir algo&amp;nbsp;m谩s?&lt;/p&gt;
&lt;p&gt;Pues s铆. Incorpora el llamado modelo &lt;em&gt;Actor&lt;/em&gt; para programaci贸n concurrente. Con los actores, en lugar de compartir un espacio com煤n de memoria entre los distintos procesos concurrentes, se establece un sistema de mensajes que son enviados y recibidos. Este modelo se ha mostrado bastante eficaz en sistemas de alta demanda como son algunas webs como twitter o&amp;nbsp;linkedin.&lt;/p&gt;
&lt;p&gt;En cuanto a la sint谩xis, scala tambi茅n posee algunas normas relajadas para la creaci贸n de DSLs muy similar a lo que se ve en Groovy. Algunos lenguajes &lt;span class="caps"&gt;DSL&lt;/span&gt; se usan en &lt;em&gt;frameworks&lt;/em&gt; de creaci贸n webs, como Play2, o para crear conjuntos de pruebas&amp;nbsp;(ScalaUnit).&lt;/p&gt;
&lt;h2&gt;Conclusi贸n&lt;/h2&gt;
&lt;p&gt;Espero que te haya convencido para que eches un vistazo a algunos de estos lenguajes, aunque los tres sean altamente recomendables. Si tuviera que resumir en pocas l铆neas lo dicho hasta ahora, ser铆a&amp;nbsp;as铆:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Python: navaja suiza de los lenguajes. Sirve para todo y est谩 presente en cualquier sitio. Es un compendio de sabidur铆a para hacer las cosas de la mejor forma, a煤n sin&amp;nbsp;propon茅rtelo.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Lua: lenguaje minimalista. Ayuda a comprender mejor algunos conceptos de programaci贸n. Es el lenguaje que me gustar铆a que tuviera todo navegador en lugar de&amp;nbsp;javascript.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Scala: funcional y con potente sistema de tipos. Su implementaci贸n del modelo actor lo hace id贸neo para la creaci贸n de sistemas de alta demanda de&amp;nbsp;accesos.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</content><category term="Pensamientos"></category><category term="python"></category><category term="scala"></category><category term="lua"></category><category term="programming-languages"></category></entry><entry><title>De GeneracionesPerdidas</title><link href="https://blog.ch3m4.org/2013/03/31/de-generaciones-perdidas/" rel="alternate"></link><published>2013-03-31T15:15:00+02:00</published><updated>2013-03-31T15:15:00+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2013-03-31:/2013/03/31/de-generaciones-perdidas/</id><summary type="html">&lt;p&gt;All谩 por los 80, en Zaragoza, cuando internet era tan s贸lo la &lt;code&gt;i&lt;/code&gt; del
protocolo &lt;span class="caps"&gt;TCP&lt;/span&gt;/&lt;span class="caps"&gt;IP&lt;/span&gt; y los meros mortales se apa帽aban con sus modems para
acceder a alguna &lt;span class="caps"&gt;BBS&lt;/span&gt; local, y donde la 煤nica autopista de la informaci贸n
consist铆a en una cinta semanal de 200 &lt;span class="caps"&gt;MB&lt;/span&gt;. que llegaba &lt;/p&gt;</summary><content type="html">&lt;p&gt;All谩 por los 80, en Zaragoza, cuando internet era tan s贸lo la &lt;code&gt;i&lt;/code&gt; del
protocolo &lt;span class="caps"&gt;TCP&lt;/span&gt;/&lt;span class="caps"&gt;IP&lt;/span&gt; y los meros mortales se apa帽aban con sus modems para
acceder a alguna &lt;span class="caps"&gt;BBS&lt;/span&gt; local, y donde la 煤nica autopista de la informaci贸n
consist铆a en una cinta semanal de 200 &lt;span class="caps"&gt;MB&lt;/span&gt;. que llegaba desde el &lt;span class="caps"&gt;CERN&lt;/span&gt; de
Ginebra, exist铆a un grupo de &lt;em&gt;hackers&lt;/em&gt;, en el buen sentido de la
palabra&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1"&gt;1&lt;/a&gt;&lt;/sup&gt;, que abarrotaban las pocas salas de inform谩tica que ten铆a
la Universidad de Zaragoza. No exist铆an ense帽anza de inform谩tica y los
conocimientos er谩n compartidos entre todos sin&amp;nbsp;reservas.&lt;/p&gt;
&lt;p&gt;Fue una 茅poca convulsa, presagio de los cambios que iban a venir y que
lo cambiar铆an todo. Luchas por el espacio cybern茅tico, espionaje y
contraespionaje, virus y antivirus,&amp;#8230;un mundo cruel que qued贸 atr谩s y
que origin贸 una &amp;#8220;generaci贸n perdida&amp;#8221;, una de tantas, pero de un nivel
tecnol贸gico sin parag贸n que hizo puntera a Zaragoza y de la que muy
pocos tienen siquiera una m铆nima noci贸n de su&amp;nbsp;existencia.&lt;/p&gt;
&lt;p&gt;A veces me he preguntado si valdr铆a la pena dar a conocer a esta
generaci贸n y todo lo que hicieron. Pero sus integrantes, una vez
rehechas sus vidas ajenas a la universidad, incluso dejando sus estudios
en la cuneta, callan y no parece que deseen que se hable del tema. No
esperes que yo lo haga aqu铆, pero si quieres una peque帽a muestra de lo
que pas贸 existe una serie de historias contadas en el libro &lt;em&gt;&amp;#8220;Sue帽os
Electr贸nicos. Emprendedores en la Red&amp;#8221;&lt;/em&gt; de Jos茅 Carlos Arnal (&lt;a href="http://www.casadellibro.com/libro-suenos-electronicos-emprendedores-en-la-red/9788483241172/817995"&gt;&lt;span class="caps"&gt;ISBN&lt;/span&gt;:9788483241172&lt;/a&gt;) que puede darte una buena idea, aunque incompleta.
Como se suele decir, &lt;em&gt;&amp;#8220;existen dos tipos de hackers: los buenos y los
famosos&amp;#8221;&lt;/em&gt;. Si a 谩lguien le interesa el tema, que lea este libro, porque
de los buenos hackers nunca se&amp;nbsp;hablar谩.&lt;/p&gt;
&lt;p&gt;En este pa铆s nunca aprenderemos. Ya sea por guerras, conflictos
pol铆ticos o por la avarienta corrupci贸n, seguimos quemando generaciones
en la gran pira de calamidades inevitables en la que se ha convertido la
historia de Espa帽a. Sirva este art铆culo como callado homenaje a esta
&lt;em&gt;De-Generaci贸n Perdida&lt;/em&gt; junto con el que &lt;a href="http://qlio.blogspot.com.es/2012/01/jakers-finales-de-los-80s-en-zaragoza.html"&gt;escribi贸 Gaudi en su bit谩cora&lt;/a&gt; hace ya un&amp;nbsp;a帽o.  &lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Extraer conocimientos a trav茅s de la tecnolog铆a.&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</content><category term="Pensamientos"></category></entry><entry><title>Mutable o inmutable, he ah铆 eldilema</title><link href="https://blog.ch3m4.org/2013/03/22/mutable-o-inmutable-he-ahi-el-dilema/" rel="alternate"></link><published>2013-03-22T22:02:00+01:00</published><updated>2018-07-25T01:09:30+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2013-03-22:/2013/03/22/mutable-o-inmutable-he-ahi-el-dilema/</id><summary type="html">&lt;div class="admonition info"&gt;
&lt;p class="admonition-title"&gt;Info&lt;/p&gt;
&lt;p&gt;Disponible tambi茅n como &lt;a href="http://nbviewer.jupyter.org/5224623"&gt;ipynb&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Quien se enfrenta a la documentaci贸n de python por primera vez se pregunta porqu茅 esa insistencia en mantener tipos de datos duplicados en versiones mutables e inmutables. Tenemos listas y tuplas que casi hacen lo mismo. En python3, tenemos el tipo inmutable &lt;code&gt;bytes&lt;/code&gt; y el &lt;/p&gt;</summary><content type="html">&lt;div class="admonition info"&gt;
&lt;p class="admonition-title"&gt;Info&lt;/p&gt;
&lt;p&gt;Disponible tambi茅n como &lt;a href="http://nbviewer.jupyter.org/5224623"&gt;ipynb&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Quien se enfrenta a la documentaci贸n de python por primera vez se pregunta porqu茅 esa insistencia en mantener tipos de datos duplicados en versiones mutables e inmutables. Tenemos listas y tuplas que casi hacen lo mismo. En python3, tenemos el tipo inmutable &lt;code&gt;bytes&lt;/code&gt; y el mutable &lt;code&gt;bytearray&lt;/code&gt;. 驴Qu茅 sentido tiene tener &lt;em&gt;&amp;#8220;duplicados&amp;#8221;&lt;/em&gt; algunos tipos en sus dos versiones? La 煤nica explicaci贸n que se puede encontrar en la documentaci贸n es que los tipos inmutables son m谩s apropiados para usarlos como 铆ndices en diccionarios. No parece mucha ventaja para la complejidad que&amp;nbsp;aporta.&lt;/p&gt;
&lt;p&gt;En este art铆culo veremos qu茅 implica la &lt;em&gt;mutabilidad&lt;/em&gt; de un tipo de dato y en qu茅 puede sernos 煤til usar un tipo mutable u otro&amp;nbsp;inmutable.&lt;/p&gt;
&lt;h2&gt;驴Qu茅 es lo que&amp;nbsp;cambia?&lt;/h2&gt;
&lt;p&gt;Antes de explicar nada, veamos si somos capaces de saber qu茅 est谩 cambiando. Veamos dos c贸digos muy&amp;nbsp;similares:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Parece que ambos c贸digos hagan lo mismo: a帽adir un fragmento, en sus versiones tupla y lista, respectivamente. Vamos a analizarlo mejor. Para saber qu茅 pasa, usemos la funci贸n &lt;code&gt;id()&lt;/code&gt;. Esta funci贸n devuelve un identificador de un objeto de tal modo que si dos objetos tienen el mismo identificador, entonces son el mismo&amp;nbsp;objeto.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="mi"&gt;192021604&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="mi"&gt;189519828&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="mi"&gt;189780876&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="mi"&gt;189780876&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;En la versi贸n tupla, se ha creado una nueva tupla para realizar la operaci贸n, mientras que en la versi贸n lista se ha usado la misma lista, modific谩ndose con el resultado. Si cambiamos el operador &lt;code&gt;+=&lt;/code&gt; por una versi贸n m谩s expl铆cita tal vez se vea&amp;nbsp;mejor:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;extend&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Al operar con tuplas, los operandos no cambian de valor, cre谩ndose una nueva tupla como resultado de la operaci贸n. Podr铆amos sustituir toda la operaci贸n por el resultado final y el c贸digo funcionar铆a igual. En el caso de las listas, la lista se modifica &lt;em&gt;&amp;#8220;in situ&amp;#8221;&lt;/em&gt; durante la operaci贸n. En estos casos, cambiar la expresi贸n por el resultado final no garantiza que el programa funcione igual. Se necesita pasar por todos y cada uno de los estados intermedios para asegurar que todo funcione&amp;nbsp;igual.&lt;/p&gt;
&lt;p&gt;Esta propiedad de poder cambiar una expresi贸n por su resultado final es conocida por &lt;a href="http://en.wikipedia.org/wiki/Referential_transparency_(computer_science)" title="Referential Transparency"&gt;Transparencia referencial&lt;/a&gt; en programaci贸n funcional. Por lo general, los tipos inmutables se adec煤an mejor a operaciones de c谩lculo donde el resultado final depende 煤nicamente de los argumentos de entrada. Por otro lado, los tipos mutables son 煤tiles para salvaguardar estados intermedios necesarios para la toma de decisiones durante la ejecuci贸n de un&amp;nbsp;programa.&lt;/p&gt;
&lt;p&gt;Por lo general, se saber elegir un tipo mutable o su hom贸logo inmutable es todo un arte. Ante la duda, los tipos inmutables son m谩s f谩ciles de rastrear. As铆 mismo, veremos en pr贸ximos art铆culos que los tipos inmutables ayudan bastante en programaci贸n concurrente, por si est谩s pensando en programaci贸n&amp;nbsp;multiproceso.&lt;/p&gt;
&lt;h2&gt;Ejemplos de tipos&amp;nbsp;propios&lt;/h2&gt;
&lt;p&gt;La mutabilidad e inmutabilidad va m谩s all谩 de los tipos est谩ndar de python. Nosotros mismos podemos hacer nuestras propias clases mutables o inmutables, seg煤n nuestras&amp;nbsp;necesidades.&lt;/p&gt;
&lt;p&gt;Pongamos que creamos una clase &lt;code&gt;Point&lt;/code&gt; para definir puntos, junto con unas sencillas operaciones para sumar, restar y desplazar. Nuestra idea es poder usar estos objetos en expresiones, por lo que es pr谩ctica com煤n que toda operaci贸n devuelva el resultado como un punto para seguir encadenando&amp;nbsp;operaciones.&lt;/p&gt;
&lt;p&gt;Una versi贸n &lt;em&gt;&amp;#8220;mutable&amp;#8221;&lt;/em&gt; del objeto ser铆a&amp;nbsp;as铆:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;PointMutable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__repr__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;lt;Point(&lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s2"&gt;)&amp;gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__sub__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;other&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;-=&lt;/span&gt; &lt;span class="n"&gt;other&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;-=&lt;/span&gt; &lt;span class="n"&gt;other&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__add__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;other&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;other&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;other&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;move&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dx&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dy&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;dx&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;dy&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;En todas las operaciones, operamos el objeto consigo mismo y lo retornamos como resultados. Si probamos, vemos que no funciona tal como se&amp;nbsp;esperaba:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;PointMutable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;PointMutable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;move&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;move&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Point&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Devuelve &lt;code&gt;&amp;lt;Point&amp;lt;0,0&amp;gt;&lt;/code&gt; independientemente de los valores iniciales y de los desplazamientos que demos. Al ser nuestro objeto mutable, cada operaci贸n lo va cambiando. Al final, toda la expresi贸n se reduce a una simple resta &lt;code&gt;p1-p1&lt;/code&gt;, que ser铆a la 煤ltima operaci贸n y que da siempre &lt;code&gt;&amp;lt;Point(0,0)&amp;gt;&lt;/code&gt;. No parece que sea el resultado&amp;nbsp;esperado.&lt;/p&gt;
&lt;p&gt;Debemos adoptar una t谩ctica m谩s defensiva: el objeto nunca debe cambiar durante el c谩lculo. Como resultado de cada operaci贸n deberemos devolver una nueva instancia y que el estado de 茅sta, o sea, sus atributos, no se alteren a lo largo del&amp;nbsp;c谩lculo:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;PointInmutable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__repr__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;lt;Point(&lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s2"&gt;)&amp;gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__sub__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;other&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;PointInmutable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;other&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;other&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__add__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;other&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;PointInmutable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;other&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;other&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;move&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dx&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dy&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;PointInmutable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;dx&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;dy&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;PointInmutable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;PointInmutable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;move&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;move&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Point&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Siendo perfeccionistas, deber铆amos blindar mejor los atributos de la clase para hacerlos de &lt;em&gt;s贸lo lectura&lt;/em&gt; mediante &lt;code&gt;properties&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;En este ejemplo hemos podido ver los resultados imprevisibles que podemos tener si abusamos de la mutabilidad. Estos problemas se ven incrementados si hubiera varios hilos de ejecuci贸n y cada hilo estuviera modificando las mismas variables comunes. Lamentablemente, es un caso bastante com煤n debido a una mala previsi贸n a la hora de iniciar un proyecto de desarrollo. Pero 茅sto lo veremos en un pr贸ximo&amp;nbsp;art铆culo.&lt;/p&gt;</content><category term="Python"></category></entry><entry><title>Mutabilidad deListas</title><link href="https://blog.ch3m4.org/2013/03/16/mutabilidad-de-listas/" rel="alternate"></link><published>2013-03-16T15:53:00+01:00</published><updated>2019-04-07T21:14:30+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2013-03-16:/2013/03/16/mutabilidad-de-listas/</id><summary type="html">&lt;div class="admonition info"&gt;
&lt;p class="admonition-title"&gt;Info&lt;/p&gt;
&lt;p&gt;Puedes visionar este art铆culo y descarg谩rtelo como notebook ipython en &lt;a href="http://nbviewer.jupyter.org/5177340"&gt;http://nbviewer.jupyter.org/5177340&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Mucha gente, cuando se enfrenta por primera vez al lenguaje python, no entiende bien el concepto de &lt;em&gt;&amp;#8220;inmutabilidad&amp;#8221;&lt;/em&gt; que tanto repite la documentaci贸n al tratar de diferenciar algunos tipos contenedores como tuplas, listas, conjuntos &lt;/p&gt;</summary><content type="html">&lt;div class="admonition info"&gt;
&lt;p class="admonition-title"&gt;Info&lt;/p&gt;
&lt;p&gt;Puedes visionar este art铆culo y descarg谩rtelo como notebook ipython en &lt;a href="http://nbviewer.jupyter.org/5177340"&gt;http://nbviewer.jupyter.org/5177340&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Mucha gente, cuando se enfrenta por primera vez al lenguaje python, no entiende bien el concepto de &lt;em&gt;&amp;#8220;inmutabilidad&amp;#8221;&lt;/em&gt; que tanto repite la documentaci贸n al tratar de diferenciar algunos tipos contenedores como tuplas, listas, conjuntos y&amp;nbsp;diccionarios.&lt;/p&gt;
&lt;p&gt;Por lo general, la gente formada en lenguajes de programaci贸n cl谩sicos tiene la idea de que las variables son porciones de memoria donde colocar valores. Que una variable no se 茅so, &lt;em&gt;variable&lt;/em&gt;, resulta un contrasentido. Han visto &lt;em&gt;constantes&lt;/em&gt;, pero s贸lo sirven para inicializar variables y poco m谩s. Si en su carrera hubieran sido formados en alg煤n lenguaje funcional se dar铆an cuenta que hay quienes piensan que las variables que cambian de valor son las raras, que lo m谩s natural es que una variable conserve su valor inicial, o sea, que sea&amp;nbsp;inmutable.&lt;/p&gt;
&lt;p&gt;Por poner un ejemplo, el siguiente c贸digo est谩 basado en una pregunta reciente en la lista &lt;a href="http://docs.python.org/3.3/library/copy.html" title="M贸dulo copy"&gt;python-es&lt;/a&gt;. Tenemos una lista de pares y queremos quitar las parejas repetidas con orden&amp;nbsp;cambiado:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;quitar_dup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lista&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;

    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;lista&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

        &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reverse&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;lista&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;lista&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;remove&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;lista&lt;/span&gt;

&lt;span class="n"&gt;L&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;quitar_dup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;L&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;#res: [[1, 3], [3, 1]]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;A simple vista, el c贸digo parece correcto, pero tenemos dos operaciones que pueden mutar listas: &lt;code&gt;.reverse()&lt;/code&gt; y &lt;code&gt;.remove()&lt;/code&gt;. De hecho, el resultado es incorrecto: &lt;code&gt;[[1, 3], [3, 1]]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;A medida que recorremos la lista en el bucle &lt;code&gt;for&lt;/code&gt;, la lista se va modificando, lo que da lugar a resultados inesperados. Si no lo ves bien, basta a帽adir algunos &lt;code&gt;prints&lt;/code&gt; en lugares estrat茅gicos para que comprobar lo que pasa. De hecho, s贸lo existen dos iteraciones para cuatro elementos que tiene la&amp;nbsp;lista.&lt;/p&gt;
&lt;p&gt;Otro tipo de casos son cuando pasamos listas a&amp;nbsp;funciones:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;   &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;     &lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;   &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;L&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;L&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;L&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;L&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Como efecto colateral, la funci贸n ha modificado la lista pasada como argumento, algo que no es siempre deseable. El problema se agrava m谩s si empleamos listas en valores por&amp;nbsp;defecto:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[]):&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;   &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;     &lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;   &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[])&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Como se puede ver, aunque intentemos &lt;em&gt;resetear&lt;/em&gt; el valor por defecto, la funci贸n tiene un efecto memoria que es imposible de eliminar. Este efecto es a veces buscado, pero en general debe ser siempre evitado ya que desvirt煤a el sentido que tiene dar valores por&amp;nbsp;defecto.&lt;/p&gt;
&lt;p&gt;Estos efectos son todav铆a m谩s perniciosos con la &lt;em&gt;funciones lambda&lt;/em&gt;. Al carecer de una &lt;em&gt;clausura&lt;/em&gt; como las funciones, la evaluaci贸n de una funci贸n lambda depende del &lt;em&gt;scope&lt;/em&gt; donde han sido definidas. Por ejemplo, observa esta creaci贸n de una lista de&amp;nbsp;funciones:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;fns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;fns&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;fns&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;](&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;fns&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;](&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Siempre a帽ade &lt;code&gt;4&lt;/code&gt; al argumento, que es el valor de &lt;code&gt;i&lt;/code&gt; al acabar el bucle, independientemente de qu茅 valor ten铆a esta variable en el momento de crear la funci贸n lambda. No es de extra帽ar que se recomiende dejar de usar estas&amp;nbsp;funciones.&lt;/p&gt;
&lt;p&gt;Por 煤ltimo, otro efecto funesto de la mutabilidad de las listas aparece en la creaci贸n de &lt;em&gt;listas multidimensionales&lt;/em&gt; (aka &lt;em&gt;matrices&lt;/em&gt;). Una forma r谩pida de crear una matriz de 2x2 es: &lt;code&gt;[[0]*2]*2&lt;/code&gt;. El problema aqu铆 est谩 en que cuando clonamos listas, en lugar de copiar los elementos, los enlaza entre s铆. Quiz谩s se vea mejor si hacemos alguna&amp;nbsp;operaci贸n:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; l = [[0]*2]*2
[[0, 0], [0, 0]]
&amp;gt;&amp;gt;&amp;gt; l[0][0]
0
&amp;gt;&amp;gt;&amp;gt; l[0][0] = 1
&amp;gt;&amp;gt;&amp;gt; l
[[1, 0], [1, 0]]
&amp;gt;&amp;gt;&amp;gt; l[0] is l[1]
True
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Los elementos &lt;code&gt;l[0]&lt;/code&gt; y &lt;code&gt;l[1]&lt;/code&gt; son el mismo elemento. Que los elementos de una lista puedan estar &lt;em&gt;entrelazados&lt;/em&gt; resulta muy interante para algunos algoritmos de b煤squedas. Pero hay que conocer bien lo que estamos haciendo si no queremos llevarnos alguna&amp;nbsp;sorpresa.&lt;/p&gt;
&lt;h2&gt;Recomendaciones para hacer c贸digo&amp;nbsp;funcional&lt;/h2&gt;
&lt;h3&gt;Copia de&amp;nbsp;listas&lt;/h3&gt;
&lt;p&gt;En funciones y m茅todos, si recibimos una lista como argumento, la primera acci贸n defensiva que deber铆amos hacer es copiar la lista en una variable local y trabajar solo con la variable local desde ese momento. Con una asignaci贸n directa no se realiza una copia, m谩s bien estar铆amos &lt;em&gt;enlazando&lt;/em&gt; una nueva referenciasin solucionar&amp;nbsp;nada.&lt;/p&gt;
&lt;p&gt;La forma consensuada entre programadores python de copiar una lista es con la operaci贸n de &lt;em&gt;spliting&lt;/em&gt; &lt;code&gt;L[:]&lt;/code&gt;, aunque sirven otras operaciones idempotentes como &lt;code&gt;L*1&lt;/code&gt; 贸 &lt;code&gt;L+[]&lt;/code&gt;&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1"&gt;1&lt;/a&gt;&lt;/sup&gt;. Para listas de elementos entrelazados tendremos que acudir a otros mecanismos de copia como los que ofrece el &lt;a href="http://docs.python.org/3.3/library/copy.html" title="M贸dulo copy"&gt;m贸dulo &lt;code&gt;copy&lt;/code&gt;&lt;/a&gt;, aunque no ser谩 frecuente que lo&amp;nbsp;necesitemos.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lista&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;lista&lt;/span&gt;&lt;span class="p"&gt;[:]&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;En cuanto a los argumentos por defecto, lo mejor es no usar nunca una lista para tal cosa. Una buena estrategia defensiva consiste en usar &lt;code&gt;None&lt;/code&gt; de esta&amp;nbsp;forma:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lista&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;lista&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="kc"&gt;None&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="n"&gt;lista&lt;/span&gt;&lt;span class="p"&gt;[:]&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h3&gt;Operaciones inmutables con&amp;nbsp;listas&lt;/h3&gt;
&lt;p&gt;En cuanto a evitar las operaciones que mutan listas, siempre hay alternativas inmutables de todas estas operaciones. El siguiente cuadro puede servir como&amp;nbsp;referencia:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Mutable&lt;/th&gt;
&lt;th&gt;Inmutable&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;L.append(item)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;L+[item]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;L.extend(sequence)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;L + list(sequence)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;L.insert(index, item)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;L[:index] + [item] + L[index:]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;L.reverse()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;L[::-1]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;L.sort()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;sorted(L)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;item = L.pop()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;item,L = L[-1],L[:-1]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;item = L.pop(0)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;item,L = L[0],L[1:]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;item = L.pop(index)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;item, L = L[item], L[:item]+L[item+1:]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;L.remove(item)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;L=L[:item]+L[item+1:]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;L[i:j] = K&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;L[:i] + K + L[j:]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;A la hora de decidir qu茅 versi贸n usar, la versi贸n inmutable es m谩s apropiada para programaci贸n funcional y resulta incluos m谩s intuitiva de interpretar. No es extra帽o ver errores de c贸digo donde se espera resultados de las operaciones &lt;code&gt;.sort()&lt;/code&gt; o &lt;code&gt;.reverse()&lt;/code&gt;, que siempre devuelven &lt;code&gt;None&lt;/code&gt;. Para el int茅rprete de python no hay error, pero a veces nos ser谩 dif铆cil darnos cuenta de estos&amp;nbsp;errores:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;span class="caps"&gt;MODO&lt;/span&gt; ERRNEO: machacamos la lista con&amp;nbsp;None&lt;/em&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;l_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sort&lt;/span&gt;&lt;span class="p"&gt;()]&lt;/span&gt;
&lt;span class="n"&gt;Traceback&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;most&lt;/span&gt; &lt;span class="n"&gt;recent&lt;/span&gt; &lt;span class="n"&gt;call&lt;/span&gt; &lt;span class="n"&gt;last&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;lt;stdin&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;module&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="ne"&gt;TypeError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;NoneType&amp;#39;&lt;/span&gt; &lt;span class="nb"&gt;object&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;iterable&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;&lt;em&gt;&lt;span class="caps"&gt;MODO&lt;/span&gt; &lt;span class="caps"&gt;CORRECTO&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;l_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;sorted&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;l_2&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;25&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;div class="footnote"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;De hecho, la operaci贸n &lt;code&gt;L*1&lt;/code&gt; es m谩s eficiente que &lt;code&gt;L[:]&lt;/code&gt;.&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</content><category term="Python"></category></entry><entry><title>Dobleces enpython</title><link href="https://blog.ch3m4.org/2013/02/27/dobleces-en-python/" rel="alternate"></link><published>2013-02-27T21:39:00+01:00</published><updated>2013-02-27T21:39:00+01:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2013-02-27:/2013/02/27/dobleces-en-python/</id><summary type="html">&lt;p&gt;En el &lt;a href="https://blog.ch3m4.org/2013/02/21/collage-vs-origami/" title="Collage vs. Origami"&gt;煤ltimo art铆culo&lt;/a&gt; del blog contaba en qu茅 consist铆a &lt;em&gt;doblar c贸digo&lt;/em&gt;&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1"&gt;1&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;span class="dquo"&gt;&amp;#8220;&lt;/span&gt;&amp;#8230;un c贸digo que se pliega sobre s铆 mismo. Un c贸digo que te
lleva desde un principio a un final por el camino m谩s&amp;nbsp;corto.&amp;#8221;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Para ilustrar este concepto voy a usar un trozo de c贸digo python que &lt;/p&gt;</summary><content type="html">&lt;p&gt;En el &lt;a href="https://blog.ch3m4.org/2013/02/21/collage-vs-origami/" title="Collage vs. Origami"&gt;煤ltimo art铆culo&lt;/a&gt; del blog contaba en qu茅 consist铆a &lt;em&gt;doblar c贸digo&lt;/em&gt;&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1"&gt;1&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;span class="dquo"&gt;&amp;#8220;&lt;/span&gt;&amp;#8230;un c贸digo que se pliega sobre s铆 mismo. Un c贸digo que te
lleva desde un principio a un final por el camino m谩s&amp;nbsp;corto.&amp;#8221;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Para ilustrar este concepto voy a usar un trozo de c贸digo python que se ve frecuentemente entre los programadores reci茅n llegados de otros&amp;nbsp;lenguajes:&lt;/p&gt;
&lt;p&gt;&lt;sub&gt;&lt;em&gt;&lt;span class="caps"&gt;NOTA&lt;/span&gt;: se usar谩 python 3.x para los siguientes ejemplos&lt;/em&gt;&lt;/sub&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;listar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot; 5d&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;

&lt;span class="n"&gt;fich&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;fichero.txt&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;lineas&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;fich&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;readlines&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;listar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lineas&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Resumen: se define una funci贸n para imprimir en pantalla la lista de l铆neas le铆das de un fichero, precedidas con el n煤mero de caracteres que tiene la&amp;nbsp;l铆nea.&lt;/p&gt;
&lt;p&gt;Quien tenga algo de experiencia con python seguramente vea raro este c贸digo, incluso lo califique como &lt;em&gt;&amp;#8220;poco pyth贸nico&amp;#8221;&lt;/em&gt;. Nombrar a la funci贸n &lt;code&gt;listar&lt;/code&gt;, como verbo, es se帽al de que el programador proviene de un lenguaje de &lt;em&gt;programaci贸n imperativo&lt;/em&gt;. El programador ha buscado en python las mismas estructuras de control que ten铆a en su lenguaje de origen y s贸lo ha encontrado familiar la estructura &lt;code&gt;while&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Rebuscando un poco m谩s, tal vez encuentre c贸mo se usan los bucles &lt;code&gt;for&lt;/code&gt; en&amp;nbsp;python:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;listar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot; 5d&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Un bucle &lt;code&gt;for&lt;/code&gt; se caracteriza por concentrar en una sentencia todo el control del bucle, una gran ayuda visual para quien vaya a leer este c贸digo. La variable de control solo se modifica en la sentencia &lt;code&gt;for&lt;/code&gt;, lo que evita&amp;nbsp;errores.&lt;/p&gt;
&lt;p&gt;Analizando m谩s detenidamente, el bucle &lt;code&gt;for&lt;/code&gt; itera sobre una secuencia de enteros dada por &lt;code&gt;range(0,num)&lt;/code&gt;, de donde se sacan los 铆ndices con los que acceder a cada elemento de la lista &lt;code&gt;args&lt;/code&gt;. sta ser铆a la visi贸n cl谩sica de c贸mo operar con &lt;code&gt;arrays&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Pero esta visi贸n ha evolucionado con el tiempo hasta llegar al concepto de &lt;em&gt;&amp;#8220;Colecci贸n&amp;#8221;&lt;/em&gt; que ya poseen casi todos los lenguajes, bien en su sintaxis, bien como librer铆a est谩ndar. Una &lt;em&gt;&amp;#8220;Colecci贸n&amp;#8221;&lt;/em&gt; consiste en un grupo de objetos sobre los que puede iterar. &lt;code&gt;range(0,num)&lt;/code&gt; ser铆a una colecci贸n ordenada de n煤meros. El siguiente paso a dar ser铆a iterar directamente sobre la&amp;nbsp;lista:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;listar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot; 5d&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Con este c贸digo hemos conseguido un doble objetivo, mejorar la legibilidad y darle m谩s robustez al despreocuparnos por los 铆ndices de acceso. Los 铆ndices de acceso fuera de l铆mites suelen ser origen de multitud de&amp;nbsp;errores.&lt;/p&gt;
&lt;p&gt;Pero tenemos algo m谩s: al no usar 铆ndices hemos generalizado el uso de la funci贸n por cualquier secuencia, generador o &lt;a href="http://docs.python.org/3/library/stdtypes.html#iterator-types" title="Tipo iterador"&gt;iterador&lt;/a&gt;. Concretamente, los objetos &lt;code&gt;files&lt;/code&gt; cumplen con el protocolo iterador, por lo que ser铆a posible pasarlo directamente a esta funci贸n sin necesidad de volcar todas las l铆neas del fichero a una&amp;nbsp;lista:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;listar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;it&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;it&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot; 5d&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;listar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;fichero.txt&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Con este 煤ltimo doblez hemos ganado concisi贸n. Pero sobre hemos ahorrado recursos ya que no necesitamos leer todo el fichero en memoria. La lectura del fichero se har谩 progresivamente en el momento que se solicite la siguiente l铆nea, por lo que este c贸digo deber铆a funcionar incluso con ficheros enormes, independiente de la cantidad de memoria disponible. S贸lo se emplear谩 la memoria suficiente para cachear una pocas l铆neas para ir renov谩ndolas a medida que se prosiga la lectura del&amp;nbsp;fichero.&lt;/p&gt;
&lt;p&gt;Es un buen momento para comparar esta versi贸n del c贸digo con la original de la que hemos&amp;nbsp;partido.&lt;/p&gt;
&lt;h2&gt;Programaci贸n&amp;nbsp;Funcional&lt;/h2&gt;
&lt;p&gt;Entre doblez y doblez, hemos perdido algunas variables intermedias superfluas. Esta &lt;em&gt;man铆a&lt;/em&gt; por deshacerse de variables intermedias es se帽al de estar aproxim谩ndonos a un estilo de &lt;em&gt;programaci贸n funcional&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Una posible definici贸n de &lt;em&gt;&amp;#8220;Programaci贸n Funcional&amp;#8221;&lt;/em&gt; ser铆a como &lt;em&gt;aquella programaci贸n que difiere la evaluaci贸n de una expresi贸n hasta el momento 煤ltimo en el que se vaya a usar su valor&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Para este prop贸sito, la expresi贸n no puede depender de factores externos como variables globales o cambios de estado. No sabemos cu谩ndo ser谩 evaluada una expresi贸n. Lo 煤nico posible es hacer depender el resultado de una expresi贸n en funci贸n del valor de otra, lo que se conoce por &lt;em&gt;&amp;#8220;Composici贸n de funciones&amp;#8221;&lt;/em&gt; (y de ah铆 el nombre de programaci贸n&amp;nbsp;funcional).&lt;/p&gt;
&lt;p&gt;Este modo de diferir la evaluaci贸n es lo que hicimos con el iterador fichero, cuyas l铆neas no se le铆an hasta el momento preciso. La pregunta es 驴podemos mejorar la orientaci贸n funcional de nuestro&amp;nbsp;c贸digo?&lt;/p&gt;
&lt;p&gt;La funci贸n &lt;code&gt;listar&lt;/code&gt; no devuelve nada, tan s贸lo busca un efecto colateral. Es lo que se conoce en otros lenguajes como &lt;em&gt;&amp;#8220;procedimiento&amp;#8221;&lt;/em&gt; (&lt;em&gt;procedure&lt;/em&gt;). En nuestra met谩fora de &amp;#8220;pliegues&amp;#8221;, una funci贸n que no devuelve nada la podr铆amos considerar como un &amp;#8220;corte&amp;#8221;, ya que no podemos hacer nada m谩s a partir de&amp;nbsp;aqu铆.&lt;/p&gt;
&lt;p&gt;驴Qu茅 pasar铆a si queremos cambiar la l铆nea que se imprime en pantalla? 驴Y si queremos parar despu茅s de imprimir un n煤mero de l铆neas? En este punto, lo mejor es &amp;#8220;desdoblar&amp;#8221; el c贸digo y darle una orientaci贸n m谩s&amp;nbsp;funcional:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;itertools&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;islice&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;lineas&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;it&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;it&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;yield&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;{: 5d}&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="n"&gt;it&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;lineas&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pr.py&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;islice&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;it&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;|&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;La funci贸n &lt;code&gt;listar&lt;/code&gt; ha pasado a ser el iterador &lt;code&gt;lineas&lt;/code&gt; que retorna las l铆neas ya formateadas. Asimismo, se ha cambiado la funci贸n &lt;code&gt;format&lt;/code&gt; por el m茅todo &lt;code&gt;format&lt;/code&gt; de los &lt;code&gt;strings&lt;/code&gt; con el que se pueden formatear mejor varios valores a la vez. La impresi贸n de las l铆neas en pantalla se deja para el 煤ltimo momento, cuando se necesita ver el resultado. Es en este momento cuando se decide cu谩ntas l铆neas se van a imprimir, que es lo que hace el &lt;code&gt;islice&lt;/code&gt; acortando el iterador &lt;code&gt;lineas&lt;/code&gt; a 5 iteraciones. Tambi茅n se usa el iterador &lt;code&gt;enumerate&lt;/code&gt; para ir enumerando las l铆neas a medida que las&amp;nbsp;obtenemos.&lt;/p&gt;
&lt;p&gt;Como se ve, una orientaci贸n funcional permite encadenar varias operaciones sin necesidad de mantener estados intermedios&lt;sup id="fnref:2"&gt;&lt;a class="footnote-ref" href="#fn:2"&gt;2&lt;/a&gt;&lt;/sup&gt;. Adem谩s de lo que supone de ahorro de recursos, no tener que mantener un contexto con los estados intermedios har谩 m谩s sencillo migrar la ejecuci贸n de un proceso a otro en programaci贸n concurrente (eg: &lt;em&gt;multihilo&lt;/em&gt;). Hoy en d铆a, tal como evolucionan los ordenadores, quien no programe pensando en la ejecuci贸n concurrente terminar谩 programando dos&amp;nbsp;veces.&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Puede que prefieras usar el t茅rmino &lt;a href="http://es.wikipedia.org/wiki/Refactorizaci贸n" title="Refactorizaci贸n"&gt;&lt;em&gt;&amp;#8220;refactorizar&amp;#8221;&lt;/em&gt;&lt;/a&gt;, pero he pensado que es mejor dejar este t茅rmino para la programaci贸n orientada a objeto y usar &lt;em&gt;&amp;#8220;doblez&amp;#8221;&lt;/em&gt; para dar una idea m谩s af铆n a la programaci贸n funcional.&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;En realidad, no es del todo cierto que la funci贸n no dependa de estados externos ya que el iterador &lt;code&gt;it&lt;/code&gt; que hemos pasado como argumento podr铆a cambiar externamente entre iteraciones.&amp;#160;&lt;a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</content><category term="Python"></category></entry><entry><title>Collage vs.Origami</title><link href="https://blog.ch3m4.org/2013/02/21/collage-vs-origami/" rel="alternate"></link><published>2013-02-21T22:09:00+01:00</published><updated>2013-02-21T22:09:00+01:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2013-02-21:/2013/02/21/collage-vs-origami/</id><summary type="html">&lt;p&gt;En mis a帽os como programador he visto mucho c贸digo. Lo suficiente como para saber qu茅 estilo tiene el programador que lo escribe, cu谩les son sus vicios y cu谩les son sus errores de&amp;nbsp;concepto.&lt;/p&gt;
&lt;p&gt;Nos resulta imposible definir conceptos como &lt;em&gt;&amp;#8220;elegancia&amp;#8221;&lt;/em&gt; o &lt;em&gt;&amp;#8220;claridad&amp;#8221;&lt;/em&gt; en un c贸digo. Son conceptos m谩s afines a &lt;/p&gt;</summary><content type="html">&lt;p&gt;En mis a帽os como programador he visto mucho c贸digo. Lo suficiente como para saber qu茅 estilo tiene el programador que lo escribe, cu谩les son sus vicios y cu谩les son sus errores de&amp;nbsp;concepto.&lt;/p&gt;
&lt;p&gt;Nos resulta imposible definir conceptos como &lt;em&gt;&amp;#8220;elegancia&amp;#8221;&lt;/em&gt; o &lt;em&gt;&amp;#8220;claridad&amp;#8221;&lt;/em&gt; en un c贸digo. Son conceptos m谩s afines a la &lt;em&gt;Est茅tica&lt;/em&gt; que a las &lt;em&gt;Ciencias de la Computaci贸n&lt;/em&gt;, siendo dif铆ciles de medir objetivamente. Nunca ser谩n parte de una metodolog铆a y, sin embargo, se consideran objetivos a alcanzar por todo programador que se&amp;nbsp;precie.&lt;/p&gt;
&lt;p&gt;En nuestra simpleza, necesitamos compartimentar todo lo que conocemos en grandes grupos: imperativo vs. din谩mico, tipado est谩tico vs. tipado din谩mico, estructural vs. orientado a objeto, orientado a objeto vs. funcional,&amp;nbsp;&amp;#8230;&lt;/p&gt;
&lt;p&gt;En este mundo de &lt;em&gt;versus&lt;/em&gt;, podemos hacer una similitud de la programaci贸n de c贸digo con el versus &lt;em&gt;&amp;#8220;Collage vs. Origami&amp;#8221;&lt;/em&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Un &lt;strong&gt;c贸digo collage&lt;/strong&gt; ser铆a un c贸digo construido como parches. Secciones de estructuras distintas, con controles que encajen todas las piezas. Todo pensado para que si una pieza no funciona, se &amp;#8220;arranca&amp;#8221; y se pone otra&amp;nbsp;encima.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Un &lt;strong&gt;c贸digo origami&lt;/strong&gt; ser铆a un c贸digo que se pliega sobre s铆 mismo. Un c贸digo que te lleva desde un principio a un final por el camino m谩s corto. Si algo no funciona, se vuelve atr谩s, se &amp;#8220;desdobla&amp;#8221; y se hace un doblez&amp;nbsp;nuevo.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Al igual que el origami, la creaci贸n de c贸digo requiere muchas veces pararse a pensar qu茅 parte del c贸digo se complic贸 demasiado y actuar sobre esa parte. Si no se entiende bien, una repetici贸n consistente en teclear decenas de veces ese c贸digo ayuda a entender mejor lo que hace y el motivo que hac铆a que fuera tan complicado. Es muy similar a repetir los mismos dobleces de una figura de papel hasta lograr su doblado&amp;nbsp;perfecto. &lt;/p&gt;
&lt;p&gt;Como parte de tribunales de selecci贸n para puestos inform谩ticos, me he sentido muchas veces molesto por tener que redactar tediosos cuestionarios de preguntas t茅cnicas que nada valoraban la capacidad real del candidato para el futuro trabajo que iba a realizar. El objeto era realizar una fuerte criba entre los candidatos y, sobre todo, ordenarlos por puntos para hacer m谩s sencilla su selecci贸n&amp;nbsp;posterior.&lt;/p&gt;
&lt;p&gt;Pero era en la posterior prueba pr谩ctica donde mejor pod铆a apreciar la val铆a de un candidato. Una visi贸n del c贸digo fuente y la documentaci贸n asociada permit铆a apreciar claramente qui茅nes eran los adecuados para el puesto. Pero 驴c贸mo valorar con una puntuaci贸n esta&amp;nbsp;percepci贸n?&lt;/p&gt;
&lt;p&gt;Puede que para la pr贸xima vez empiece por pedir al candidato que doble el papel de los enunciados de la prueba. Seguramente consiga saber m谩s de 茅l que de las respuestas que pueda&amp;nbsp;darme.&lt;/p&gt;</content><category term="Pensamientos"></category></entry><entry><title>Estado desituaci贸n</title><link href="https://blog.ch3m4.org/2013/02/19/estado-de-situacion/" rel="alternate"></link><published>2013-02-19T21:39:00+01:00</published><updated>2013-02-19T21:39:00+01:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2013-02-19:/2013/02/19/estado-de-situacion/</id><summary type="html">&lt;p&gt;Hac铆a mucho que no actualizaba mi blog y creo que ya es momento de contar algunas cosillas. Me gustar铆a no tener que hablar de la crisis por la que estamos pasando, al menos en Espa帽a, pero resulta imposible abstraerse de su&amp;nbsp;influencia.&lt;/p&gt;
&lt;p&gt;En mi trabajo como inform谩tico en una administraci贸n &lt;/p&gt;</summary><content type="html">&lt;p&gt;Hac铆a mucho que no actualizaba mi blog y creo que ya es momento de contar algunas cosillas. Me gustar铆a no tener que hablar de la crisis por la que estamos pasando, al menos en Espa帽a, pero resulta imposible abstraerse de su&amp;nbsp;influencia.&lt;/p&gt;
&lt;p&gt;En mi trabajo como inform谩tico en una administraci贸n p煤blica, soy testigo de c贸mo se est谩n aplicando medidas de austeridad sin contramedidas que eviten el colapso del sistema. Sin duda alguna, el objetivo de estas medidas no puede ser otro que liquidar el sistema p煤blico para su sustituci贸n por otro basado en el libre mercado, menos solidario y m谩s&amp;nbsp;injusto.&lt;/p&gt;
&lt;p&gt;Pero no quiero hablar de la crisis en general. Hay otros muchos blogs que lo hacen mucho mejor que yo y con mayor profundidad. Solo quisiera hablar ahora de los cambios que estoy viviendo en mi entorno de&amp;nbsp;trabajo.&lt;/p&gt;
&lt;p&gt;Por un lado, todos aquellos proyectos innovadores en los que estaba implicado han sido cancelados o aminorados por los nuevos gestores. Como primera consecuencia de ello, han quedado sin uso todos mis programas hechos en python con los que extra铆a la informaci贸n que necesitaba la direcci贸n para la toma de decisiones (&lt;abbr title="&amp;quot;Management Information System&amp;quot; - &amp;quot;Sistema de informaci贸n gerencial (SIG)&amp;quot;"&gt;&lt;span class="caps"&gt;MIS&lt;/span&gt;&lt;/abbr&gt;). Conf铆o que alg煤n d铆a vuelva a interesar el &lt;em&gt;estado real&lt;/em&gt; de la administraci贸n donde trabajo, aunque sospecho que para entonces ser谩 demasiado&amp;nbsp;tarde.&lt;/p&gt;
&lt;p&gt;Se puede afirmar que ahora mismo ya no programo en python. Por si fuera poco, a 茅sto hay que a帽adir la cantidad de proyectos que se nos est谩n quedando hu茅rfanos por no poder renovar su mantenimiento o, simplemente, por quebrar y desaparecer las empresas que los llevaban. Todos estos proyectos est谩n cayendo en mi bandeja de tareas pendientes, con lo que ahora he tenido que volver a programar en lenguajes que cre铆a olvidados como Visual Basic, &lt;span class="caps"&gt;TSQL&lt;/span&gt; o &lt;span class="caps"&gt;PHP&lt;/span&gt;. Un gran paso atr谩s del que no veo que podamos salir en bastantes&amp;nbsp;a帽os.&lt;/p&gt;
&lt;p&gt;Por este motivo, cuando un grupo de entusiastas programadores espa帽oles de python unieron esfuerzos para crear una &lt;a href="http://www.es.pycon.org/" title="PyCon Espa帽a"&gt;asociaci贸n&lt;/a&gt; con la que montar la primera &lt;a href="http://www.es.pycon.org/" title="PyCon Espa帽a"&gt;&lt;strong&gt;PyCon&lt;/strong&gt; espa帽ola&lt;/a&gt;, no he podido dejar de pensar lo lejos que estoy en estos momentos de considerarme &lt;em&gt;&amp;#8220;programador python&amp;#8221;&lt;/em&gt;. Se me incluy贸 en un principio entre los &lt;em&gt;&amp;#8220;socios fundadores&amp;#8221;&lt;/em&gt; de la asociaci贸n, supongo que debido a mi labor en la lista de &lt;a href="http://mail.python.org/mailman/listinfo/python-es"&gt;python-es&lt;/a&gt; todos estos a帽os. Pero pienso que un socio fundador debe ser una especie de socio &lt;em&gt;&amp;#8220;compromisario&amp;#8221;&lt;/em&gt; que trabaje duro para hacer viable la asociaci贸n, sobre todo en sus inicios m谩s dif铆ciles. En estos momentos, no me veo capaz de algo as铆, ni siquiera de mostrar el m谩s m铆nimo entusiasmo. Por 茅so mismo, he preferido declinar el ofrecimiento y figurar como un socio m谩s, a pesar de haber podido disgustar a m谩s de&amp;nbsp;uno.&lt;/p&gt;
&lt;p&gt;Como puntilla a lo dicho, 煤ltimamente estoy dedicando todo mi tiempo disponible al estudio del lenguaje &lt;a href="http://www.scala-lang.org/"&gt;scala&lt;/a&gt;. Adem谩s de reconciliarme con la programaci贸n funcional, me ha hecho f茅rreo defensor del tipado est谩tico frente al tipado din谩mico que usa python. No quiero decir de ninguna manera que abandone python, pero preveo que este a帽o lo dedicar茅 a convertirme en experto programador de scala. Definitivamente, no encajo preparando la PyCon. Mis disculpas por&amp;nbsp;ello.&lt;/p&gt;</content><category term="Pensamientos"></category><category term="PyConES"></category></entry><entry><title>Pruebas b谩sicas de python (yscala)</title><link href="https://blog.ch3m4.org/2012/10/25/pruebas-basicas-de-python-y-scala/" rel="alternate"></link><published>2012-10-25T17:04:00+02:00</published><updated>2012-10-25T17:04:00+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2012-10-25:/2012/10/25/pruebas-basicas-de-python-y-scala/</id><summary type="html">&lt;p&gt;Como continuaci贸n del art铆culo &lt;a href="https://blog.ch3m4.org/2012/10/17/como-contratar-un-programador-de-python/" title="C贸mo contratar un programador de python"&gt;&amp;#8220;C贸mo contratar a un programador de python&amp;#8221;&lt;/a&gt; voy a dar las soluciones a algunas de las pruebas b谩sicas que comentaba del proceso de selecci贸n. A帽ado tambi茅n las soluciones sobre c贸mo ser铆a con &lt;em&gt;scala&lt;/em&gt; y de paso comparamos ambos lenguajes&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1"&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;h2&gt;Prueba del &amp;#8220;Hello,&amp;nbsp;World!&amp;#8221;&lt;/h2&gt;
&lt;p&gt;Desde que &lt;/p&gt;</summary><content type="html">&lt;p&gt;Como continuaci贸n del art铆culo &lt;a href="https://blog.ch3m4.org/2012/10/17/como-contratar-un-programador-de-python/" title="C贸mo contratar un programador de python"&gt;&amp;#8220;C贸mo contratar a un programador de python&amp;#8221;&lt;/a&gt; voy a dar las soluciones a algunas de las pruebas b谩sicas que comentaba del proceso de selecci贸n. A帽ado tambi茅n las soluciones sobre c贸mo ser铆a con &lt;em&gt;scala&lt;/em&gt; y de paso comparamos ambos lenguajes&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1"&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;h2&gt;Prueba del &amp;#8220;Hello,&amp;nbsp;World!&amp;#8221;&lt;/h2&gt;
&lt;p&gt;Desde que se invent贸 el lenguaje C, la prueba del &lt;code&gt;"Hello, World!"&lt;/code&gt; es la prueba que inicialmente caracteriza a un lenguaje. Y en python&amp;nbsp;ser铆a:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;隆Hola, Mundo!&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Lo que hay que saber es que este c贸digo no funciona en python3 y ser谩 lo primero que te pregunte el seleccionador. En python3, el comando &lt;code&gt;print&lt;/code&gt; se convierte en una funci贸n, por lo que se debe a帽adir los&amp;nbsp;par茅ntesis:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;隆Hola, Mundo!&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Con esta introducci贸n, el seleccionador te puede preguntar alguna cosa m谩s sobre el comando &lt;code&gt;print&lt;/code&gt;, como si se puede usar con cualquier objeto o si se puede sacar f谩cilmente una salida&amp;nbsp;tabulada.&lt;/p&gt;
&lt;p&gt;En scala, la respuesta tambi茅n es&amp;nbsp;simple:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;隆Hola, Mundo!&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;&lt;code&gt;println&lt;/code&gt; es una funci贸n, como es l贸gico al tratarse de un &lt;em&gt;lenguaje funcional&lt;/em&gt;. Un seleccionador te puede preguntar por el sufijo &lt;code&gt;ln&lt;/code&gt;, que no es otra cosa que a帽adir un salto de l铆nea en la salida. Este c贸digo es equivalente&amp;nbsp;a:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;隆Hola, Mundo!\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Se puede ver al final una expresi贸n de escape que representa al salto de l铆nea, universalmente aceptada por un buen n煤mero de lenguajes (python&amp;nbsp;inclu铆do).&lt;/p&gt;
&lt;h2&gt;Detector de&amp;nbsp;pal铆ndromos&lt;/h2&gt;
&lt;p&gt;Un pal铆ndromo ser铆a una frase que resulta igual le铆da del principio al final, que del final al principio. Algunos&amp;nbsp;ejemplos:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;A man, a plan, a canal: Panama!
D谩bale arroz a la zorra el Abad
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Para hacer un detector de pal铆ndromos en python tenemos que hacer una funci贸n que lo primero que haga sea filtrar todos los espacios en blancos y los signos de puntuaci贸n de la frase, convertir todas las letras a min煤sculas (o may煤sculas) y comprobar luego si la frase es igual en un sentido y&amp;nbsp;otro:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;isPalindrome&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frase&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;frase_limpia&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lower&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;c&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;frase&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;A&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;frase_limpia&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="n"&gt;frase_limpia&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reverse&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Como primera aproximaci贸n puede valer. Se filtra la frase para que s贸lo aparezcan letras (&lt;code&gt;c&amp;gt;="A"&lt;/code&gt;), quitando espacios y signos de puntuaci贸n. Tambi茅n se ha convertido a min煤sculas con &lt;code&gt;c.lower()&lt;/code&gt; para hacer mejor la comparaci贸n. El problema es que no convierte las vocales con tilde a vocales sin tilde, con lo que el pal铆ndromo &lt;em&gt;&amp;#8220;D谩bale arroz a la zorra el Abad&amp;#8221;&lt;/em&gt; no lo va a detectar bien. El &lt;em&gt;&amp;#8220;candidato&amp;#8221;&lt;/em&gt; debe darse cuenta de ello e intentar explicar alg煤n modo de resolverlo (cuya resoluci贸n completa quedar铆a fuera de la prueba real y del presente art铆culo&lt;sup id="fnref:2"&gt;&lt;a class="footnote-ref" href="#fn:2"&gt;2&lt;/a&gt;&lt;/sup&gt;).&lt;/p&gt;
&lt;p&gt;En scala ser铆a algo&amp;nbsp;as铆:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="n"&gt;isPalindrome&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frase&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt;&lt;span class="kt"&gt;String&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt;&lt;span class="kt"&gt;Boolean&lt;/span&gt;&lt;span class="o"&gt;={&lt;/span&gt;
    &lt;span class="k"&gt;val&lt;/span&gt; &lt;span class="n"&gt;frase_limpia&lt;/span&gt;&lt;span class="k"&gt;=&lt;/span&gt;&lt;span class="n"&gt;frase&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;_&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;A&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="n"&gt;toLowerCase&lt;/span&gt;
    &lt;span class="n"&gt;frase_limpia&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="n"&gt;frase_limpia&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reverse&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Aqu铆 todas las operaciones se han hecho con el tipo &lt;code&gt;String&lt;/code&gt;, sin necesidad de pasar a una lista como en python. La 煤ltima sentencia de la funci贸n ser谩 el resultado que devuelve la funci贸n. En s铆, esta funci贸n ser铆a correcta, pero usar una variable intermedia como &lt;code&gt;frase_limpia&lt;/code&gt; para guardar un estado intermedio va en contra de la filosof铆a de la programaci贸n funcional. Un programa funcional &lt;em&gt;intenta retrasar todo lo que se pueda la evaluaci贸n del resultado con el fin de evitar posibles efectos colaterales&lt;/em&gt;. Lo ideal ser铆a que s贸lo se hiciera la &lt;em&gt;evaluaci贸n&lt;/em&gt; en la 煤ltima sentencia de la&amp;nbsp;funci贸n.&lt;/p&gt;
&lt;p&gt;Una forma de hacerlo m谩s &lt;em&gt;&amp;#8220;funcional&amp;#8221;&lt;/em&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="n"&gt;isPalindrome&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frase&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt;&lt;span class="kt"&gt;String&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt;&lt;span class="kt"&gt;Boolean&lt;/span&gt;&lt;span class="o"&gt;={&lt;/span&gt;
    &lt;span class="k"&gt;val&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="k"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt;&lt;span class="kt"&gt;String&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="k"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reverse&lt;/span&gt;
    &lt;span class="k"&gt;val&lt;/span&gt; &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="k"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt;&lt;span class="kt"&gt;String&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="k"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;_&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;A&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="n"&gt;toLowerCase&lt;/span&gt;
    &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="n"&gt;compose&lt;/span&gt; &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="o"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;frase&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;&amp;#8230;o todo junto en una&amp;nbsp;l铆nea:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="n"&gt;isPalindrome&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frase&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt;&lt;span class="kt"&gt;String&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt;&lt;span class="kt"&gt;Boolean&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;
    &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt;&lt;span class="kt"&gt;String&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="k"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reverse&lt;/span&gt;&lt;span class="o"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;frase&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;_&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;A&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="n"&gt;toLowerCase&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h2&gt;Expresi贸n regular para encontrar tel茅fonos en un&amp;nbsp;texto&lt;/h2&gt;
&lt;p&gt;Lo m谩s simple es buscar 9 d铆gitos seguidos y sin espacios: &lt;code&gt;"\d{9}"&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;El examinador probablemente quiera que te esfuerces algo m谩s. Te puede decir que esa expresi贸n no sirve para localizar tel茅fonos como el &lt;code&gt;+34 666 010101&lt;/code&gt; y quiere saber c贸mo se podr铆a hacer. La cosa se complica bastante, aunque no es imposible. En este momento &lt;span class="caps"&gt;NUNCA&lt;/span&gt; digas que har铆a falta leerse bien la documentaci贸n y que tendr铆as que investigar un poco, suena muy mal. Lo de &lt;em&gt;investigar&lt;/em&gt; da la idea que vas a buscar una soluci贸n por internet, que acabar谩s en un blog como 茅ste y que vas a copiarte la soluci贸n sin siquiera leer c贸mo&amp;nbsp;funciona.&lt;/p&gt;
&lt;p&gt;M谩s vale que busques otra alternativa, aunque sea sin usar expresiones regulares. Lo que realmente interesa al entrevistador es que tengas ideas propias y originales que se puedan aplicar para resolver el problema que se te&amp;nbsp;plantea.&lt;/p&gt;
&lt;p&gt;A continuaci贸n pongo una posible soluci贸n, aunque te aconsejo que la estudies antes de aplicarla literalmente a tu&amp;nbsp;c贸digo:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &amp;quot;((\+34 )?\d{3} ?\d{6})&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h2&gt;Una conversi贸n de lista de tuplas a&amp;nbsp;diccionario&lt;/h2&gt;
&lt;p&gt;Este es uno de esos casos que cuesta m谩s explicar el problema que su soluci贸n. Se pretende ver si el candidato comprende realmente los conceptos que se tratan, si sabe lo que es una tupla y un diccionario, y si tiene claro el concepto de &lt;em&gt;&amp;#8220;mapping&amp;#8221;&lt;/em&gt; por el cu谩l se contruye el&amp;nbsp;diccionario.&lt;/p&gt;
&lt;p&gt;La soluci贸n empieza por poner en dependencia el segundo elemento del&amp;nbsp;primero:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;lista&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;b&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;),(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;c&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="n"&gt;dic&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lista&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;En scala es muy&amp;nbsp;parecido:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;val&lt;/span&gt; &lt;span class="n"&gt;lista&lt;/span&gt;&lt;span class="k"&gt;=&lt;/span&gt;&lt;span class="nc"&gt;List&lt;/span&gt;&lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;),(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;b&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;),(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;c&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt;
&lt;span class="k"&gt;val&lt;/span&gt; &lt;span class="n"&gt;dic&lt;/span&gt;&lt;span class="k"&gt;=&lt;/span&gt;&lt;span class="n"&gt;lista&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;toMap&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Por complicarlo algo m谩s, se puede pedir que se repita el ejercicio, pero con tuplas de m谩s de dos elementos, con el primero como clave del &lt;em&gt;mapping&lt;/em&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;lista&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;),(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;b&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;),(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;c&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;300&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="n"&gt;dic&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:])&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;lista&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;En scala es algo m谩s complicado. Lo que en python se entiende por tupla (una secuencia inmutable), en scala son en realidad las listas. Las listas mutables, como se entienden en python, son instancias de la clase &lt;code&gt;MutableList&lt;/code&gt;. Las tuplas de scala se usan para paso de par谩metros y poco&amp;nbsp;m谩s:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;val&lt;/span&gt; &lt;span class="n"&gt;lista&lt;/span&gt;&lt;span class="k"&gt;=&lt;/span&gt;&lt;span class="nc"&gt;List&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nc"&gt;List&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;&lt;span class="nc"&gt;List&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;b&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
  &lt;span class="nc"&gt;List&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;c&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;300&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt;

&lt;span class="k"&gt;val&lt;/span&gt; &lt;span class="n"&gt;dic&lt;/span&gt;&lt;span class="k"&gt;=&lt;/span&gt;&lt;span class="n"&gt;lista&lt;/span&gt; &lt;span class="n"&gt;map&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tail&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="n"&gt;toMap&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Aqu铆 se ve el uso de los atributos &lt;code&gt;head&lt;/code&gt; y &lt;code&gt;tail&lt;/code&gt; para manejar listas que son tan caracter铆sticos de los lenguajes&amp;nbsp;funcionales.&lt;/p&gt;
&lt;p&gt;Las 煤ltimas versiones de Scala incorporan la &amp;#8220;comparaci贸n de patrones&amp;#8221; (&lt;em&gt;&amp;#8220;pattern matching&amp;#8221;&lt;/em&gt;) que consiguen hacer algo m谩s legible el&amp;nbsp;c贸digo:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;val&lt;/span&gt; &lt;span class="n"&gt;dic&lt;/span&gt;&lt;span class="k"&gt;=&lt;/span&gt;&lt;span class="n"&gt;lista&lt;/span&gt; &lt;span class="n"&gt;map&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="n"&gt;toMap&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;No parece que haya variado mucho. La potencia de los patrones est谩 en poder realizar distintas operaciones seg煤n el tipo de los par谩metros. En otros lenguajes se necesitar铆a incorporar expresiones condicionales o sobrecarga de&amp;nbsp;operadores.&lt;/p&gt;
&lt;p&gt;Por ejemplo, imagina que la lista tuviera elementos extra como cadenas y&amp;nbsp;n煤meros:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;val&lt;/span&gt; &lt;span class="n"&gt;lista&lt;/span&gt;&lt;span class="k"&gt;=&lt;/span&gt;&lt;span class="nc"&gt;List&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nc"&gt;List&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;&lt;span class="nc"&gt;List&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;b&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
  &lt;span class="nc"&gt;List&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;c&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;300&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;&lt;span class="nc"&gt;List&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;&lt;span class="nc"&gt;List&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Hola&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;1.5&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;val&lt;/span&gt; &lt;span class="n"&gt;dic&lt;/span&gt;&lt;span class="k"&gt;=&lt;/span&gt;&lt;span class="n"&gt;lista&lt;/span&gt; &lt;span class="n"&gt;collect&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt;&lt;span class="kt"&gt;String&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nc"&gt;List&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;
   &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="n"&gt;toMap&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Vemos el&amp;nbsp;resultado:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;//for((k,v)&amp;lt;-dic) println(k,v)
(Hola,List())
(1,List())
(a,List(1, 2, 3))
(b,List(10, 20, 30))
(c,List(100, 200, 300))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;En el primer patr贸n, &lt;code&gt;h::t&lt;/code&gt; (llamado de &lt;em&gt;extracci贸n de lista&lt;/em&gt;), s贸lo encajar谩n los items que son listas; en el segundo patr贸n &lt;code&gt;s:String&lt;/code&gt; s贸lo encaja la &lt;code&gt;String "Hola"&lt;/code&gt;; mientras que el 煤ltimo elemento de la lista, el &lt;code&gt;double 1.5&lt;/code&gt;, no coincide con ning煤n patr贸n y ser谩 filtrado por el m茅todo &lt;code&gt;collect&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Si intentamos hacer lo mismo con python nos saldr铆a un c贸digo bastante menos&amp;nbsp;legible:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;lista&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;),(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;b&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;),(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;c&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;300&lt;/span&gt;&lt;span class="p"&gt;),(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,),&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Hola&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mf"&gt;1.5&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;dic&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:])&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;isinstance&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nb"&gt;tuple&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,()))&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;lista&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;isinstance&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;tuple&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;basestring&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h2&gt;Conclusi贸n&lt;/h2&gt;
&lt;p&gt;Con estos ejemplos tan s贸lo he querido darte una idea de qu茅 cosas podemos encontrarnos en una prueba de selecci贸n. En programaci贸n, deber铆a interesar m谩s la capacidad resolutiva del &lt;em&gt;candidato&lt;/em&gt; que su nivel de conocimientos. Una soluci贸n innovadora o que aporte otro punto de vista no contemplado en un principio suele ser de m谩s valor que dar la soluci贸n correcta. Busca distintos ejemplos de resolver los mismos problemas, incluso en lenguajes de programaci贸n diferentes, y estar谩s preparado para todo reto que se te&amp;nbsp;presente.&lt;/p&gt;
&lt;hr&gt;
&lt;div class="footnote"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Si te preguntas porqu茅 &lt;em&gt;scala&lt;/em&gt;, la respuesta simple ser铆a 
&lt;em&gt;porque es el lenguaje que estoy aprendiendo ahora mismo&lt;/em&gt;. Pero si realmente te preguntas qu茅 puede aprender un programador python de un lenguaje como scala, no te pierdas el pr贸ximo art铆culo.&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;Busca en la lista &lt;a href="http://mail.python.org/mailman/listinfo/python-es"&gt;python-es&lt;/a&gt;&amp;#160;&lt;a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</content><category term="Python"></category><category term="python"></category><category term="scala"></category><category term="programming"></category></entry><entry><title>Entornos virtuales en python3.3</title><link href="https://blog.ch3m4.org/2012/10/23/entornos-virtuales-en-python-3-3/" rel="alternate"></link><published>2012-10-23T20:58:00+02:00</published><updated>2012-10-23T20:58:00+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2012-10-23:/2012/10/23/entornos-virtuales-en-python-3-3/</id><summary type="html">&lt;p&gt;Con la &lt;a href="http://docs.python.org/3.3/whatsnew/3.3.html" title="What's new in python 3.3?"&gt;nueva versi贸n de python 3.3&lt;/a&gt; se ha incorporado la propuesta &lt;a href="http://www.python.org/dev/peps/pep-0405" title="PEP-0405 Python Virtual Environments"&gt;&lt;span class="caps"&gt;PEP&lt;/span&gt;-405&lt;/a&gt; que a帽ade al repertorio interno de python la posibilidad de crear entornos virtuales de modo parecido a virtualenv (vimos esta herramienta hace poco al hablar de la &lt;a href="https://blog.ch3m4.org/2012/07/24/instalacion-de-modulos/"&gt;instalaci贸n de m贸dulos&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Tal como lo define &lt;a href="http://www.python.org/dev/peps/pep-0405" title="PEP-0405 Python Virtual Environments"&gt;&lt;span class="caps"&gt;PEP &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;Con la &lt;a href="http://docs.python.org/3.3/whatsnew/3.3.html" title="What's new in python 3.3?"&gt;nueva versi贸n de python 3.3&lt;/a&gt; se ha incorporado la propuesta &lt;a href="http://www.python.org/dev/peps/pep-0405" title="PEP-0405 Python Virtual Environments"&gt;&lt;span class="caps"&gt;PEP&lt;/span&gt;-405&lt;/a&gt; que a帽ade al repertorio interno de python la posibilidad de crear entornos virtuales de modo parecido a virtualenv (vimos esta herramienta hace poco al hablar de la &lt;a href="https://blog.ch3m4.org/2012/07/24/instalacion-de-modulos/"&gt;instalaci贸n de m贸dulos&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Tal como lo define &lt;a href="http://www.python.org/dev/peps/pep-0405" title="PEP-0405 Python Virtual Environments"&gt;&lt;span class="caps"&gt;PEP&lt;/span&gt;-405&lt;/a&gt;: &lt;em&gt;&amp;#8220;Los &lt;/em&gt;entornos virtuales&lt;em&gt; poseen su propio conjunto de paquetes instalados localmente, segregados del resto de paquetes instalados del sistema&amp;#8221;&lt;/em&gt;. Para crear y administrar estos entornos virtuales, se incluye el m贸dulo &lt;code&gt;venv&lt;/code&gt;, as铆 como el script &lt;code&gt;pyvenv.py&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Para crear un entorno virtual se puede utilizar el script &lt;code&gt;pyvenv&lt;/code&gt; (con python&amp;nbsp;3.3):&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ pyvenv /ruta/al/nuevo/entorno/virtual
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;En windows, probablemente haya que ejecutar el script que se encuentra en &lt;code&gt;"C:\&amp;gt; Python33\Tools\Scripts\pyvenv.py"&lt;/code&gt;. Posiblemente sea m谩s sencillo ejecutar directamente el m贸dulo &lt;code&gt;venv&lt;/code&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ python -m venv /ruta/al/nuevo/entorno/virtual
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Entrando dentro del nuevo directorio, activamos el entorno de modo similar a como hac铆amos con &lt;code&gt;virtualenv&lt;/code&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; /ruta/al/nuevo/entorno/virtual
$ &lt;span class="nb"&gt;source&lt;/span&gt; bin/activate
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Hay que notar que el script &lt;code&gt;activate&lt;/code&gt; se debe ejecutar con &lt;code&gt;source&lt;/code&gt; ya que necesita cambiar algunas variables del entorno de ejecuci贸n&amp;nbsp;actual. &lt;/p&gt;
&lt;p&gt;En windows, se debe ejecutar el script &lt;code&gt;Scripts\activate.bat&lt;/code&gt;.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="p"&gt;\&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;cd &lt;/span&gt;&lt;span class="n"&gt;entorno_virtual&lt;/span&gt;
&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="p"&gt;\&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Scripts&lt;/span&gt;&lt;span class="p"&gt;\&lt;/span&gt;&lt;span class="n"&gt;activate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bat&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Una vez activado el entorno veremos que el prompt de la l铆nea de comandos ha cambiado para indicarnos que estamos dentro. Las variables de entorno han cambiado, como puedes comprobar si miras &lt;code&gt;$PATH&lt;/code&gt;. A partir de aqu铆, la instalaci贸n de paquetes con &lt;code&gt;easy_install&lt;/code&gt; o &lt;code&gt;pip&lt;/code&gt; se realizar谩n dentro del entorno. A diferencia con &lt;code&gt;virtualenv&lt;/code&gt;, el m贸dulo &lt;code&gt;venv&lt;/code&gt; no instala en nuestro entorno ninguna de estas herramientas, por lo que lo primero que tendremos que hacer ser谩&amp;nbsp;instalarlas:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;(&lt;/span&gt;py3.3&lt;span class="o"&gt;)&lt;/span&gt; $ curl -O http://python-distribute.org/distribute_setup.py
&lt;span class="o"&gt;(&lt;/span&gt;py3.3&lt;span class="o"&gt;)&lt;/span&gt; $ python distribute_setup.py
&lt;span class="o"&gt;(&lt;/span&gt;py3.3&lt;span class="o"&gt;)&lt;/span&gt; $ easy_install pip
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Para desactivar el entorno se ejecuta &lt;code&gt;deactivate&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Aunque &lt;code&gt;venv&lt;/code&gt; sigue el mismo funcionamiento que &lt;code&gt;virtualenv&lt;/code&gt;, tiene notables&amp;nbsp;carencias:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;No permite configurar versiones distintas de&amp;nbsp;python&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;No replica la instalaci贸n python del sistema en la copia&amp;nbsp;local&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;No permite independizar el entorno virtual del la ruta donde se crea (&lt;em&gt;no relocatable&lt;/em&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En definitiva, los entornos virtuales creados con &lt;code&gt;venv&lt;/code&gt; no son completamente independientes de la instalaci贸n python del sistema como s铆 puede hacer &lt;code&gt;virtualenv&lt;/code&gt;. Esperemos que se amplien las opciones con nuevas versiones de python. De momento, seguiremos con &lt;code&gt;virtualenv&lt;/code&gt;.&lt;/p&gt;</content><category term="Python"></category></entry><entry><title>C贸mo contratar un programador depython</title><link href="https://blog.ch3m4.org/2012/10/17/como-contratar-un-programador-de-python/" rel="alternate"></link><published>2012-10-17T17:30:00+02:00</published><updated>2012-10-17T17:30:00+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2012-10-17:/2012/10/17/como-contratar-un-programador-de-python/</id><summary type="html">&lt;p&gt;En 茅poca de &lt;em&gt;crisis&lt;/em&gt; se produce un curioso desequilibrio de las cosas. Por un lado, est谩n los emprendedores que se arriesgan mucho m谩s buscando productos innovadores con los que poder competir mejor, alejados de las tendencias impuestas por las grandes empresas del sector. Son las &lt;em&gt;startups&lt;/em&gt;, surgidas como respuestas del &lt;/p&gt;</summary><content type="html">&lt;p&gt;En 茅poca de &lt;em&gt;crisis&lt;/em&gt; se produce un curioso desequilibrio de las cosas. Por un lado, est谩n los emprendedores que se arriesgan mucho m谩s buscando productos innovadores con los que poder competir mejor, alejados de las tendencias impuestas por las grandes empresas del sector. Son las &lt;em&gt;startups&lt;/em&gt;, surgidas como respuestas del estancamiento de la econom铆a actual. Por contra, la crisis tambi茅n nos obliga a deshacernos de todo aquello que se salga de la norma, siguiendo el dictado de recortes indiscriminados, persiguiendo no se sabe bi茅n qu茅 fines. Al final se consigue mermar la creatividad, a costa de imponer la mediocridad en todo lo que se&amp;nbsp;hace.&lt;/p&gt;
&lt;p&gt;Centr谩ndonos en la programaci贸n python, es parad贸jico que en estos momentos la carencia de programadores python est茅 siendo una de las razones que impida crecer a algunas peque帽as empresas. Empresas que podr铆an ambicionar a tener un equipo de desarrollo acorde a la demanda que est谩n teniendo, terminan por orientar su negocio a las adaptaciones para uno o dos clientes importantes, abandonando la mejora del producto en manos de la comunidad de software libre que lo crea&amp;nbsp;interesante.&lt;/p&gt;
&lt;p&gt;Antes de seguir, habr铆a que precisar a qu茅 nos referimos cuando hablamos de &lt;em&gt;programadores python&lt;/em&gt;. No basta con saber la sint谩xis del lenguaje, del mismo modo que no es suficiente saber coser para ser cirujano. Se est谩 buscando un perfil concreto de programador, capaz de dar soluciones creativas e ingeniosas, y que sea capaz de expresarlas como c贸digo python al resto del equipo de&amp;nbsp;desarrolladores.&lt;/p&gt;
&lt;p&gt;Si te est谩s pregunt谩ndo si t煤 encajar铆as en este perfil, o bien si te preguntas c贸mo se har铆a una de estas selecciones de &lt;em&gt;programadores python&lt;/em&gt;, en este art铆culo pretendo dar una idea de las preguntas de un proceso de selecci贸n de este tipo, m谩s pensado como &lt;em&gt;&amp;#8220;filtrado&amp;#8221;&lt;/em&gt; de todo perfil no deseado que en ser una exhaustiva evaluaci贸n de conocimientos. En un pr贸ximo art铆culo pondr茅 algunas soluciones a estas preguntas para que as铆 tengas tiempo para&amp;nbsp;reflexionar.&lt;/p&gt;
&lt;h2&gt;1. Filtrado del simple &amp;#8220;Hello,&amp;nbsp;World!&amp;#8221;&lt;/h2&gt;
&lt;p&gt;Antes de perder m谩s tiempo, lo primero es preguntar al candidato si realmente sabe de python. No son pocos los que acuden con la idea de que da igual que sea python que cualquiera de los otros lenguajes &amp;#8220;populares&amp;#8221; como &lt;em&gt;java&lt;/em&gt; o &lt;em&gt;visual basic&lt;/em&gt;. Por mucho que se insista en que tiene que ser un programador experimentado en python, muchas veces te encuentras que ni es python lo que sabe, ni tampoco es&amp;nbsp;experimentado.&lt;/p&gt;
&lt;p&gt;La prueba del &amp;#8220;Hello, World!&amp;#8221; en python deber铆a ser la primera prueba para descartar a los oportunistas. Otra de las preguntas m谩s elementales ser铆a hablar del &lt;em&gt;&amp;#8220;Zen de python&amp;#8221;&lt;/em&gt;, si no recitarlo entero, al menos una explicaci贸n de la regla &lt;em&gt;&amp;#8220;Explicit is better than implicit&amp;#8221;&lt;/em&gt;.&lt;/p&gt;
&lt;h2&gt;2. Preguntar por muestras de sus&amp;nbsp;trabajos&lt;/h2&gt;
&lt;p&gt;Todo programador que aprecie debe tener una colecci贸n de cosas en las que haya trabajado. No tienen que ser cosas asombrosas. Pueden ser simplemente aquellas muestras de saber dejadas por internet como ayuda a los dem谩s, tal vez un perfil de &lt;em&gt;Stack Overflow&lt;/em&gt; o de &lt;em&gt;Python Majibu&lt;/em&gt; donde se pueda ver qu茅 clase de comunicador y resolvedor de problemas eres. Tal vez alg煤n repositorio de c贸digo abierto donde participes, un blog profesional,&amp;nbsp;twitter,&amp;#8230;&lt;/p&gt;
&lt;p&gt;Simplemente, viendo la clase de trabajos que hace la gente resulta de mucha ayuda para saber en qu茅 destaca o no un&amp;nbsp;programador.&lt;/p&gt;
&lt;h2&gt;3. Af铆n a la cultura de la&amp;nbsp;empresa&lt;/h2&gt;
&lt;p&gt;La experiencia dice que ser af铆n a la cultura de la empresa asegura mejores 茅xitos que el ser un monstruo programando. Un ejemplo com煤n son las empresas de software libre cuando tienden a adoptar ciertas pr谩cticas 茅ticas entre sus empleados como es la de compartir todo el&amp;nbsp;conocimiento.&lt;/p&gt;
&lt;p&gt;Trat谩ndose de python, un programador en este lenguaje tiende a adoptar un perfil muy caracter铆stico. Busca como fin la sencillez y la elegancia del c贸digo, antes que la optimizaci贸n y eficiencia del mismo. Intenta ser &lt;em&gt;&amp;#8220;agn贸stico&amp;#8221;&lt;/em&gt; frente a la plataforma, que el c贸digo funcione en (casi) cualquier sitio. Sin embargo, es 谩vido de conocer nuevas librer铆as que poder emplear en sus desarrollos, siempre con python como lenguaje director de la l贸gica de la&amp;nbsp;aplicaci贸n.&lt;/p&gt;
&lt;p&gt;Toda esta actividad se ve plasmada en las &amp;#8220;comunidades&amp;#8221; python, donde se proponen y discuten sobre estos temas. Destaca la comunidad de &amp;#8220;python hispano&amp;#8221; como un primer lugar donde buscar perfiles apropiados, pero tambi茅n se puede acudir a otros foros locales como las comunidades de python en Argentina, Per煤, M茅xico,&amp;#8230; o a foros m谩s especializados de django o&amp;nbsp;zope.&lt;/p&gt;
&lt;p&gt;Pero una empresa que se precie, que tenga un buen producto de c贸digo abierto que ofrecer, deber铆a ser capaz de formar su propia comunidad como punto de encuentro de los afines al proyecto, que no son s贸lo programadores. Esta comunidad sirve tanto para difundir la filosof铆a de la empresa como ser el punto de encuentro del personal af铆n a ella. Lamentablemente, muchas empresas han cre铆do que una comunidad se monta mediante el bombardeo publicitario y es as铆 como han concebido sus cuentas en las redes sociales como facebook o twitter. De este modo han conseguido consumidores &lt;em&gt;fan谩ticos&lt;/em&gt;, pero muy pocos&amp;nbsp;colaboradores.&lt;/p&gt;
&lt;p&gt;A un programador hay que darle c贸digo. Las comunidades de programadores se forman alrededor de servicios como los github, bitbucket, sourceforge, launchpad, trac, etc. Si encuentras en tu comunidad un programador que te ha hecho un gran aporte o un hacker que ha dado con una extra帽a y oculta vulnerabilidad, contr谩talo sin m谩s&amp;nbsp;dubitaciones.&lt;/p&gt;
&lt;h2&gt;4. Prueba de&amp;nbsp;programaci贸n&lt;/h2&gt;
&lt;p&gt;Lo siguiente es pedir la realizaci贸n de algunos programas sencillos: un detector de pal铆ndromos, crear una expresi贸n regular para encontrar tel茅fonos en un texto, una conversi贸n de una lista de tuplas a&amp;nbsp;diccionario,&amp;#8230;&lt;/p&gt;
&lt;p&gt;Con la prueba de programaci贸n no se busca, necesariamente, una respuesta perfecta, si no el crear un contexto donde observar al programador en su compresi贸n de los problemas, as铆 c贸mo su intento de resolverlos. Dentro de las posibilidades, es una prueba que muy bien se podr铆a hacer online, combinando videconferencia y pizarra virtual. Si saltaran demasiadas alarmas, al ser &lt;em&gt;online&lt;/em&gt; se podr铆a dar por terminada la prueba en cualquier momento y as铆 ahorrar tiempo tanto al candidato como al&amp;nbsp;seleccionador.&lt;/p&gt;
&lt;h2&gt;5. Prueba&amp;nbsp;real&lt;/h2&gt;
&lt;p&gt;Antes de dar el paso definitivo, se puede probar al candidato sobre un caso real como resolver alg煤n ticket del gestor de bugs o crear una extensi贸n sencilla en un plazo determinado. Por supuesto, no debe ser ninguna parte importante, tan s贸lo un medio de comprobar si el candidato es capaz de cumplir los plazos establecidos para as铆 no desequilibrar al resto del&amp;nbsp;equipo.&lt;/p&gt;
&lt;p&gt;Idealmente, ser铆a bueno que esta labor se realizara en las mismas instalaciones de la empresa, con los recursos de la empresa y con un contrato en&amp;nbsp;pr谩cticas.&lt;/p&gt;
&lt;h2&gt;6. Entrevista&amp;nbsp;personal&lt;/h2&gt;
&lt;p&gt;Habiendo pasando todos los puntos anteriores, es casi seguro que el candidato es apto para la empresa. La entrevista est谩 orientada m谩s en conocer el perfil comunicativo del candidato con vistas a su integraci贸n de un equipo de trabajo. La entrevista empieza por una presentaci贸n del candidato sobre su experiencia hasta el momento. A continuaci贸n, se le realizan una serie de preguntas encaminadas a conocer del candidato su apasionamiento por lo que hace, su capacidad para comunicarse en grupos peque帽os y qu茅 podr铆a aportar dentro de un peque帽o equipo de&amp;nbsp;trabajo.&lt;/p&gt;
&lt;h2&gt;7. Prueba de&amp;nbsp;ingl茅s&lt;/h2&gt;
&lt;p&gt;Se quiera o no, el ingl茅s es el idioma com煤n del programador, y no s贸lo porque toda la documentaci贸n est茅 en ingl茅s. Cualquier proyecto de envergadura debe usar el ingl茅s si quiere llamar la atenci贸n y conseguir nuevos colaboradores, ya sea en internet como en presentaciones en congresos. Tambi茅n empieza a ser frecuente la creaci贸n de equipos multinacionales de desarrollo. El ingl茅s es la &lt;em&gt;lingua franca&lt;/em&gt; de nuestros tiempos y comunicarse en ingl茅s es fundamental para ser programador. Al ser una prueba de comunicaci贸n, la prueba de ingl茅s podr铆a formar parte de la entrevista&amp;nbsp;personal. &lt;/p&gt;
&lt;h2&gt;8.&amp;nbsp;Conclusi贸n&lt;/h2&gt;
&lt;p&gt;Si has le铆do hasta aqu铆, espero no haberte aburrido y/o decepcionado mucho. No espero que todo lo dicho sea tomado al pie de letra. M谩s que una lista de reglas para buscar candidatos, he pretendido que sirva m谩s como consejos para programadores python que buscan trabajo, sepan c贸mo hacerlo y, sobre todo, que se animen a buscarlos. Si de paso se ampl铆a el n煤mero de programadores profesionales de python, mejor todav铆a. Ganaremos&amp;nbsp;todos.&lt;/p&gt;</content><category term="Python"></category></entry><entry><title>Estudio funci贸n factorial en scala - operadorsufix</title><link href="https://blog.ch3m4.org/2012/08/15/estudio-funcion-factorial-en-scala-operador-sufix/" rel="alternate"></link><published>2012-08-15T09:30:00+02:00</published><updated>2012-08-15T09:30:00+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2012-08-15:/2012/08/15/estudio-funcion-factorial-en-scala-operador-sufix/</id><summary type="html">&lt;p&gt;A medida que voy aprendiendo m谩s sobre el lenguaje &lt;strong&gt;scala&lt;/strong&gt;, se me ocurren nuevas formas de expresar la funci贸n&amp;nbsp;factorial.&lt;/p&gt;
&lt;p&gt;La &lt;em&gt;&amp;#8220;expresividad&amp;#8221;&lt;/em&gt; del lenguaje permite usar operadores para crear c贸digo m谩s corto. Por ejemplo, la funci贸n factorial con &lt;em&gt;&amp;#8220;plegados&amp;#8221;&lt;/em&gt; (&lt;em&gt;&amp;#8220;folds&lt;/em&gt;&amp;#8220;) que pon铆amo en un art铆culo anterior se podr铆a expresar&amp;nbsp;as铆 &lt;/p&gt;</summary><content type="html">&lt;p&gt;A medida que voy aprendiendo m谩s sobre el lenguaje &lt;strong&gt;scala&lt;/strong&gt;, se me ocurren nuevas formas de expresar la funci贸n&amp;nbsp;factorial.&lt;/p&gt;
&lt;p&gt;La &lt;em&gt;&amp;#8220;expresividad&amp;#8221;&lt;/em&gt; del lenguaje permite usar operadores para crear c贸digo m谩s corto. Por ejemplo, la funci贸n factorial con &lt;em&gt;&amp;#8220;plegados&amp;#8221;&lt;/em&gt; (&lt;em&gt;&amp;#8220;folds&lt;/em&gt;&amp;#8220;) que pon铆amo en un art铆culo anterior se podr铆a expresar&amp;nbsp;as铆:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="n"&gt;fact&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt;&lt;span class="kt"&gt;Int&lt;/span&gt;&lt;span class="o"&gt;)=(&lt;/span&gt;&lt;span class="nc"&gt;BigInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/:&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;))(&lt;/span&gt;&lt;span class="k"&gt;_&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;_&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;En esta expresi贸n, hacemos el &lt;em&gt;plegado&lt;/em&gt; de la secuencia &lt;code&gt;(1 to n)&lt;/code&gt; sobre el valor inicial &lt;code&gt;BigInt(1)&lt;/code&gt; con la operaci贸n &lt;code&gt;(_*_)&lt;/code&gt; (multiplicaci贸n). Se ve rara, pero una vez profundizas en scala se ve como algo&amp;nbsp;normal.&lt;/p&gt;
&lt;p&gt;Otra de las opciones de scala es poder usar casi cualquier car谩cter como indentificador, lo que nos facilita la creaci贸n de &lt;span class="caps"&gt;DSL&lt;/span&gt; (&lt;em&gt;&amp;#8220;Lenguajes Espec铆ficos al Dominio&amp;#8221;&lt;/em&gt;). Una de estas posibilidades ser铆a crear el operador &lt;em&gt;sufix&lt;/em&gt; de la funci贸n factorial, de modo que el c谩lculo de factorial de &lt;code&gt;n&lt;/code&gt; se pudiera expresar como &lt;code&gt;n!&lt;/code&gt;. Para ello aprovechamos el mecanismo que tiene scala para conversi贸n autom谩tica de tipos de&amp;nbsp;datos:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Factorizer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt;&lt;span class="kt"&gt;Int&lt;/span&gt;&lt;span class="o"&gt;){&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt; &lt;span class="k"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nc"&gt;BigInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="n"&gt;product&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;implicit&lt;/span&gt; &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="n"&gt;int2fact&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="k"&gt;:&lt;/span&gt;&lt;span class="kt"&gt;Int&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="k"&gt;=new&lt;/span&gt; &lt;span class="nc"&gt;Factorizer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;5!=&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;!))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;La explicaci贸n es bien sencilla: como no encuentra el m茅todo &lt;code&gt;'!'&lt;/code&gt; en el tipo &lt;code&gt;Int&lt;/code&gt;, busca entre las conversiones otros tipos que lo puedan tener, en este caso &lt;code&gt;Factorizer&lt;/code&gt;. Una vez hecha la conversi贸n, ejecuta el&amp;nbsp;operador.&lt;/p&gt;</content><category term="Scala"></category><category term="algorithm"></category><category term="factorial"></category></entry><entry><title>Instalaci贸n dem贸dulos</title><link href="https://blog.ch3m4.org/2012/07/24/instalacion-de-modulos/" rel="alternate"></link><published>2012-07-24T22:02:00+02:00</published><updated>2012-07-24T22:02:00+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2012-07-24:/2012/07/24/instalacion-de-modulos/</id><summary type="html">&lt;p&gt;Resulta habitual la instalaci贸n de nuevos m贸dulos o paquetes en nuestra instalaci贸n de python, para lo que basta con introducir en el directorio &lt;code&gt;site-packages&lt;/code&gt; el fichero del m贸dulo o, en caso de paquetes, el directorio con el paquete. Algunas veces, la instalaci贸n requiere compilar e instalar librer铆as en el sistema &lt;/p&gt;</summary><content type="html">&lt;p&gt;Resulta habitual la instalaci贸n de nuevos m贸dulos o paquetes en nuestra instalaci贸n de python, para lo que basta con introducir en el directorio &lt;code&gt;site-packages&lt;/code&gt; el fichero del m贸dulo o, en caso de paquetes, el directorio con el paquete. Algunas veces, la instalaci贸n requiere compilar e instalar librer铆as en el sistema, por lo que la instalaci贸n se complica&amp;nbsp;bastante.&lt;/p&gt;
&lt;p&gt;Para hacer m谩s sencillo la b煤squeda e instalaci贸n de m贸dulos, podemos elegir entre varias utilidades que, frecuentemente, se ven mezcladas en las documentaciones que podamos consultar, sin quedar claro cu谩l deber铆amos utilizar en nuestro d铆a a&amp;nbsp;d铆a.&lt;/p&gt;
&lt;p&gt;En este art铆culo voy a aclarar estas utilidades, as铆 como algunos trucos que podemos usar para crear entornos de trabajo aislados del&amp;nbsp;resto.&lt;/p&gt;
&lt;h2&gt;Instaladores de&amp;nbsp;paquetes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Distutils&lt;/strong&gt; era la herramienta est谩ndar para empaquetar paquetes&amp;nbsp;python.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;python setup.py install&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Funciona bien, pero con algunas limitaciones que no eran f谩cil de arreglar. Viene de serie con la instalaci贸n de python y se puede reconocer por existir un fichero llamado &lt;code&gt;setup.py&lt;/code&gt; que configura la creaci贸n del paquete listo para su distribuci贸n, pudiendo generar ficheros &lt;code&gt;.deb&lt;/code&gt;  o &lt;code&gt;.rpm&lt;/code&gt; para las distribuciones linux m谩s populares, o los habituales instaladores para windows o mac a trav茅s de complementos. La&amp;nbsp;instalaci贸n &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://pypi.python.org/pypi/setuptools" title="Setuptools (con instrucciones de instalaci贸n)"&gt;&lt;strong&gt;Setuptools&lt;/strong&gt;&lt;/a&gt; era un proyecto que pretend铆a mejorar &lt;code&gt;distutils&lt;/code&gt; a帽adiendo m谩s&amp;nbsp;funcionalidades.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;easy_install &amp;lt;module&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;En muchos sentidos, se considera un &lt;em&gt;&amp;#8220;est谩ndar de facto&amp;#8221;&lt;/em&gt; gracias al comando &lt;a href="http://packages.python.org/distribute/easy_install.html" title="Easy_install"&gt;&lt;code&gt;easy_install&lt;/code&gt;&lt;/a&gt;; pero deja de funcionar en python3. Introdujeron el &lt;strong&gt;egg&lt;/strong&gt; (huevo) como formato de los ficheros para distribuir m贸dulos, as铆 como un repositorio central llamado &lt;em&gt;&amp;#8220;CheeseShop&amp;#8221;&lt;/em&gt; donde buscar los m贸dulos a instalar que fue el germen de lo que ahora es el directorio &lt;a href="http://pypi.python.org/pypi" title="the Python Package Index"&gt;PyPi&lt;/a&gt;. Estos ficheros &lt;em&gt;eggs&lt;/em&gt; suelen ser ficheros comprimidos que se instalan simplemente al ejecutarlos python como si fueran un&amp;nbsp;programa.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://pypi.python.org/pypi/distribute" title="Distribute (con instrucciones de instalaci贸n)"&gt;&lt;strong&gt;Distribute&lt;/strong&gt;&lt;/a&gt; es un &lt;em&gt;fork&lt;/em&gt; de &lt;em&gt;setuptools&lt;/em&gt; que pretend铆a acelerar su desarrollo y que lo ha suplantado en muchos casos. Su desarrollo ha quedado algo parado al salir &lt;em&gt;distutils2&lt;/em&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Instalador &lt;a href="http://www.pip-installer.org/en/latest/index.html" title="Instalador pip"&gt;&lt;strong&gt;pip&lt;/strong&gt;&lt;/a&gt;: es un popular instalador de uso similar a los instaladores de paquetes de las distribuciones&amp;nbsp;linux.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;pip install &amp;lt;paquete&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;A帽ade muchas funcionalidades como son las b煤squedas de paquetes o la descarga de dependencias. Puede funcionar sobre setuptools, aunque lo normal es usarlo con&amp;nbsp;distribute.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Distutils2&lt;/strong&gt; (renombrado como &lt;strong&gt;&lt;code&gt;packaging&lt;/code&gt;&lt;/strong&gt; en python3.3+) es un fork de &lt;em&gt;distutils&lt;/em&gt; que incorpora ideas tra铆das de &lt;em&gt;setuptools&lt;/em&gt; y &lt;em&gt;distribute&lt;/em&gt; y que se discuten mediante los PEPs habituales. Su instalador est谩 inspirado por &amp;#8220;pip&amp;#8221; y ser谩 est谩ndar para&amp;nbsp;python3.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Instalador &lt;span class="caps"&gt;PIP&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;Centr茅monos en la utilidad de instalaci贸n &lt;a href="http://www.pip-installer.org/en/latest/index.html" title="Instalador pip"&gt;&lt;code&gt;pip&lt;/code&gt;&lt;/a&gt;. Se trata de una herramienta que puede buscar, instalar/desinstalar, reempaquetar,&amp;#8230; y muchas m谩s cosas que nos va a facilitar la vida a la hora de realizar instalaciones distribuidas como veremos a&amp;nbsp;continuaci贸n.&lt;/p&gt;
&lt;p&gt;Caracter铆sticas de&amp;nbsp;pip:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;B煤squedas en el repositorio &lt;a href="http://pypi.python.org/pypi" title="the Python Package Index"&gt;PyPi&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Descarga de todas las dependencias antes de la instalaci贸n. Muy importante para mantener la fidelidad de la instalaci贸n en despliegues&amp;nbsp;remotos.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Puede instalar directamente de una direcci贸n de internet, o directamente desde sistemas de control de versiones como git, mercurial, subversion o&amp;nbsp;bazaar.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Con el comando &lt;code&gt;freeze&lt;/code&gt; podemos crear un fichero de requisitos con la lista de los paquetes y su versi贸n exacta que actualmente tenemos&amp;nbsp;instalados.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Con el comando &lt;code&gt;bundle&lt;/code&gt; podemos crear &lt;em&gt;pybundles&lt;/em&gt;, archivos que contienen m煤ltiples&amp;nbsp;paquetes.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Virtualenv&lt;/h2&gt;
&lt;p&gt;Otra gran caracter铆stica de &lt;strong&gt;pip&lt;/strong&gt; es que funciona tremendamente bien con &lt;a href="http://www.virtualenv.org" title="Virtuaenv"&gt;virtualenv&lt;/a&gt;. No en vano, son del mismo autor, &lt;a href="http://blog.ianbicking.org/" title="blog de Ian Bicking"&gt;Ian Bicking&lt;/a&gt;. Virtualenv nos permitir谩 crear entornos de desarrollo aislados del resto de instalaciones python, controlando tanto las versiones de los m贸dulos instalados como la versi贸n de python que usaremos en&amp;nbsp;茅l.&lt;/p&gt;
&lt;p&gt;Pero creo que ser谩 mejor poner algunos ejemplos de las aplicaciones de&amp;nbsp;virtualenv:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ virtualenv --no-site-packages --python&lt;span class="o"&gt;=&lt;/span&gt;/usr/bin/python3 py3
$ &lt;span class="nb"&gt;cd&lt;/span&gt; py3
$ &lt;span class="nb"&gt;source&lt;/span&gt; bin/activate
&lt;span class="o"&gt;(&lt;/span&gt;py3&lt;span class="o"&gt;)&lt;/span&gt;$ pip install markdown
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Con estas l铆neas hemos conseguido instalar el m贸dulo &lt;code&gt;markdown&lt;/code&gt; en un entorno python3. El int茅rprete de python3 que ejecutaremos desde aqu铆 estar谩 instalado en la ruta &lt;code&gt;py3/bin/python&lt;/code&gt; y el m贸dulo m谩rkdown en &lt;code&gt;py3/lib/python-3.2/site-packages&lt;/code&gt;. Tambi茅n se ha instalado en &lt;code&gt;py3/bin/python&lt;/code&gt; el script &lt;code&gt;markdown_py&lt;/code&gt; que ejecutar谩 el comando. En resumen, de una manera simple tenemos un entorno con lo m铆nimo donde hacer nuestras pruebas sin trastocar nada del&amp;nbsp;sistema.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ virtualenv --python&lt;span class="o"&gt;=&lt;/span&gt;/usr/local/bin/jython jydjango
$ &lt;span class="nb"&gt;cd&lt;/span&gt; jydjango
$ &lt;span class="nb"&gt;source&lt;/span&gt; bin/activate
&lt;span class="o"&gt;(&lt;/span&gt;jydjango&lt;span class="o"&gt;)&lt;/span&gt;$ pip install django
&lt;span class="o"&gt;(&lt;/span&gt;jydjango&lt;span class="o"&gt;)&lt;/span&gt;$ django-admin.py startproject djython
&lt;span class="o"&gt;(&lt;/span&gt;jydjango&lt;span class="o"&gt;)&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; djython/
&lt;span class="o"&gt;(&lt;/span&gt;jydjango&lt;span class="o"&gt;)&lt;/span&gt;$ jython manage.py runserver
Validating models...

&lt;span class="m"&gt;0&lt;/span&gt; errors found
Django version &lt;span class="m"&gt;1&lt;/span&gt;.4, using settings &lt;span class="s1"&gt;&amp;#39;djython.settings&amp;#39;&lt;/span&gt;
Development server is running at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;En este caso, a partir de una instalaci贸n local de jython hemos creado un entorno virtual, en el que hemos instalado &lt;code&gt;django&lt;/code&gt; y lo hemos ejecutado con jython. De este modo podemos experimentar con django y jython sin que afecte a cualquier otra instalaci贸n de django que&amp;nbsp;tengamos.&lt;/p&gt;
&lt;p&gt;A partir de aqu铆, la imaginaci贸n es el&amp;nbsp;l铆mite.&lt;/p&gt;
&lt;p&gt;Como recomendaci贸n, instala &lt;a href="http://www.doughellmann.com/projects/virtualenvwrapper/"&gt;virtualenvwrapper&lt;/a&gt;, una colecci贸n de comandos para bash que hace m谩s sencillo el uso de virtualenv, adem谩s de gestionar todos los entornos virtuales  desde un 煤nico directorio (&lt;code&gt;$HOME/.virtualenv&lt;/code&gt;). Tambi茅n existe una &lt;a href="https://bitbucket.org/guillermooo/virtualenvwrapper-powershell"&gt;versi贸n para PowerShell&lt;/a&gt; para&amp;nbsp;windows.&lt;/p&gt;</content><category term="Python"></category></entry><entry><title>BOM - marcas de orden debytes</title><link href="https://blog.ch3m4.org/2012/07/10/bom-marcas-de-orden-de-bytes/" rel="alternate"></link><published>2012-07-10T13:32:00+02:00</published><updated>2012-07-10T13:32:00+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2012-07-10:/2012/07/10/bom-marcas-de-orden-de-bytes/</id><summary type="html">&lt;p&gt;Los &lt;abbr title="Marca de orden de bytes"&gt;&lt;span class="caps"&gt;BOM&lt;/span&gt;&lt;/abbr&gt;&amp;#8216;s son marcas que aparecen en ficheros y transmisiones de datos para indicar el &lt;em&gt;&amp;#8220;orden de los bytes&amp;#8221;&lt;/em&gt; de la codificaci贸n empleada. Si pensamos que el tama帽o de cada dato transmitido puede ser 2, 4 u 8 bytes (16bits, 32 bits 贸 64 bits), el orden de los &lt;/p&gt;</summary><content type="html">&lt;p&gt;Los &lt;abbr title="Marca de orden de bytes"&gt;&lt;span class="caps"&gt;BOM&lt;/span&gt;&lt;/abbr&gt;&amp;#8216;s son marcas que aparecen en ficheros y transmisiones de datos para indicar el &lt;em&gt;&amp;#8220;orden de los bytes&amp;#8221;&lt;/em&gt; de la codificaci贸n empleada. Si pensamos que el tama帽o de cada dato transmitido puede ser 2, 4 u 8 bytes (16bits, 32 bits 贸 64 bits), el orden de los bytes nos indica c贸mo se est谩n empaquetando los bytes en cada&amp;nbsp;dato.&lt;/p&gt;
&lt;p&gt;Sin entrar en detalle, cuando usamos las codificaciones para unicode en ficheros, se suele convenir en el uso de una marca &lt;abbr title="Marca de orden de bytes"&gt;&lt;span class="caps"&gt;BOM&lt;/span&gt;&lt;/abbr&gt; al inicio del fichero para indicar el orden de los bytes del fichero, pero que sirve asimismo para saber la codificaci贸n&amp;nbsp;empleada.&lt;/p&gt;
&lt;p&gt;En unicode, el car谩cter &lt;abbr title="Marca de orden de bytes"&gt;&lt;span class="caps"&gt;BOM&lt;/span&gt;&lt;/abbr&gt; se representa por &lt;strong&gt;U+&lt;span class="caps"&gt;FEFF&lt;/span&gt;&lt;/strong&gt;. Codificado en los distintos UTFs&amp;nbsp;tenemos:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# UTF-8&lt;/span&gt;
&lt;span class="n"&gt;BOM_UTF8&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\xef\xbb\xbf&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;

&lt;span class="c1"&gt;# UTF-16, little endian&lt;/span&gt;
&lt;span class="n"&gt;BOM_LE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;BOM_UTF16_LE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\xff\xfe&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;

&lt;span class="c1"&gt;# UTF-16, big endian&lt;/span&gt;
&lt;span class="n"&gt;BOM_BE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;BOM_UTF16_BE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\xfe\xff&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;

&lt;span class="c1"&gt;# UTF-32, little endian&lt;/span&gt;
&lt;span class="n"&gt;BOM_UTF32_LE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\xff\xfe\x00\x00&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;

&lt;span class="c1"&gt;# UTF-32, big endian&lt;/span&gt;
&lt;span class="n"&gt;BOM_UTF32_BE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\x00\x00\xfe\xff&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;&lt;sub&gt;Extra铆do del fichero &lt;code&gt;codecs.py&lt;/code&gt; de la librer铆a est谩ndar de python&lt;/sub&gt;&lt;/p&gt;
&lt;p&gt;Como la marca &lt;abbr title="Marca de orden de bytes"&gt;&lt;span class="caps"&gt;BOM&lt;/span&gt;&lt;/abbr&gt; se codifica de manera diferente seg煤n el sistema de codificaci贸n, podemos deducir qu茅 codificaci贸n esta usando el fichero a partir de los 4 primeros bytes. De esta manera, muchos editores son capaces de emplear la codificaci贸n&amp;nbsp;correcta.&lt;/p&gt;
&lt;p&gt;Por otro lado, puede que sepamos qu茅 codificaci贸n usan nuestros ficheros, pero en cambio nos molesta esos caracteres de m谩s al inicio del fichero. En este caso, el m贸dulo &lt;code&gt;codecs&lt;/code&gt; de python nos facilita mucho la tarea. Basta emplear las siguiente codificaciones&amp;nbsp;gen茅ricas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;'utf-8-sig'&lt;/code&gt; para &lt;span class="caps"&gt;UTF&lt;/span&gt;-8&lt;/li&gt;
&lt;li&gt;&lt;code&gt;'utf-16'&lt;/code&gt; para &lt;span class="caps"&gt;UTF&lt;/span&gt;-&lt;span class="caps"&gt;16LE&lt;/span&gt; y &lt;span class="caps"&gt;UTF&lt;/span&gt;-&lt;span class="caps"&gt;16BE&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;'utf-32'&lt;/code&gt; para &lt;span class="caps"&gt;UTF&lt;/span&gt;-&lt;span class="caps"&gt;32LE&lt;/span&gt; y &lt;span class="caps"&gt;UTF&lt;/span&gt;-&lt;span class="caps"&gt;32BE&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Se introdujo &lt;code&gt;'utf-8-sig&lt;/code&gt;&lt;span class="quo"&gt;&amp;#8216;&lt;/span&gt; para no provocar incompatibilidades con el c贸digo existente que ya usaba &lt;code&gt;'utf-8&lt;/code&gt;&lt;span class="quo"&gt;&amp;#8216;&lt;/span&gt;. Usando estas codificaciones, el m贸dulo &lt;code&gt;'codecs'&lt;/code&gt; es suficientemente inteligente para quitar el &lt;abbr title="Marca de orden de bytes"&gt;&lt;span class="caps"&gt;BOM&lt;/span&gt;&lt;/abbr&gt; al leer el fichero, y para a帽adir el &lt;abbr title="Marca de orden de bytes"&gt;&lt;span class="caps"&gt;BOM&lt;/span&gt;&lt;/abbr&gt; al escribir, de modo completamente&amp;nbsp;transparente.&lt;/p&gt;
&lt;p&gt;Por ejemplo, estos d铆as necesitaba pasar un fichero en &lt;code&gt;UTF-16LE&lt;/code&gt; a &lt;code&gt;UTF-8&lt;/code&gt;. Lo consegu铆 con el siguiente&amp;nbsp;script:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;codecs&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;codecs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;fichero-utf16le.txt&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;encoding&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;utf-16&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;codecs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;fichero-utf8.txt&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;wb&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;encoding&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;utf-8-sig&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;O, completando &lt;a href="https://blog.ch3m4.org/2011/08/04/iconv-en-python/"&gt;otro articulo&lt;/a&gt;, se podr铆a hacer todo en una s贸la&amp;nbsp;l铆nea:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ python -c &lt;span class="s2"&gt;&amp;quot;import sys,codecs;codecs.EncodedFile(sys.stdout,&amp;#39;utf-16&amp;#39;,&amp;#39;utf-8-sig&amp;#39;).writelines(sys.stdin)&amp;quot;&lt;/span&gt; &amp;lt;fichero_entrada.txt &amp;gt;fichero_salida.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Hay que tener en cuenta que el comando &lt;code&gt;iconv&lt;/code&gt;, normalmente usado para convertir codificaciones de ficheros, no tiene en consideraci贸n el &lt;abbr title="Marca de orden de bytes"&gt;&lt;span class="caps"&gt;BOM&lt;/span&gt;&lt;/abbr&gt;. Con python tenemos una soluci贸n&amp;nbsp;perfecta.&lt;/p&gt;</content><category term="Python"></category><category term="code"></category><category term="unicode"></category></entry><entry><title>Descriptores - Parte3</title><link href="https://blog.ch3m4.org/2012/06/05/descriptores-parte-3/" rel="alternate"></link><published>2012-06-05T00:37:00+02:00</published><updated>2012-06-05T00:37:00+02:00</updated><author><name>Chema Cort茅s</name></author><id>tag:blog.ch3m4.org,2012-06-05:/2012/06/05/descriptores-parte-3/</id><summary type="html">&lt;p&gt;Hasta ahora hemos visto c贸mo funcionan los &lt;em&gt;descriptores&lt;/em&gt; para acceder a atributos de datos que funcionan como &lt;em&gt;&amp;#8220;propiedades&amp;#8221;&lt;/em&gt; (&lt;code&gt;property&lt;/code&gt;). Pero al iniciar esta serie de art铆culos dije que los &lt;em&gt;descriptores&lt;/em&gt; son tambi茅n &lt;em&gt;&amp;#8220;los responsables del funcionamiento de  m茅todos, m茅todos est谩ticos, m茅todos de clase y del mecanismo &lt;code&gt;super()&lt;/code&gt; responsable de la &lt;/em&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;Hasta ahora hemos visto c贸mo funcionan los &lt;em&gt;descriptores&lt;/em&gt; para acceder a atributos de datos que funcionan como &lt;em&gt;&amp;#8220;propiedades&amp;#8221;&lt;/em&gt; (&lt;code&gt;property&lt;/code&gt;). Pero al iniciar esta serie de art铆culos dije que los &lt;em&gt;descriptores&lt;/em&gt; son tambi茅n &lt;em&gt;&amp;#8220;los responsables del funcionamiento de  m茅todos, m茅todos est谩ticos, m茅todos de clase y del mecanismo &lt;code&gt;super()&lt;/code&gt; responsable de la herencia m煤ltiple&amp;#8221;&lt;/em&gt;.  Es el momento de ver c贸mo lo&amp;nbsp;hacen:&lt;/p&gt;
&lt;h2&gt;M茅todos vistos como&amp;nbsp;funciones&lt;/h2&gt;
&lt;p&gt;Es com煤n pensar que los m茅todos y las funciones comparten muchas similitudes. Considerando que en python las funciones son &lt;a href="http://en.wikipedia.org/wiki/First-class_object"&gt;objetos de primera clase&lt;/a&gt;  lo primero que podemos probar es a asignar directamente funciones a atributos de una clase para crear m茅todos &lt;em&gt;din谩micamente&lt;/em&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;C&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;pass&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;func&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;obj is &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;

&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;func&lt;/span&gt;

&lt;span class="c1"&gt;#prueba del nuevo m茅todo&lt;/span&gt;
&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;    &lt;span class="c1"&gt;# cualquiera de...&lt;/span&gt;
&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;span class="c1"&gt;# ...estas invocaciones...&lt;/span&gt;
&lt;span class="n"&gt;func&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;       &lt;span class="c1"&gt;# ...dan el mismo resultado&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Esta &lt;em&gt;dualidad&lt;/em&gt; entre funciones y m茅todos va m谩s all谩 si observamos que, en realidad, las funciones son &lt;em&gt;&amp;#8220;descriptores&amp;#8221;&lt;/em&gt;, tal como podemos comprobar mirando su&amp;nbsp;diccionario:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;hasattr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;func&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;__get__&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kc"&gt;True&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;hasattr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;func&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;__set__&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kc"&gt;False&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Concretamente, las funciones son &lt;em&gt;&amp;#8220;descriptores de no-datos&amp;#8221;&lt;/em&gt; y como tales se aplicar谩n las reglas comentadas en art铆culos previos. En concreto, se buscar谩n antes los m茅todos en el diccionario del objeto que entre los atributos de su clase&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1"&gt;1&lt;/a&gt;&lt;/sup&gt;, lo que nos va a permitir suplantar m茅todos en tiempo de&amp;nbsp;ejecuci贸n.&lt;/p&gt;
&lt;p&gt;Con a帽adir funciones a los atributos de clase ser谩 suficiente para la mayor铆a de casos que nos podamos enfrentar. El resto de este art铆culo va orientado para algunos casos de &lt;em&gt;&amp;#8220;t茅cnicas din谩micas&amp;#8221;&lt;/em&gt; que requieren diferenciar el comportamiento de un objeto respecto al resto de las instancias de la misma&amp;nbsp;clase.&lt;/p&gt;
&lt;h2&gt;Invocaci贸n de descriptores y sus&amp;nbsp;enlaces&lt;/h2&gt;
&lt;p&gt;Hasta ahora no nos hab铆amos preocupado por el segundo argumento que se pasa al m茅todo &lt;code&gt;__get__&lt;/code&gt; en el interface &amp;#8220;descriptor&amp;#8221;, al que se denomina &amp;#8220;propietario&amp;#8221; (&lt;em&gt;&amp;#8220;owner&amp;#8221;&lt;/em&gt;) y que siempre coincide con la clase de la instancia. A trav茅s de la instancia o del propietario, &lt;code&gt;__get__&lt;/code&gt; devolver谩 el atributo enlazado con la instancia y/o clase seg煤n sea el comportamiento&amp;nbsp;buscado.&lt;/p&gt;
&lt;p&gt;Veamos c贸mo funciona en detalle: supongamos que tenemos una instancia &lt;code&gt;obj&lt;/code&gt; de una clase &lt;code&gt;Cls&lt;/code&gt; y accedemos a trav茅s del descriptor &lt;code&gt;desc&lt;/code&gt;. Tendremos las siguientes formas de establecer el&amp;nbsp;enlace:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Llamada directa&lt;/strong&gt;: &lt;code&gt;__get__(obj)&lt;/code&gt; invocaci贸n expl铆cita a partir del descriptor. Es la m谩s simple, aunque infrecuente. (pe: &lt;code&gt;desc.__get__(obj)&lt;/code&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Enlace con la Instancia&lt;/strong&gt;: &lt;code&gt;__get__(obj, Cls)&lt;/code&gt; Se usa en el acceso al atributo &lt;code&gt;obj.desc&lt;/code&gt;, donde se efect煤a la llamada impl铆cita &lt;code&gt;Cls.__dict__['desc'].__get__(obj, Cls)&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Enlace con la clase&lt;/strong&gt;: &lt;code&gt;__get__(None, Cls)&lt;/code&gt; Se usa en el acceso al atributo &lt;code&gt;Cls.desc&lt;/code&gt;, donde se efect煤a la llamada impl铆cita &lt;code&gt;Cls.__dict__['desc'].__get__(None, Cls)&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Enlace con &lt;em&gt;super&lt;/em&gt;&lt;/strong&gt;:  se da con instancias de la clase &lt;code&gt;super&lt;/code&gt; utilizadas en la herencia m煤ltiple. El acceso al atributo &lt;code&gt;super(Cls, obj).desc&lt;/code&gt; inicia una b煤squeda en &lt;code&gt;obj.__class__.__mro__&lt;/code&gt; para encontrar la clase base inmediatamente precedente a la clase &lt;code&gt;Cls&lt;/code&gt; (=&lt;code&gt;SuperCls&lt;/code&gt;) e invoca el descriptor con la llamada &lt;code&gt;SuperCls.__dict__['desc'].__get__(obj,  obj.__class__)&lt;/code&gt; con lo que obtenemos el atributo enlazado con una de las clase  padre seg煤n el algoritmo &lt;a href="http://cafepy.com/article/python_attributes_and_methods/ch02s04.html" title="Art铆culo recomendable sobre el algoritmo MRO"&gt;&lt;span class="caps"&gt;MRO&lt;/span&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Como se puede observar, el m茅todo &lt;code&gt;__get__&lt;/code&gt; del descriptor recibe diferentes argumentos seg煤n el enlace que se vaya a usar, lo que nos permitir谩 programar el descriptor seg煤n el uso que deseemos&amp;nbsp;darle.&lt;/p&gt;
&lt;h2&gt;T茅cnicas&amp;nbsp;din谩micas&lt;/h2&gt;
&lt;p&gt;Para realizar nuestros experimentos, supongamos que tenemos el siguiente&amp;nbsp;descriptor:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;desc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;kwargs&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Es una simple funci贸n que imprime los argumentos que recibe con el fin de poder analizarlos. Con una clase y una instancia intentaremos ver c贸mo a帽adirles m茅todos&amp;nbsp;din谩micos:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Cls&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;pass&lt;/span&gt;

&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Cls&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;El caso trivial es a帽adir el descriptor como atributo de la&amp;nbsp;clase:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Cls&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;meth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;desc&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;meth&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;bound&lt;/span&gt; &lt;span class="n"&gt;method&lt;/span&gt; &lt;span class="n"&gt;Cls&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;desc&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;__main__&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Cls&lt;/span&gt; &lt;span class="nb"&gt;object&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="mh"&gt;0x8ffd3ac&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;meth&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;__main__&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Cls&lt;/span&gt; &lt;span class="nb"&gt;object&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="mh"&gt;0x8ffd3ac&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Encaja con el funcionamiento est谩ndar de los descriptores, que pasa por establecer primero un enlace del descriptor con la instancia o con la clase para obtener despu茅s el m茅todo&amp;nbsp;ejecutable.&lt;/p&gt;
&lt;p&gt;Pero a veces necesitamos a帽adir m茅todos sobre la instancia y no sobre la clase. sto puede ser debido&amp;nbsp;a:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;S贸lo queremos modificar una instancia sin que afecte al&amp;nbsp;resto&lt;/li&gt;
&lt;li&gt;Queremos &lt;em&gt;&amp;#8220;decorar&amp;#8221;&lt;/em&gt; el m茅todo de clase a trav茅s de un m茅todo de la&amp;nbsp;instancia&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;T茅cnicamente, son los llamados &lt;strong&gt;&amp;#8220;m茅todos singleton&amp;#8221;&lt;/strong&gt; que lenguajes como &lt;a href="http://www.ruby-doc.org/docs/ruby-doc-bundle/UsersGuide/rg/singletonmethods.html" title="Singleton methods in Ruby"&gt;ruby&lt;/a&gt; incluyen en su sintaxis, pero que en python se implementan hackeando los&amp;nbsp;descriptores.&lt;/p&gt;
&lt;p&gt;Si a帽adi茅semos un descriptor a una instancia sin establer ning煤n&amp;nbsp;enlace:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;meth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;desc&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;meth&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;meth&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;function&lt;/span&gt; &lt;span class="n"&gt;desc&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="mh"&gt;0xb76776bc&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Vemos que el funcionamiento es similar a si hubi茅ramos ejecutado directamente la funci贸n. En realidad, act煤a como &lt;strong&gt;&amp;#8220;m茅todos est谩ticos&amp;#8221;&lt;/strong&gt;, descriptores que no est谩n enlazados con&amp;nbsp;nada.&lt;/p&gt;
&lt;p&gt;Para conseguir que el descriptor funcione como un m茅todo normal, necesitamos enlazarlo con la&amp;nbsp;instancia:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;meth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;desc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="fm"&gt;__get__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Cls&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;meth&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;__main__&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Cls&lt;/span&gt; &lt;span class="nb"&gt;object&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="mh"&gt;0xb767adec&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;meth&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;bound&lt;/span&gt; &lt;span class="n"&gt;method&lt;/span&gt; &lt;span class="n"&gt;Cls&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;desc&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;__main__&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Cls&lt;/span&gt; &lt;span class="nb"&gt;object&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="mh"&gt;0xb767adec&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Aqu铆 ya vemos que el m茅todo se identifica como un &lt;strong&gt;&amp;#8220;m茅todo normal&amp;#8221;&lt;/strong&gt; m谩s de la clase &lt;code&gt;Cls&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;De forma parecida, podr铆amos enlazar el descriptor con la clase, pero vista como instancia, no como clase, con lo que obtenemos un &lt;strong&gt;&amp;#8220;m茅todo de clase&amp;#8221;&lt;/strong&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;meth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;desc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="fm"&gt;__get__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Cls&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;type&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Cls&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;meth&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="nc"&gt;__main__&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Cls&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;gt;,) &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Hemos visto las opciones posibles para realizar diversas t茅cnicas din谩micas. No es habitual verlas en el c贸digo que usamos normalmente. Casi puedo asegurar que si necesitas alguna de estas t茅cnicas, es que te has pasado por alto alguna otra forma m谩s sencilla de hacer lo&amp;nbsp;mismo.&lt;/p&gt;
&lt;h2&gt;Peque帽o&amp;nbsp;truco&lt;/h2&gt;
&lt;p&gt;Todo lo anteriormente dicho funciona siempre que estemos trabajando con &lt;em&gt;&amp;#8220;descriptores de no-datos&amp;#8221;&lt;/em&gt;. Si deseamos que un m茅todo de la clase no sea suplantado por un m茅todo en la instancia basta con crearlo como &lt;em&gt;&amp;#8220;descriptor de datos&amp;#8221;&lt;/em&gt;. Lo m谩s sencillo es usar el decorador &lt;code&gt;@property&lt;/code&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Cls&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;  &lt;span class="nd"&gt;@property&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;meth&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Desde clase&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt; 
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Cls&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;meth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;desc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="fm"&gt;__get__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Cls&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Traceback&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;most&lt;/span&gt; &lt;span class="n"&gt;recent&lt;/span&gt; &lt;span class="n"&gt;call&lt;/span&gt; &lt;span class="n"&gt;last&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;lt;stdin&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;module&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="ne"&gt;AttributeError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;can&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;t set attribute&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h2&gt;Resto de art铆culos de la&amp;nbsp;serie&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href="https://blog.ch3m4.org/2011/06/24/optimizaciones-con-los-metodos-especiales/"&gt;Optimizaciones con los M茅todos&amp;nbsp;Especiales&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://blog.ch3m4.org/2011/06/26/metodo-__getattribute__/"&gt;M茅todo&amp;nbsp;__getattribute__&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://blog.ch3m4.org/2011/06/19/descriptores-parte-1/"&gt;Descriptores  Parte&amp;nbsp;1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://blog.ch3m4.org/2011/06/21/descriptores-parte-2/"&gt;Descriptores  Parte&amp;nbsp;2&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Descriptor&amp;nbsp;Howto&lt;/h2&gt;
&lt;p&gt;Como referencias en la documentaci贸n&amp;nbsp;oficial:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href="http://docs.python.org/howto/descriptor.html"&gt;Descriptor HowTo&amp;nbsp;Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://docs.python.org/release/3.1.5/reference/datamodel.html#implementing-descriptors"&gt;Implementing&amp;nbsp;Descriptors&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="footnote"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Este orden no se respeta con los &lt;em&gt;&amp;#8220;m茅todos especiales&amp;#8221;&lt;/em&gt; y cuando estamos trabajando con &lt;em&gt;&amp;#8220;descriptores de datos&amp;#8221;&lt;/em&gt;. Revisar el resto de art铆culos sobre descriptores.&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</content><category term="Python"></category><category term="descriptor"></category><category term="t茅cnicas din谩micas"></category></entry></feed>